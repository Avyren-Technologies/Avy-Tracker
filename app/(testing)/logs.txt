 (NOBRIDGE) LOG  🔍 === CAMERA KEEP-ALIVE EFFECT TRIGGERED ===
 (NOBRIDGE) LOG  🔍 Verification step changed to: initializing
 (NOBRIDGE) LOG  🔍 Current camera keep-alive state: false
 (NOBRIDGE) LOG  🔍 Camera keep-alive effect completed
 (NOBRIDGE) LOG  Face detection state: {"faceData": false, "faceDetected": false, "faceQuality": undefined, "isDetecting": false, "verificationStep": "initializing"}
 (NOBRIDGE) LOG  Modal visible - starting verification process
 (NOBRIDGE) LOG  🛡️ Detection active flag set - preventing modal cleanup
 (NOBRIDGE) LOG  Requesting camera permissions...
 (NOBRIDGE) LOG  App state changed: active -> background
 (NOBRIDGE) LOG  App went to background, keeping token refresh timer active
 (NOBRIDGE) LOG  Face detection app state changed: active -> background
 (NOBRIDGE) LOG  Liveness detection app state changed: active -> background
 (NOBRIDGE) LOG  App went to background, pausing liveness detection
 (NOBRIDGE) LOG  App state changed: background -> active
 (NOBRIDGE) LOG  App has come to the foreground!
 (NOBRIDGE) LOG  Face detection app state changed: background -> active
 (NOBRIDGE) LOG  Liveness detection app state changed: background -> active
 (NOBRIDGE) LOG  Initializing ML Kit Face Detection...
 (NOBRIDGE) LOG  ML Kit detector available, checking methods: ["status", "error", "options"]
 (NOBRIDGE) LOG  ML Kit Face Detection initialized successfully with config: {"classificationMode": true, "contourMode": false, "isTrackingEnabled": true, "landmarkMode": true, "minFaceSize": 0.1, "performanceMode": "fast"}
 (NOBRIDGE) LOG  Testing ML Kit detector...
 (NOBRIDGE) LOG  ML Kit detector test completed successfully
 (NOBRIDGE) LOG  Initializing camera with performance mode: fast
 (NOBRIDGE) LOG  🚀 Starting periodic face detection with ML Kit...
 (NOBRIDGE) LOG  🧪 Testing ML Kit detector before starting detection...
 (NOBRIDGE) LOG  ✅ ML Kit detector is ready and has detectFaces method
 (NOBRIDGE) LOG  📊 Setting isDetecting to true and starting interval...
 (NOBRIDGE) LOG  📊 Face detection state updated: {"faceData": false, "faceDetected": false, "faceQuality": undefined, "isDetecting": true, "verificationStep": "detecting"}
 (NOBRIDGE) LOG  ⏰ Starting detection interval...
 (NOBRIDGE) LOG  ✅ Face detection interval started successfully
 (NOBRIDGE) LOG  📊 Face detection state: {"faceData": false, "faceDetected": false, "faceQuality": undefined, "isDetecting": true, "verificationStep": "detecting"}
 (NOBRIDGE) LOG  Face detection state: {"faceData": false, "faceDetected": false, "faceQuality": undefined, "isDetecting": false, "verificationStep": "initializing"}
 (NOBRIDGE) LOG  Modal visible - starting verification process
 (NOBRIDGE) LOG  🛡️ Detection active flag set - preventing modal cleanup
 (NOBRIDGE) LOG  🔍 === isDetecting STATE CHANGED ===
 (NOBRIDGE) LOG  🔍 New value: true
 (NOBRIDGE) LOG  🔍 Has interval: true
 (NOBRIDGE) LOG  🔍 Has timeout: true
 (NOBRIDGE) LOG  🔍 Camera keep-alive: false
 (NOBRIDGE) LOG  🔍 Timestamp: 2025-08-26T10:35:18.112Z
 (NOBRIDGE) LOG  🔍 === FACE DETECTION STATE CHANGED ===
 (NOBRIDGE) LOG  🔍 Face data: false
 (NOBRIDGE) LOG  🔍 Face detected: false
 (NOBRIDGE) LOG  🔍 Face quality: false
 (NOBRIDGE) LOG  🔍 Is detecting: true
 (NOBRIDGE) LOG  🔍 Has interval: true
 (NOBRIDGE) LOG  🔍 Camera keep-alive: false
 (NOBRIDGE) LOG  🔍 Timestamp: 2025-08-26T10:35:18.136Z
 (NOBRIDGE) LOG  Face detection state: {"faceData": false, "faceDetected": false, "faceQuality": undefined, "isDetecting": true, "verificationStep": "initializing"}
 (NOBRIDGE) LOG  Modal visible - starting verification process
 (NOBRIDGE) LOG  🛡️ Detection active flag set - preventing modal cleanup
 (NOBRIDGE) LOG  🔄 Detection interval triggered - calling processPeriodicFaceDetection...
 (NOBRIDGE) LOG  === MAIN FACE DETECTION PROCESS STARTED ===
 (NOBRIDGE) LOG  🔄 processPeriodicFaceDetection called: {"hasCamera": false, "hasMLKit": true, "isDetecting": false, "isMounted": true, "timestamp": "2025-08-26T10:35:18.312Z"}
 (NOBRIDGE) LOG  ❌ Skipping face detection - conditions not met: {"hasCamera": false, "hasMLKit": true, "isDetecting": false, "isMounted": true}
 (NOBRIDGE) LOG  🔍 Camera ref missing - detection will retry when camera is connected
 (NOBRIDGE) LOG  🔄 Detection interval triggered - calling processPeriodicFaceDetection...
 (NOBRIDGE) LOG  === MAIN FACE DETECTION PROCESS STARTED ===
 (NOBRIDGE) LOG  🔄 processPeriodicFaceDetection called: {"hasCamera": false, "hasMLKit": true, "isDetecting": false, "isMounted": true, "timestamp": "2025-08-26T10:35:18.611Z"}
 (NOBRIDGE) LOG  ❌ Skipping face detection - conditions not met: {"hasCamera": false, "hasMLKit": true, "isDetecting": false, "isMounted": true}
 (NOBRIDGE) LOG  🔍 Camera ref missing - detection will retry when camera is connected
 (NOBRIDGE) LOG  🔄 Detection interval triggered - calling processPeriodicFaceDetection...
 (NOBRIDGE) LOG  === MAIN FACE DETECTION PROCESS STARTED ===
 (NOBRIDGE) LOG  🔄 processPeriodicFaceDetection called: {"hasCamera": false, "hasMLKit": true, "isDetecting": false, "isMounted": true, "timestamp": "2025-08-26T10:35:18.918Z"}
 (NOBRIDGE) LOG  ❌ Skipping face detection - conditions not met: {"hasCamera": false, "hasMLKit": true, "isDetecting": false, "isMounted": true}
 (NOBRIDGE) LOG  🔍 Camera ref missing - detection will retry when camera is connected
 (NOBRIDGE) LOG  🔄 Face detection already running (interval active), skipping start request
 (NOBRIDGE) LOG  🔍 === CAMERA isActive CALCULATION ===
 (NOBRIDGE) LOG  🔍 visible: true
 (NOBRIDGE) LOG  🔍 verificationStep: detecting
 (NOBRIDGE) LOG  🔍 isDetecting: true
 (NOBRIDGE) LOG  🔍 cameraKeepAlive: false
 (NOBRIDGE) LOG  🔍 Final isActive result: true
 (NOBRIDGE) LOG  🔍 Camera should be active - checking persistence state...
 (NOBRIDGE) LOG  🔍 === CAMERA KEEP-ALIVE EFFECT TRIGGERED ===
 (NOBRIDGE) LOG  🔍 Verification step changed to: detecting
 (NOBRIDGE) LOG  🔍 Current camera keep-alive state: false
 (NOBRIDGE) LOG  🔍 Camera keep-alive effect completed
 (NOBRIDGE) LOG  Face detection state: {"faceData": false, "faceDetected": false, "faceQuality": undefined, "isDetecting": true, "verificationStep": "detecting"}
 (NOBRIDGE) LOG  🔄 Face detection already running (interval active), skipping start request
 (NOBRIDGE) LOG  🔄 Detection interval triggered - calling processPeriodicFaceDetection...
 (NOBRIDGE) LOG  === MAIN FACE DETECTION PROCESS STARTED ===
 (NOBRIDGE) LOG  🔄 processPeriodicFaceDetection called: {"hasCamera": false, "hasMLKit": true, "isDetecting": false, "isMounted": true, "timestamp": "2025-08-26T10:35:19.274Z"}
 (NOBRIDGE) LOG  ❌ Skipping face detection - conditions not met: {"hasCamera": false, "hasMLKit": true, "isDetecting": false, "isMounted": true}
 (NOBRIDGE) LOG  🔍 Camera ref missing - detection will retry when camera is connected
 (NOBRIDGE) LOG  🔍 === CAMERA isActive CALCULATION ===
 (NOBRIDGE) LOG  🔍 visible: true
 (NOBRIDGE) LOG  🔍 verificationStep: detecting
 (NOBRIDGE) LOG  🔍 isDetecting: true
 (NOBRIDGE) LOG  🔍 cameraKeepAlive: false
 (NOBRIDGE) LOG  🔍 Final isActive result: true
 (NOBRIDGE) LOG  🔍 Camera should be active - checking persistence state...
 (NOBRIDGE) LOG  Camera onInitialized called
 (NOBRIDGE) LOG  🔄 Detection interval triggered - calling processPeriodicFaceDetection...
 (NOBRIDGE) LOG  === MAIN FACE DETECTION PROCESS STARTED ===
 (NOBRIDGE) LOG  🔄 processPeriodicFaceDetection called: {"hasCamera": false, "hasMLKit": true, "isDetecting": false, "isMounted": true, "timestamp": "2025-08-26T10:35:19.594Z"}
 (NOBRIDGE) LOG  ❌ Skipping face detection - conditions not met: {"hasCamera": false, "hasMLKit": true, "isDetecting": false, "isMounted": true}
 (NOBRIDGE) LOG  🔍 Camera ref missing - detection will retry when camera is connected
 (NOBRIDGE) LOG  Camera initialized - connecting reference to face detection hook
 (NOBRIDGE) LOG  🔍 === SETTING CAMERA REFERENCE ===
 (NOBRIDGE) LOG  🔍 Camera component exists: true
 (NOBRIDGE) LOG  🔍 Component type: object
 (NOBRIDGE) LOG  🔍 Has component: true
 (NOBRIDGE) LOG  🔍 Component methods: ["props", "context", "refs", "updater", "displayName", "isNativeViewMounted", "lastUIRotation", "rotationHelper", "onViewReady", "onAverageFpsChanged", "onInitialized", "onStarted", "onStopped", "onPreviewStarted", "onPreviewStopped", "onShutter", "onOutputOrientationChanged", "onPreviewOrientationChanged", "onError", "onCodeScanned", "ref", "lastFrameProcessor", "state", "_reactInternals", "_reactInternalInstance"]
 (NOBRIDGE) LOG  🔍 Has takePhoto method: true
 (NOBRIDGE) LOG  🔍 Camera reference stored in persistent ref
 (NOBRIDGE) LOG  ✅ Camera reference set successfully: {"cameraRefType": "object", "hasCameraRef": true, "hasTakePhotoMethod": true, "persistentRefState": "valid"}
 (NOBRIDGE) LOG  🔄 Camera connected during active detection - detection will now proceed
 (NOBRIDGE) LOG  Camera started - ensuring detection is running
 (NOBRIDGE) LOG  🔄 Detection interval triggered - calling processPeriodicFaceDetection...
 (NOBRIDGE) LOG  === MAIN FACE DETECTION PROCESS STARTED ===
 (NOBRIDGE) LOG  🔄 processPeriodicFaceDetection called: {"hasCamera": true, "hasMLKit": true, "isDetecting": false, "isMounted": true, "timestamp": "2025-08-26T10:35:19.873Z"}
 (NOBRIDGE) LOG  ✅ Starting periodic face detection with enhanced photo processing...
 (NOBRIDGE) LOG  ✅ Camera is active and ready for photo capture
 (NOBRIDGE) LOG  📸 Attempting to capture photo for face detection...
 (NOBRIDGE) LOG  🔍 Camera state before photo capture: {"cameraMethods": ["props", "context", "refs", "updater", "displayName", "isNativeViewMounted", "lastUIRotation", "rotationHelper", "onViewReady", "onAverageFpsChanged", "onInitialized", "onStarted", "onStopped", "onPreviewStarted", "onPreviewStopped", "onShutter", "onOutputOrientationChanged", "onPreviewOrientationChanged", "onError", "onCodeScanned", "ref", "lastFrameProcessor", "state", "_reactInternals", "_reactInternalInstance"], "cameraRefExists": true, "hasTakePhoto": true, "isActive": true}
 (NOBRIDGE) LOG  ⚙️ Optimizing camera settings for ML Kit...
 (NOBRIDGE) LOG  🔄 Detection interval triggered - calling processPeriodicFaceDetection...
 (NOBRIDGE) LOG  === MAIN FACE DETECTION PROCESS STARTED ===
 (NOBRIDGE) LOG  🔄 processPeriodicFaceDetection called: {"hasCamera": true, "hasMLKit": true, "isDetecting": false, "isMounted": true, "timestamp": "2025-08-26T10:35:20.163Z"}
 (NOBRIDGE) LOG  ✅ Starting periodic face detection with enhanced photo processing...
 (NOBRIDGE) LOG  ✅ Camera is active and ready for photo capture
 (NOBRIDGE) LOG  📸 Attempting to capture photo for face detection...
 (NOBRIDGE) LOG  🔍 Camera state before photo capture: {"cameraMethods": ["props", "context", "refs", "updater", "displayName", "isNativeViewMounted", "lastUIRotation", "rotationHelper", "onViewReady", "onAverageFpsChanged", "onInitialized", "onStarted", "onStopped", "onPreviewStarted", "onPreviewStopped", "onShutter", "onOutputOrientationChanged", "onPreviewOrientationChanged", "onError", "onCodeScanned", "ref", "lastFrameProcessor", "state", "_reactInternals", "_reactInternalInstance"], "cameraRefExists": true, "hasTakePhoto": true, "isActive": true}
 (NOBRIDGE) LOG  ⚙️ Optimizing camera settings for ML Kit...
 (NOBRIDGE) LOG  🔄 Detection interval triggered - calling processPeriodicFaceDetection...
 (NOBRIDGE) LOG  === MAIN FACE DETECTION PROCESS STARTED ===
 (NOBRIDGE) LOG  🔄 processPeriodicFaceDetection called: {"hasCamera": true, "hasMLKit": true, "isDetecting": false, "isMounted": true, "timestamp": "2025-08-26T10:35:20.481Z"}
 (NOBRIDGE) LOG  ✅ Starting periodic face detection with enhanced photo processing...
 (NOBRIDGE) LOG  ✅ Camera is active and ready for photo capture
 (NOBRIDGE) LOG  📸 Attempting to capture photo for face detection...
 (NOBRIDGE) LOG  🔍 Camera state before photo capture: {"cameraMethods": ["props", "context", "refs", "updater", "displayName", "isNativeViewMounted", "lastUIRotation", "rotationHelper", "onViewReady", "onAverageFpsChanged", "onInitialized", "onStarted", "onStopped", "onPreviewStarted", "onPreviewStopped", "onShutter", "onOutputOrientationChanged", "onPreviewOrientationChanged", "onError", "onCodeScanned", "ref", "lastFrameProcessor", "state", "_reactInternals", "_reactInternalInstance"], "cameraRefExists": true, "hasTakePhoto": true, "isActive": true}
 (NOBRIDGE) LOG  ⚙️ Optimizing camera settings for ML Kit...
 (NOBRIDGE) LOG  🔄 Detection interval triggered - calling processPeriodicFaceDetection...
 (NOBRIDGE) LOG  === MAIN FACE DETECTION PROCESS STARTED ===
 (NOBRIDGE) LOG  🔄 processPeriodicFaceDetection called: {"hasCamera": true, "hasMLKit": true, "isDetecting": false, "isMounted": true, "timestamp": "2025-08-26T10:35:20.800Z"}
 (NOBRIDGE) LOG  ✅ Starting periodic face detection with enhanced photo processing...
 (NOBRIDGE) LOG  ✅ Camera is active and ready for photo capture
 (NOBRIDGE) LOG  ✅ Photo captured successfully: {"height": 1200, "path": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy1876532664151483049.jpg", "width": 1600}
 (NOBRIDGE) LOG  📁 Photo URI generated: file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy1876532664151483049.jpg
 (NOBRIDGE) LOG  Processing photo for ML Kit compatibility...
 (NOBRIDGE) LOG  Waiting for photo file to be fully written...
 (NOBRIDGE) LOG  📸 Attempting to capture photo for face detection...
 (NOBRIDGE) LOG  🔍 Camera state before photo capture: {"cameraMethods": ["props", "context", "refs", "updater", "displayName", "isNativeViewMounted", "lastUIRotation", "rotationHelper", "onViewReady", "onAverageFpsChanged", "onInitialized", "onStarted", "onStopped", "onPreviewStarted", "onPreviewStopped", "onShutter", "onOutputOrientationChanged", "onPreviewOrientationChanged", "onError", "onCodeScanned", "ref", "lastFrameProcessor", "state", "_reactInternals", "_reactInternalInstance"], "cameraRefExists": true, "hasTakePhoto": true, "isActive": true}
 (NOBRIDGE) LOG  ⚙️ Optimizing camera settings for ML Kit...
 (NOBRIDGE) LOG  ✅ Photo captured successfully: {"height": 1200, "path": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy491960997525761293.jpg", "width": 1600}
 (NOBRIDGE) LOG  📁 Photo URI generated: file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy491960997525761293.jpg
 (NOBRIDGE) LOG  Processing photo for ML Kit compatibility...
 (NOBRIDGE) LOG  Waiting for photo file to be fully written...
 (NOBRIDGE) LOG  🔄 Detection interval triggered - calling processPeriodicFaceDetection...
 (NOBRIDGE) LOG  === MAIN FACE DETECTION PROCESS STARTED ===
 (NOBRIDGE) LOG  🔄 processPeriodicFaceDetection called: {"hasCamera": true, "hasMLKit": true, "isDetecting": false, "isMounted": true, "timestamp": "2025-08-26T10:35:21.131Z"}
 (NOBRIDGE) LOG  ✅ Starting periodic face detection with enhanced photo processing...
 (NOBRIDGE) LOG  ✅ Camera is active and ready for photo capture
 (NOBRIDGE) LOG  ✅ Photo captured successfully: {"height": 1200, "path": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy4268886858920834166.jpg", "width": 1600}
 (NOBRIDGE) LOG  📁 Photo URI generated: file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy4268886858920834166.jpg
 (NOBRIDGE) LOG  Processing photo for ML Kit compatibility...
 (NOBRIDGE) LOG  Waiting for photo file to be fully written...
 (NOBRIDGE) LOG  📸 Attempting to capture photo for face detection...
 (NOBRIDGE) LOG  🔍 Camera state before photo capture: {"cameraMethods": ["props", "context", "refs", "updater", "displayName", "isNativeViewMounted", "lastUIRotation", "rotationHelper", "onViewReady", "onAverageFpsChanged", "onInitialized", "onStarted", "onStopped", "onPreviewStarted", "onPreviewStopped", "onShutter", "onOutputOrientationChanged", "onPreviewOrientationChanged", "onError", "onCodeScanned", "ref", "lastFrameProcessor", "state", "_reactInternals", "_reactInternalInstance"], "cameraRefExists": true, "hasTakePhoto": true, "isActive": true}
 (NOBRIDGE) LOG  ⚙️ Optimizing camera settings for ML Kit...
 (NOBRIDGE) LOG  🔄 Detection interval triggered - calling processPeriodicFaceDetection...
 (NOBRIDGE) LOG  === MAIN FACE DETECTION PROCESS STARTED ===
 (NOBRIDGE) LOG  🔄 processPeriodicFaceDetection called: {"hasCamera": true, "hasMLKit": true, "isDetecting": false, "isMounted": true, "timestamp": "2025-08-26T10:35:21.431Z"}
 (NOBRIDGE) LOG  ✅ Starting periodic face detection with enhanced photo processing...
 (NOBRIDGE) LOG  ✅ Camera is active and ready for photo capture
 (NOBRIDGE) LOG  Photo file verification: {"exists": true, "fileSize": 530637, "path": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy1876532664151483049.jpg"}
 (NOBRIDGE) LOG  Photo file verified successfully: {"path": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy1876532664151483049.jpg", "size": 530637, "uri": "file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy1876532664151483049.jpg"}
 (NOBRIDGE) LOG  Applying ML Kit photo processing...
 (NOBRIDGE) LOG  Photo file read successfully, content length: 707516
 (NOBRIDGE) LOG  ✅ Photo has valid image format header
 (NOBRIDGE) LOG  Additional delay for file system sync...
 (NOBRIDGE) LOG  Photo file verification: {"exists": true, "fileSize": 511527, "path": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy491960997525761293.jpg"}
 (NOBRIDGE) LOG  Photo file verified successfully: {"path": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy491960997525761293.jpg", "size": 511527, "uri": "file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy491960997525761293.jpg"}
 (NOBRIDGE) LOG  Applying ML Kit photo processing...
 (NOBRIDGE) LOG  ✅ Photo captured successfully: {"height": 1200, "path": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy4017695950922307274.jpg", "width": 1600}
 (NOBRIDGE) LOG  📁 Photo URI generated: file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy4017695950922307274.jpg
 (NOBRIDGE) LOG  Processing photo for ML Kit compatibility...
 (NOBRIDGE) LOG  Waiting for photo file to be fully written...
 (NOBRIDGE) LOG  Photo file read successfully, content length: 682036
 (NOBRIDGE) LOG  ✅ Photo has valid image format header
 (NOBRIDGE) LOG  Additional delay for file system sync...
 (NOBRIDGE) LOG  📸 Attempting to capture photo for face detection...
 (NOBRIDGE) LOG  🔍 Camera state before photo capture: {"cameraMethods": ["props", "context", "refs", "updater", "displayName", "isNativeViewMounted", "lastUIRotation", "rotationHelper", "onViewReady", "onAverageFpsChanged", "onInitialized", "onStarted", "onStopped", "onPreviewStarted", "onPreviewStopped", "onShutter", "onOutputOrientationChanged", "onPreviewOrientationChanged", "onError", "onCodeScanned", "ref", "lastFrameProcessor", "state", "_reactInternals", "_reactInternalInstance"], "cameraRefExists": true, "hasTakePhoto": true, "isActive": true}
 (NOBRIDGE) LOG  ⚙️ Optimizing camera settings for ML Kit...
 (NOBRIDGE) LOG  🔄 Detection interval triggered - calling processPeriodicFaceDetection...
 (NOBRIDGE) LOG  === MAIN FACE DETECTION PROCESS STARTED ===
 (NOBRIDGE) LOG  🔄 processPeriodicFaceDetection called: {"hasCamera": true, "hasMLKit": true, "isDetecting": false, "isMounted": true, "timestamp": "2025-08-26T10:35:21.744Z"}
 (NOBRIDGE) LOG  ✅ Starting periodic face detection with enhanced photo processing...
 (NOBRIDGE) LOG  ✅ Camera is active and ready for photo capture
 (NOBRIDGE) LOG  🤖 Sending photo to ML Kit for face detection...
 (NOBRIDGE) LOG  🔍 ML Kit detector state before detection: {"availableMethods": ["status", "error", "options"], "detectorType": "object", "isInitialized": true, "photoPath": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy1876532664151483049.jpg", "photoUri": "file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy1876532664151483049.jpg"}
 (NOBRIDGE) LOG  ✅ Photo captured successfully: {"height": 1200, "path": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy8718719164161510948.jpg", "width": 1600}
 (NOBRIDGE) LOG  📁 Photo URI generated: file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy8718719164161510948.jpg
 (NOBRIDGE) LOG  Processing photo for ML Kit compatibility...
 (NOBRIDGE) LOG  Waiting for photo file to be fully written...
 (NOBRIDGE) LOG  Photo file verification: {"exists": true, "fileSize": 552184, "path": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy4268886858920834166.jpg"}
 (NOBRIDGE) LOG  Photo file verified successfully: {"path": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy4268886858920834166.jpg", "size": 552184, "uri": "file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy4268886858920834166.jpg"}
 (NOBRIDGE) LOG  Applying ML Kit photo processing...
 (NOBRIDGE) LOG  Photo file read successfully, content length: 736248
 (NOBRIDGE) LOG  ✅ Photo has valid image format header
 (NOBRIDGE) LOG  Additional delay for file system sync...
 (NOBRIDGE) LOG  📸 Attempting to capture photo for face detection...
 (NOBRIDGE) LOG  🔍 Camera state before photo capture: {"cameraMethods": ["props", "context", "refs", "updater", "displayName", "isNativeViewMounted", "lastUIRotation", "rotationHelper", "onViewReady", "onAverageFpsChanged", "onInitialized", "onStarted", "onStopped", "onPreviewStarted", "onPreviewStopped", "onShutter", "onOutputOrientationChanged", "onPreviewOrientationChanged", "onError", "onCodeScanned", "ref", "lastFrameProcessor", "state", "_reactInternals", "_reactInternalInstance"], "cameraRefExists": true, "hasTakePhoto": true, "isActive": true}
 (NOBRIDGE) LOG  ⚙️ Optimizing camera settings for ML Kit...
 (NOBRIDGE) LOG  🤖 Sending photo to ML Kit for face detection...
 (NOBRIDGE) LOG  🔍 ML Kit detector state before detection: {"availableMethods": ["status", "error", "options"], "detectorType": "object", "isInitialized": true, "photoPath": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy491960997525761293.jpg", "photoUri": "file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy491960997525761293.jpg"}
 (NOBRIDGE) LOG  🔄 Detection interval triggered - calling processPeriodicFaceDetection...
 (NOBRIDGE) LOG  === MAIN FACE DETECTION PROCESS STARTED ===
 (NOBRIDGE) LOG  🔄 processPeriodicFaceDetection called: {"hasCamera": true, "hasMLKit": true, "isDetecting": false, "isMounted": true, "timestamp": "2025-08-26T10:35:22.075Z"}
 (NOBRIDGE) LOG  ✅ Starting periodic face detection with enhanced photo processing...
 (NOBRIDGE) LOG  ✅ Camera is active and ready for photo capture
 (NOBRIDGE) LOG  ✅ Photo captured successfully: {"height": 1200, "path": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy4649548117261440552.jpg", "width": 1600}
 (NOBRIDGE) LOG  📁 Photo URI generated: file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy4649548117261440552.jpg
 (NOBRIDGE) LOG  Processing photo for ML Kit compatibility...
 (NOBRIDGE) LOG  Waiting for photo file to be fully written...
 (NOBRIDGE) LOG  Photo file verification: {"exists": true, "fileSize": 538192, "path": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy4017695950922307274.jpg"}
 (NOBRIDGE) LOG  Photo file verified successfully: {"path": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy4017695950922307274.jpg", "size": 538192, "uri": "file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy4017695950922307274.jpg"}
 (NOBRIDGE) LOG  Applying ML Kit photo processing...
 (NOBRIDGE) LOG  🤖 Sending photo to ML Kit for face detection...
 (NOBRIDGE) LOG  🔍 ML Kit detector state before detection: {"availableMethods": ["status", "error", "options"], "detectorType": "object", "isInitialized": true, "photoPath": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy4268886858920834166.jpg", "photoUri": "file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy4268886858920834166.jpg"}
 (NOBRIDGE) LOG  Photo file read successfully, content length: 717592
 (NOBRIDGE) LOG  ✅ Photo has valid image format header
 (NOBRIDGE) LOG  Additional delay for file system sync...
 (NOBRIDGE) LOG  📸 Attempting to capture photo for face detection...
 (NOBRIDGE) LOG  🔍 Camera state before photo capture: {"cameraMethods": ["props", "context", "refs", "updater", "displayName", "isNativeViewMounted", "lastUIRotation", "rotationHelper", "onViewReady", "onAverageFpsChanged", "onInitialized", "onStarted", "onStopped", "onPreviewStarted", "onPreviewStopped", "onShutter", "onOutputOrientationChanged", "onPreviewOrientationChanged", "onError", "onCodeScanned", "ref", "lastFrameProcessor", "state", "_reactInternals", "_reactInternalInstance"], "cameraRefExists": true, "hasTakePhoto": true, "isActive": true}
 (NOBRIDGE) LOG  ⚙️ Optimizing camera settings for ML Kit...
 (NOBRIDGE) LOG  ✅ ML Kit detection completed successfully: {"faceCount": 1, "faces": [{"contours": [Array], "frame": [Object], "headEulerAngleX": -4.936426639556885, "headEulerAngleY": 1.224787712097168, "headEulerAngleZ": -4.176271915435791, "landmarks": [Array], "leftEyeOpenProbability": 0.9961413145065308, "rightEyeOpenProbability": 0.99802166223526, "smilingProbability": 0.006722430698573589, "trackingID": 3}], "rawResult": {"faces": [[Object]], "imagePath": "file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy1876532664151483049.jpg"}, "success": true}
 (NOBRIDGE) LOG  🎉 SUCCESS: Face detection completed with 1 face(s)
 (NOBRIDGE) LOG  🎯 Processing detected faces...
 (NOBRIDGE) LOG  👤 Detected face details: {"headAngles": {"x": -4.936426639556885, "y": 1.224787712097168, "z": -4.176271915435791}, "leftEyeOpen": 0.9961413145065308, "rightEyeOpen": 0.99802166223526, "smiling": 0.006722430698573589, "trackingID": 3}
 (NOBRIDGE) LOG  🔄 Converted face data: {"bounds": {"height": 746, "width": 745, "x": 238, "y": 418}, "faceId": "3", "leftEyeOpenProbability": 0.9961413145065308, "rightEyeOpenProbability": 0.99802166223526, "rollAngle": -4.176271915435791, "timestamp": 1756204522317, "yawAngle": 1.224787712097168}
 (NOBRIDGE) LOG  Face quality calculation: {"bounds": {"height": 746, "width": 745, "x": 238, "y": 418}, "faceArea": 555770, "faceRatio": 0.28946354166666666, "maxFaceSize": 0.6, "minFaceSize": 0.05, "screenArea": 1920000}
 (NOBRIDGE) LOG  Quality scores: {"angleQuality": 0.9303954680760702, "lightingQuality": 1, "overall": 0.8001915570894877, "sizeQuality": 0.5526822916666667, "threshold": 0.4}
 (NOBRIDGE) LOG  ✅ Face detection state updated successfully
 (NOBRIDGE) LOG  📊 Face quality score: 0.8001915570894877
 (NOBRIDGE) LOG  🔄 Detection interval cleared - face found
 (NOBRIDGE) LOG  ⏰ Detection timeout cleared - face found
 (NOBRIDGE) LOG  🎉 Face detection completed successfully - stopping all timers
 (NOBRIDGE) LOG  ⏱️ Face detection process completed in 2450.29ms
 (NOBRIDGE) LOG  === MAIN FACE DETECTION PROCESS COMPLETED ===
 (NOBRIDGE) LOG  🔍 === CAMERA isActive CALCULATION ===
 (NOBRIDGE) LOG  🔍 visible: true
 (NOBRIDGE) LOG  🔍 verificationStep: detecting
 (NOBRIDGE) LOG  🔍 isDetecting: false
 (NOBRIDGE) LOG  🔍 cameraKeepAlive: false
 (NOBRIDGE) LOG  🔍 Final isActive result: true
 (NOBRIDGE) LOG  🔍 Camera should be active - checking persistence state...
 (NOBRIDGE) LOG  🤖 Sending photo to ML Kit for face detection...
 (NOBRIDGE) LOG  🔍 ML Kit detector state before detection: {"availableMethods": ["status", "error", "options"], "detectorType": "object", "isInitialized": true, "photoPath": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy4017695950922307274.jpg", "photoUri": "file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy4017695950922307274.jpg"}
 (NOBRIDGE) LOG  ✅ Photo captured successfully: {"height": 1200, "path": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy1841409346287072510.jpg", "width": 1600}
 (NOBRIDGE) LOG  📁 Photo URI generated: file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy1841409346287072510.jpg
 (NOBRIDGE) LOG  Processing photo for ML Kit compatibility...
 (NOBRIDGE) LOG  Waiting for photo file to be fully written...
 (NOBRIDGE) LOG  Photo file verification: {"exists": true, "fileSize": 544692, "path": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy8718719164161510948.jpg"}
 (NOBRIDGE) LOG  🔍 === isDetecting STATE CHANGED ===
 (NOBRIDGE) LOG  🔍 New value: false
 (NOBRIDGE) LOG  🔍 Has interval: false
 (NOBRIDGE) LOG  🔍 Has timeout: false
 (NOBRIDGE) LOG  🔍 Camera keep-alive: false
 (NOBRIDGE) LOG  🔍 Timestamp: 2025-08-26T10:35:22.574Z
 (NOBRIDGE) LOG  🔍 === FACE DETECTION STATE CHANGED ===
 (NOBRIDGE) LOG  🔍 Face data: true
 (NOBRIDGE) LOG  🔍 Face detected: true
 (NOBRIDGE) LOG  🔍 Face quality: true
 (NOBRIDGE) LOG  🔍 Is detecting: false
 (NOBRIDGE) LOG  🔍 Has interval: false
 (NOBRIDGE) LOG  🔍 Camera keep-alive: false
 (NOBRIDGE) LOG  🔍 Timestamp: 2025-08-26T10:35:22.620Z
 (NOBRIDGE) LOG  👁️ Face data effect triggered: {"faceDataTimestamp": 1756204522317, "hasFaceData": true, "isLivenessActive": false}
 (NOBRIDGE) LOG  👁️ Not processing face data: {"reason": "Liveness not active"}
 (NOBRIDGE) LOG  Face detection state: {"faceData": true, "faceDetected": true, "faceQuality": true, "isDetecting": false, "verificationStep": "detecting"}
 (NOBRIDGE) LOG  Moving to liveness detection step - good quality face detected
 (NOBRIDGE) LOG  🛑 stopDetection called: {"hasInterval": false, "hasTimeout": false, "isDetecting": false, "stack": "    at anonymous (http://192.168.0.108:8081/node_modules/expo-router/entry.bundle//&platform=android&dev=true&hot=false&transform.engine=hermes&transform.bytecode=1&transform.routerRoot=app&unstable_transformProfile=hermes-stable:392412:25)
    at anonymous (http://192.168.0.108:8081/node_modules/expo-router/entry.bundle//&platform=android&dev=true&hot=false&transform.engine=hermes&transform.bytecode=1&transform.routerRoot=app&unstable_transformProfile=hermes-stable:390704:24)
    at commitHookEffectListMount (http://192.168.0.108:8081/node_modules/expo-router/entry.bundle//&platform=android&dev=true&hot=false&transform.engine=hermes&transform.bytecode=1&transform.routerRoot=app&unstable_transformProfile=hermes-stable:31461:35)", "timestamp": "2025-08-26T10:35:22.651Z"}
 (NOBRIDGE) LOG  🛑 Face detection stopped - isDetecting set to false
 (NOBRIDGE) LOG  Photo file verified successfully: {"path": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy8718719164161510948.jpg", "size": 544692, "uri": "file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy8718719164161510948.jpg"}
 (NOBRIDGE) LOG  Applying ML Kit photo processing...
 (NOBRIDGE) LOG  🔍 === CAMERA isActive CALCULATION ===
 (NOBRIDGE) LOG  🔍 visible: true
 (NOBRIDGE) LOG  🔍 verificationStep: liveness
 (NOBRIDGE) LOG  🔍 isDetecting: false
 (NOBRIDGE) LOG  🔍 cameraKeepAlive: false
 (NOBRIDGE) LOG  🔍 Final isActive result: true
 (NOBRIDGE) LOG  🔍 Camera should be active - checking persistence state...
 (NOBRIDGE) LOG  Photo file read successfully, content length: 726256
 (NOBRIDGE) LOG  ✅ Photo has valid image format header
 (NOBRIDGE) LOG  Additional delay for file system sync...
 (NOBRIDGE) LOG  ✅ Photo captured successfully: {"height": 1200, "path": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy8649300657214020909.jpg", "width": 1600}
 (NOBRIDGE) LOG  📁 Photo URI generated: file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy8649300657214020909.jpg
 (NOBRIDGE) LOG  Processing photo for ML Kit compatibility...
 (NOBRIDGE) LOG  Waiting for photo file to be fully written...
 (NOBRIDGE) LOG  ✅ ML Kit detection completed successfully: {"faceCount": 1, "faces": [{"contours": [Array], "frame": [Object], "headEulerAngleX": -7.377602577209473, "headEulerAngleY": 1.6987768411636353, "headEulerAngleZ": -4.0857253074646, "landmarks": [Array], "leftEyeOpenProbability": 0.9938164353370667, "rightEyeOpenProbability": 0.998312771320343, "smilingProbability": 0.004994028247892857, "trackingID": 3}], "rawResult": {"faces": [[Object]], "imagePath": "file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy491960997525761293.jpg"}, "success": true}
 (NOBRIDGE) LOG  🎉 SUCCESS: Face detection completed with 1 face(s)
 (NOBRIDGE) LOG  🎯 Processing detected faces...
 (NOBRIDGE) LOG  👤 Detected face details: {"headAngles": {"x": -7.377602577209473, "y": 1.6987768411636353, "z": -4.0857253074646}, "leftEyeOpen": 0.9938164353370667, "rightEyeOpen": 0.998312771320343, "smiling": 0.004994028247892857, "trackingID": 3}
 (NOBRIDGE) LOG  🔄 Converted face data: {"bounds": {"height": 707, "width": 707, "x": 246, "y": 435}, "faceId": "3", "leftEyeOpenProbability": 0.9938164353370667, "rightEyeOpenProbability": 0.998312771320343, "rollAngle": -4.0857253074646, "timestamp": 1756204522962, "yawAngle": 1.6987768411636353}
 (NOBRIDGE) LOG  Face quality calculation: {"bounds": {"height": 707, "width": 707, "x": 246, "y": 435}, "faceArea": 499849, "faceRatio": 0.26033802083333335, "maxFaceSize": 0.6, "minFaceSize": 0.05, "screenArea": 1920000}
 (NOBRIDGE) LOG  Quality scores: {"angleQuality": 0.9319045782089234, "lightingQuality": 1, "overall": 0.8588953317960104, "sizeQuality": 0.6983098958333334, "threshold": 0.4}
 (NOBRIDGE) LOG  ✅ Face detection state updated successfully
 (NOBRIDGE) LOG  📊 Face quality score: 0.8588953317960104
 (NOBRIDGE) LOG  🎉 Face detection completed successfully - stopping all timers
 (NOBRIDGE) LOG  ⏱️ Face detection process completed in 2806.16ms
 (NOBRIDGE) LOG  === MAIN FACE DETECTION PROCESS COMPLETED ===
 (NOBRIDGE) LOG  👁️ Starting liveness detection...
 (NOBRIDGE) LOG  👁️ Liveness detection started successfully
 (NOBRIDGE) LOG  Photo file verification: {"exists": true, "fileSize": 554955, "path": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy4649548117261440552.jpg"}
 (NOBRIDGE) LOG  🔍 === CAMERA KEEP-ALIVE EFFECT TRIGGERED ===
 (NOBRIDGE) LOG  🔍 Verification step changed to: liveness
 (NOBRIDGE) LOG  🔍 Current camera keep-alive state: false
 (NOBRIDGE) LOG  🔒 Enabling camera keep-alive to prevent native view detachment
 (NOBRIDGE) LOG  🔒 === ENABLING CAMERA KEEP-ALIVE ===
 (NOBRIDGE) LOG  🔒 Previous state: false
 (NOBRIDGE) LOG  🔒 New state: true
 (NOBRIDGE) LOG  🔄 Critical transition detected - stabilizing camera component
 (NOBRIDGE) LOG  🔒 Monitoring camera persistence during liveness/capturing...
 (NOBRIDGE) LOG  🔍 Camera keep-alive effect completed
 (NOBRIDGE) LOG  ⏰ Starting countdown timer: 5
 (NOBRIDGE) LOG  Face detection state: {"faceData": true, "faceDetected": true, "faceQuality": true, "isDetecting": false, "verificationStep": "liveness"}
 (NOBRIDGE) LOG  ⚠️ Liveness timeout but face detected - proceeding to capture (ultra-forgiving)
 (NOBRIDGE) LOG  🔒 Keeping camera active during transition to prevent native view detachment
 (NOBRIDGE) LOG  🔍 Stabilizing camera for final capture...
 (NOBRIDGE) LOG  Photo file verified successfully: {"path": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy4649548117261440552.jpg", "size": 554955, "uri": "file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy4649548117261440552.jpg"}
 (NOBRIDGE) LOG  Applying ML Kit photo processing...
 (NOBRIDGE) LOG  Photo file read successfully, content length: 739940
 (NOBRIDGE) LOG  ✅ Photo has valid image format header
 (NOBRIDGE) LOG  Additional delay for file system sync...
 (NOBRIDGE) LOG  Photo file verification: {"exists": true, "fileSize": 558179, "path": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy1841409346287072510.jpg"}
 (NOBRIDGE) LOG  🔍 === CAMERA isActive CALCULATION ===
 (NOBRIDGE) LOG  🔍 visible: true
 (NOBRIDGE) LOG  🔍 verificationStep: capturing
 (NOBRIDGE) LOG  🔍 isDetecting: false
 (NOBRIDGE) LOG  🔍 cameraKeepAlive: true
 (NOBRIDGE) LOG  🔍 Final isActive result: true
 (NOBRIDGE) LOG  🔍 Camera should be active - checking persistence state...
 (NOBRIDGE) LOG  Photo file verified successfully: {"path": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy1841409346287072510.jpg", "size": 558179, "uri": "file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy1841409346287072510.jpg"}
 (NOBRIDGE) LOG  Applying ML Kit photo processing...
 (NOBRIDGE) LOG  🔍 === FACE DETECTION STATE CHANGED ===
 (NOBRIDGE) LOG  🔍 Face data: true
 (NOBRIDGE) LOG  🔍 Face detected: true
 (NOBRIDGE) LOG  🔍 Face quality: true
 (NOBRIDGE) LOG  🔍 Is detecting: false
 (NOBRIDGE) LOG  🔍 Has interval: false
 (NOBRIDGE) LOG  🔍 Camera keep-alive: true
 (NOBRIDGE) LOG  🔍 Timestamp: 2025-08-26T10:35:23.300Z
 (NOBRIDGE) LOG  👁️ Face data effect triggered: {"faceDataTimestamp": 1756204522962, "hasFaceData": true, "isLivenessActive": true}
 (NOBRIDGE) LOG  👁️ Processing face data for liveness detection
 (NOBRIDGE) LOG  👁️ processFaceData called: {"faceDataDetails": {"leftEye": 0.9938164353370667, "rightEye": 0.998312771320343, "timestamp": 1756204522962}, "hasFaceData": true, "isLivenessActive": true}
 (NOBRIDGE) LOG  👁️ Processing liveness data: {"average": "0.996", "eyeClosedThreshold": 0.98, "eyeOpenThreshold": 0.995, "historyLength": 1, "leftEye": "0.994", "rightEye": "0.998"}
 (NOBRIDGE) LOG  👁️ Analyzing blink pattern in history: {"historyLength": 1, "minRequired": 5}
 (NOBRIDGE) LOG  👁️ Liveness score calculation: {"blinkCount": 0, "blinkScore": 0, "historyLength": 1, "minRequired": 0.1, "movementScore": "0.000", "overallScore": "0.020", "timeScore": "0.100"}
 (NOBRIDGE) LOG  🔍 === CAMERA KEEP-ALIVE EFFECT TRIGGERED ===
 (NOBRIDGE) LOG  🔍 Verification step changed to: capturing
 (NOBRIDGE) LOG  🔍 Current camera keep-alive state: true
 (NOBRIDGE) LOG  🔍 Camera keep-alive effect completed
 (NOBRIDGE) LOG  Face detection state: {"faceData": true, "faceDetected": true, "faceQuality": true, "isDetecting": false, "verificationStep": "capturing"}
 (NOBRIDGE) LOG  Photo file read successfully, content length: 744240
 (NOBRIDGE) LOG  ✅ Photo has valid image format header
 (NOBRIDGE) LOG  Additional delay for file system sync...
 (NOBRIDGE) LOG  🔍 === CAMERA isActive CALCULATION ===
 (NOBRIDGE) LOG  🔍 visible: true
 (NOBRIDGE) LOG  🔍 verificationStep: capturing
 (NOBRIDGE) LOG  🔍 isDetecting: false
 (NOBRIDGE) LOG  🔍 cameraKeepAlive: true
 (NOBRIDGE) LOG  🔍 Final isActive result: true
 (NOBRIDGE) LOG  🔍 Camera should be active - checking persistence state...
 (NOBRIDGE) LOG  🤖 Sending photo to ML Kit for face detection...
 (NOBRIDGE) LOG  🔍 ML Kit detector state before detection: {"availableMethods": ["status", "error", "options"], "detectorType": "object", "isInitialized": true, "photoPath": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy8718719164161510948.jpg", "photoUri": "file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy8718719164161510948.jpg"}
 (NOBRIDGE) LOG  Camera onInitialized called
 (NOBRIDGE) LOG  Camera started - ensuring detection is running
 (NOBRIDGE) LOG  🔍 Proactively monitoring camera state...
 (NOBRIDGE) LOG  🔍 === CAMERA STATE MONITORING ===
 (NOBRIDGE) LOG  🔍 Camera ref exists: true
 (NOBRIDGE) LOG  🔍 Persistent ref exists: true
 (NOBRIDGE) LOG  🔍 Camera ref state: valid
 (NOBRIDGE) LOG  🔍 Camera state monitoring: {"hasTakePhoto": true, "isActive": true}
 (NOBRIDGE) LOG  ✅ Camera state is healthy - proceeding with capture
 (NOBRIDGE) LOG  🤖 Sending photo to ML Kit for face detection...
 (NOBRIDGE) LOG  🔍 ML Kit detector state before detection: {"availableMethods": ["status", "error", "options"], "detectorType": "object", "isInitialized": true, "photoPath": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy4649548117261440552.jpg", "photoUri": "file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy4649548117261440552.jpg"}
 (NOBRIDGE) LOG  Photo file verification: {"exists": true, "fileSize": 565145, "path": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy8649300657214020909.jpg"}
 (NOBRIDGE) LOG  ✅ Camera component stabilized for critical transition
 (NOBRIDGE) LOG  Photo file verified successfully: {"path": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy8649300657214020909.jpg", "size": 565145, "uri": "file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy8649300657214020909.jpg"}
 (NOBRIDGE) LOG  Applying ML Kit photo processing...
 (NOBRIDGE) LOG  ✅ ML Kit detection completed successfully: {"faceCount": 1, "faces": [{"contours": [Array], "frame": [Object], "headEulerAngleX": -7.36676549911499, "headEulerAngleY": 1.6189547777175903, "headEulerAngleZ": -3.4023287296295166, "landmarks": [Array], "leftEyeOpenProbability": 0.9942908883094788, "rightEyeOpenProbability": 0.997727632522583, "smilingProbability": 0.0058485232293605804, "trackingID": 3}], "rawResult": {"faces": [[Object]], "imagePath": "file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy4268886858920834166.jpg"}, "success": true}
 (NOBRIDGE) LOG  🎉 SUCCESS: Face detection completed with 1 face(s)
 (NOBRIDGE) LOG  🎯 Processing detected faces...
 (NOBRIDGE) LOG  👤 Detected face details: {"headAngles": {"x": -7.36676549911499, "y": 1.6189547777175903, "z": -3.4023287296295166}, "leftEyeOpen": 0.9942908883094788, "rightEyeOpen": 0.997727632522583, "smiling": 0.0058485232293605804, "trackingID": 3}
 (NOBRIDGE) LOG  🔄 Converted face data: {"bounds": {"height": 694, "width": 694, "x": 249, "y": 427}, "faceId": "3", "leftEyeOpenProbability": 0.9942908883094788, "rightEyeOpenProbability": 0.997727632522583, "rollAngle": -3.4023287296295166, "timestamp": 1756204523553, "yawAngle": 1.6189547777175903}
 (NOBRIDGE) LOG  Face quality calculation: {"bounds": {"height": 694, "width": 694, "x": 249, "y": 427}, "faceArea": 481636, "faceRatio": 0.2508520833333333, "maxFaceSize": 0.6, "minFaceSize": 0.05, "screenArea": 1920000}
 (NOBRIDGE) LOG  Quality scores: {"angleQuality": 0.9432945211728414, "lightingQuality": 1, "overall": 0.881284189685186, "sizeQuality": 0.7457395833333336, "threshold": 0.4}
 (NOBRIDGE) LOG  ✅ Face detection state updated successfully
 (NOBRIDGE) LOG  📊 Face quality score: 0.881284189685186
 (NOBRIDGE) LOG  🎉 Face detection completed successfully - stopping all timers
 (NOBRIDGE) LOG  ⏱️ Face detection process completed in 3074.77ms
 (NOBRIDGE) LOG  === MAIN FACE DETECTION PROCESS COMPLETED ===
 (NOBRIDGE) LOG  Photo file read successfully, content length: 753528
 (NOBRIDGE) LOG  ✅ Photo has valid image format header
 (NOBRIDGE) LOG  Additional delay for file system sync...
 (NOBRIDGE) LOG  🔍 === CAMERA isActive CALCULATION ===
 (NOBRIDGE) LOG  🔍 visible: true
 (NOBRIDGE) LOG  🔍 verificationStep: capturing
 (NOBRIDGE) LOG  🔍 isDetecting: false
 (NOBRIDGE) LOG  🔍 cameraKeepAlive: true
 (NOBRIDGE) LOG  🔍 Final isActive result: true
 (NOBRIDGE) LOG  🔍 Camera should be active - checking persistence state...
 (NOBRIDGE) LOG  🤖 Sending photo to ML Kit for face detection...
 (NOBRIDGE) LOG  🔍 ML Kit detector state before detection: {"availableMethods": ["status", "error", "options"], "detectorType": "object", "isInitialized": true, "photoPath": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy1841409346287072510.jpg", "photoUri": "file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy1841409346287072510.jpg"}
 (NOBRIDGE) LOG  Camera initialized - connecting reference to face detection hook
 (NOBRIDGE) LOG  🔍 === SETTING CAMERA REFERENCE ===
 (NOBRIDGE) LOG  🔍 Camera component exists: true
 (NOBRIDGE) LOG  🔍 Component type: object
 (NOBRIDGE) LOG  🔍 Has component: true
 (NOBRIDGE) LOG  🔍 Component methods: ["props", "context", "refs", "updater", "displayName", "isNativeViewMounted", "lastUIRotation", "rotationHelper", "onViewReady", "onAverageFpsChanged", "onInitialized", "onStarted", "onStopped", "onPreviewStarted", "onPreviewStopped", "onShutter", "onOutputOrientationChanged", "onPreviewOrientationChanged", "onError", "onCodeScanned", "ref", "lastFrameProcessor", "state", "_reactInternals", "_reactInternalInstance"]
 (NOBRIDGE) LOG  🔍 Has takePhoto method: true
 (NOBRIDGE) LOG  🔍 Camera reference stored in persistent ref
 (NOBRIDGE) LOG  ✅ Camera reference set successfully: {"cameraRefType": "object", "hasCameraRef": true, "hasTakePhotoMethod": true, "persistentRefState": "valid"}
 (NOBRIDGE) LOG  🔍 === COMPREHENSIVE CAMERA STATE VALIDATION ===
 (NOBRIDGE) LOG  🔍 Camera ref exists: true
 (NOBRIDGE) LOG  🔍 Camera ref type: object
 (NOBRIDGE) LOG  🔍 Camera methods available: ["props", "context", "refs", "updater", "displayName", "isNativeViewMounted", "lastUIRotation", "rotationHelper", "onViewReady", "onAverageFpsChanged", "onInitialized", "onStarted", "onStopped", "onPreviewStarted", "onPreviewStopped", "onShutter", "onOutputOrientationChanged", "onPreviewOrientationChanged", "onError", "onCodeScanned", "ref", "lastFrameProcessor", "state", "_reactInternals", "_reactInternalInstance"]
 (NOBRIDGE) LOG  🔍 Has takePhoto method: true
 (NOBRIDGE) LOG  🔍 Camera props: {"audio": false, "device": {"formats": [[Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object]], "hardwareLevel": "full", "hasFlash": false, "hasTorch": false, "id": "1", "isMultiCam": false, "maxExposure": 24, "maxZoom": 10, "minExposure": -24, "minFocusDistance": 0, "minZoom": 1, "name": "1 (FRONT) androidx.camera.camera2", "neutralZoom": 1, "physicalDevices": ["wide-angle-camera"], "position": "front", "sensorOrientation": "landscape-right", "supportsFocus": true, "supportsLowLightBoost": false, "supportsRawCapture": false}, "frameProcessor": {"frameProcessor": [Function withFrameRefCountingTs1], "type": "readonly"}, "isActive": true, "onError": [Function onError], "onInitialized": [Function onInitialized], "onStarted": [Function onStarted], "photo": true, "style": {"height": "100%", "width": "100%"}, "video": false}
 (NOBRIDGE) LOG  🔍 Camera state: {"averageFpsSamples": [], "isRecordingWithFlash": false}
 (NOBRIDGE) LOG  🔍 Camera display name: Camera
 (NOBRIDGE) LOG  ✅ Camera validation passed - proceeding with capture
 (NOBRIDGE) LOG  capturePhoto called with: {"cameraRefCurrent": {"_reactInternalInstance": {}, "_reactInternals": {"_debugHookTypes": null, "_debugInfo": null, "_debugNeedsRemount": false, "_debugOwner": [FiberNode], "actualDuration": 0.2614060044288635, "actualStartTime": 140565685.722887, "alternate": [FiberNode], "child": [FiberNode], "childLanes": 0, "deletions": null, "dependencies": null, "elementType": [Function Camera], "flags": 2097157, "index": 0, "key": "stable", "lanes": 0, "memoizedProps": [Object], "memoizedState": [Object], "mode": 3, "pendingProps": [Object], "ref": [Object], "refCleanup": null, "return": [FiberNode], "selfBaseDuration": 0.19838500022888184, "sibling": [FiberNode], "stateNode": [Circular], "subtreeFlags": 2097152, "tag": 1, "treeBaseDuration": 0.21421799063682556, "type": [Function Camera], "updateQueue": [Object]}, "context": {}, "displayName": "Camera", "isNativeViewMounted": true, "lastFrameProcessor": [Function withFrameRefCountingTs1], "lastUIRotation": 0, "onAverageFpsChanged": [Function bound onAverageFpsChanged], "onCodeScanned": [Function bound onCodeScanned], "onError": [Function bound onError], "onInitialized": [Function bound onInitialized], "onOutputOrientationChanged": [Function bound onOutputOrientationChanged], "onPreviewOrientationChanged": [Function bound onPreviewOrientationChanged], "onPreviewStarted": [Function bound onPreviewStarted], "onPreviewStopped": [Function bound onPreviewStopped], "onShutter": [Function bound onShutter], "onStarted": [Function bound onStarted], "onStopped": [Function bound onStopped], "onViewReady": [Function bound onViewReady], "props": {"audio": false, "device": [Object], "frameProcessor": [Object], "isActive": true, "onError": [Function onError], "onInitialized": [Function onInitialized], "onStarted": [Function onStarted], "photo": true, "style": [Object], "video": false}, "ref": {"current": [ReactFabricHostComponent]}, "refs": {}, "rotationHelper": {"outputOrientation": "portrait", "previewOrientation": "portrait"}, "state": {"averageFpsSamples": [Array], "isRecordingWithFlash": false}, "updater": {"enqueueForceUpdate": [Function enqueueForceUpdate], "enqueueReplaceState": [Function enqueueReplaceState], "enqueueSetState": [Function enqueueSetState], "isMounted": [Function isMounted]}}, "hasCameraRef": true, "hasTakePhotoMethod": true, "isInitialized": true}
 (NOBRIDGE) LOG  Capturing photo with validated face...
 (NOBRIDGE) LOG  🔍 Validating camera state before final capture...
 (NOBRIDGE) LOG  🤖 Sending photo to ML Kit for face detection...
 (NOBRIDGE) LOG  🔍 ML Kit detector state before detection: {"availableMethods": ["status", "error", "options"], "detectorType": "object", "isInitialized": true, "photoPath": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy8649300657214020909.jpg", "photoUri": "file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy8649300657214020909.jpg"}
 (NOBRIDGE) LOG  🔍 === CAMERA STATE MONITORING ===
 (NOBRIDGE) LOG  🔍 Camera ref exists: true
 (NOBRIDGE) LOG  🔍 Persistent ref exists: true
 (NOBRIDGE) LOG  🔍 Camera ref state: valid
 (NOBRIDGE) LOG  🔍 Camera state monitoring: {"hasTakePhoto": true, "isActive": true}
 (NOBRIDGE) LOG  🔒 Camera health check result: true
 (NOBRIDGE) LOG  🔍 === FACE DETECTION STATE CHANGED ===
 (NOBRIDGE) LOG  🔍 Face data: true
 (NOBRIDGE) LOG  🔍 Face detected: true
 (NOBRIDGE) LOG  🔍 Face quality: true
 (NOBRIDGE) LOG  🔍 Is detecting: false
 (NOBRIDGE) LOG  🔍 Has interval: false
 (NOBRIDGE) LOG  🔍 Camera keep-alive: true
 (NOBRIDGE) LOG  🔍 Timestamp: 2025-08-26T10:35:24.332Z
 (NOBRIDGE) LOG  👁️ Face data effect triggered: {"faceDataTimestamp": 1756204523553, "hasFaceData": true, "isLivenessActive": true}
 (NOBRIDGE) LOG  👁️ Processing face data for liveness detection
 (NOBRIDGE) LOG  👁️ processFaceData called: {"faceDataDetails": {"leftEye": 0.9942908883094788, "rightEye": 0.997727632522583, "timestamp": 1756204523553}, "hasFaceData": true, "isLivenessActive": true}
 (NOBRIDGE) LOG  👁️ Processing liveness data: {"average": "0.996", "eyeClosedThreshold": 0.98, "eyeOpenThreshold": 0.995, "historyLength": 2, "leftEye": "0.994", "rightEye": "0.998"}
 (NOBRIDGE) LOG  👁️ Analyzing blink pattern in history: {"historyLength": 2, "minRequired": 5}
 (NOBRIDGE) LOG  👁️ Liveness score calculation: {"blinkCount": 0, "blinkScore": 0, "historyLength": 2, "minRequired": 0.1, "movementScore": "0.000", "overallScore": "0.040", "timeScore": "0.200"}
 (NOBRIDGE) LOG  Face detection state: {"faceData": true, "faceDetected": true, "faceQuality": true, "isDetecting": false, "verificationStep": "capturing"}
 (NOBRIDGE) LOG  ✅ ML Kit detection completed successfully: {"faceCount": 1, "faces": [{"contours": [Array], "frame": [Object], "headEulerAngleX": -5.5740885734558105, "headEulerAngleY": 1.5429059267044067, "headEulerAngleZ": -3.2311277389526367, "landmarks": [Array], "leftEyeOpenProbability": 0.9952254295349121, "rightEyeOpenProbability": 0.9988862872123718, "smilingProbability": 0.004994028247892857, "trackingID": 3}], "rawResult": {"faces": [[Object]], "imagePath": "file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy4017695950922307274.jpg"}, "success": true}
 (NOBRIDGE) LOG  🎉 SUCCESS: Face detection completed with 1 face(s)
 (NOBRIDGE) LOG  🎯 Processing detected faces...
 (NOBRIDGE) LOG  👤 Detected face details: {"headAngles": {"x": -5.5740885734558105, "y": 1.5429059267044067, "z": -3.2311277389526367}, "leftEyeOpen": 0.9952254295349121, "rightEyeOpen": 0.9988862872123718, "smiling": 0.004994028247892857, "trackingID": 3}
 (NOBRIDGE) LOG  🔄 Converted face data: {"bounds": {"height": 690, "width": 690, "x": 253, "y": 436}, "faceId": "3", "leftEyeOpenProbability": 0.9952254295349121, "rightEyeOpenProbability": 0.9988862872123718, "rollAngle": -3.2311277389526367, "timestamp": 1756204524367, "yawAngle": 1.5429059267044067}
 (NOBRIDGE) LOG  Face quality calculation: {"bounds": {"height": 690, "width": 690, "x": 253, "y": 436}, "faceArea": 476100, "faceRatio": 0.24796875, "maxFaceSize": 0.6, "minFaceSize": 0.05, "screenArea": 1920000}
 (NOBRIDGE) LOG  Quality scores: {"angleQuality": 0.946147871017456, "lightingQuality": 1, "overall": 0.8879068613052368, "sizeQuality": 0.7601562500000001, "threshold": 0.4}
 (NOBRIDGE) LOG  ✅ Face detection state updated successfully
 (NOBRIDGE) LOG  📊 Face quality score: 0.8879068613052368
 (NOBRIDGE) LOG  🎉 Face detection completed successfully - stopping all timers
 (NOBRIDGE) LOG  ⏱️ Face detection process completed in 3569.30ms
 (NOBRIDGE) LOG  === MAIN FACE DETECTION PROCESS COMPLETED ===
 (NOBRIDGE) LOG  🔍 === CAMERA isActive CALCULATION ===
 (NOBRIDGE) LOG  🔍 visible: true
 (NOBRIDGE) LOG  🔍 verificationStep: capturing
 (NOBRIDGE) LOG  🔍 isDetecting: false
 (NOBRIDGE) LOG  🔍 cameraKeepAlive: true
 (NOBRIDGE) LOG  🔍 Final isActive result: true
 (NOBRIDGE) LOG  🔍 Camera should be active - checking persistence state...
 (NOBRIDGE) LOG  🔍 === FACE DETECTION STATE CHANGED ===
 (NOBRIDGE) LOG  🔍 Face data: true
 (NOBRIDGE) LOG  🔍 Face detected: true
 (NOBRIDGE) LOG  🔍 Face quality: true
 (NOBRIDGE) LOG  🔍 Is detecting: false
 (NOBRIDGE) LOG  🔍 Has interval: false
 (NOBRIDGE) LOG  🔍 Camera keep-alive: true
 (NOBRIDGE) LOG  🔍 Timestamp: 2025-08-26T10:35:24.485Z
 (NOBRIDGE) LOG  👁️ Face data effect triggered: {"faceDataTimestamp": 1756204524367, "hasFaceData": true, "isLivenessActive": true}
 (NOBRIDGE) LOG  👁️ Processing face data for liveness detection
 (NOBRIDGE) LOG  👁️ processFaceData called: {"faceDataDetails": {"leftEye": 0.9952254295349121, "rightEye": 0.9988862872123718, "timestamp": 1756204524367}, "hasFaceData": true, "isLivenessActive": true}
 (NOBRIDGE) LOG  👁️ Processing liveness data: {"average": "0.997", "eyeClosedThreshold": 0.98, "eyeOpenThreshold": 0.995, "historyLength": 3, "leftEye": "0.995", "rightEye": "0.999"}
 (NOBRIDGE) LOG  👁️ Analyzing blink pattern in history: {"historyLength": 3, "minRequired": 5}
 (NOBRIDGE) LOG  👁️ Liveness score calculation: {"blinkCount": 0, "blinkScore": 0, "historyLength": 3, "minRequired": 0.1, "movementScore": "0.000", "overallScore": "0.060", "timeScore": "0.300"}
 (NOBRIDGE) LOG  Face detection state: {"faceData": true, "faceDetected": true, "faceQuality": true, "isDetecting": false, "verificationStep": "capturing"}
 (NOBRIDGE) LOG  🔍 === CAMERA isActive CALCULATION ===
 (NOBRIDGE) LOG  🔍 visible: true
 (NOBRIDGE) LOG  🔍 verificationStep: capturing
 (NOBRIDGE) LOG  🔍 isDetecting: false
 (NOBRIDGE) LOG  🔍 cameraKeepAlive: true
 (NOBRIDGE) LOG  🔍 Final isActive result: true
 (NOBRIDGE) LOG  🔍 Camera should be active - checking persistence state...
 (NOBRIDGE) LOG  ✅ Camera validation successful on attempt 1
 (NOBRIDGE) LOG  📸 Final camera state validation before photo capture...
 (NOBRIDGE) LOG  ✅ ML Kit detection completed successfully: {"faceCount": 1, "faces": [{"contours": [Array], "frame": [Object], "headEulerAngleX": -6.236537933349609, "headEulerAngleY": 1.9328564405441284, "headEulerAngleZ": -3.5144598484039307, "landmarks": [Array], "leftEyeOpenProbability": 0.9956856369972229, "rightEyeOpenProbability": 0.9974306225776672, "smilingProbability": 0.004573858808726072, "trackingID": 3}], "rawResult": {"faces": [[Object]], "imagePath": "file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy8718719164161510948.jpg"}, "success": true}
 (NOBRIDGE) LOG  🎉 SUCCESS: Face detection completed with 1 face(s)
 (NOBRIDGE) LOG  🎯 Processing detected faces...
 (NOBRIDGE) LOG  👤 Detected face details: {"headAngles": {"x": -6.236537933349609, "y": 1.9328564405441284, "z": -3.5144598484039307}, "leftEyeOpen": 0.9956856369972229, "rightEyeOpen": 0.9974306225776672, "smiling": 0.004573858808726072, "trackingID": 3}
 (NOBRIDGE) LOG  🔄 Converted face data: {"bounds": {"height": 695, "width": 695, "x": 251, "y": 440}, "faceId": "3", "leftEyeOpenProbability": 0.9956856369972229, "rightEyeOpenProbability": 0.9974306225776672, "rollAngle": -3.5144598484039307, "timestamp": 1756204524883, "yawAngle": 1.9328564405441284}
 (NOBRIDGE) LOG  Face quality calculation: {"bounds": {"height": 695, "width": 695, "x": 251, "y": 440}, "faceArea": 483025, "faceRatio": 0.25157552083333334, "maxFaceSize": 0.6, "minFaceSize": 0.05, "screenArea": 1920000}
 (NOBRIDGE) LOG  Quality scores: {"angleQuality": 0.9414256691932679, "lightingQuality": 1, "overall": 0.8792766590913137, "sizeQuality": 0.7421223958333334, "threshold": 0.4}
 (NOBRIDGE) LOG  ✅ Face detection state updated successfully
 (NOBRIDGE) LOG  📊 Face quality score: 0.8792766590913137
 (NOBRIDGE) LOG  🎉 Face detection completed successfully - stopping all timers
 (NOBRIDGE) LOG  ⏱️ Face detection process completed in 3755.49ms
 (NOBRIDGE) LOG  === MAIN FACE DETECTION PROCESS COMPLETED ===
 (NOBRIDGE) LOG  🔍 === CAMERA isActive CALCULATION ===
 (NOBRIDGE) LOG  🔍 visible: true
 (NOBRIDGE) LOG  🔍 verificationStep: capturing
 (NOBRIDGE) LOG  🔍 isDetecting: false
 (NOBRIDGE) LOG  🔍 cameraKeepAlive: true
 (NOBRIDGE) LOG  🔍 Final isActive result: true
 (NOBRIDGE) LOG  🔍 Camera should be active - checking persistence state...
 (NOBRIDGE) LOG  🔍 === FACE DETECTION STATE CHANGED ===
 (NOBRIDGE) LOG  🔍 Face data: true
 (NOBRIDGE) LOG  🔍 Face detected: true
 (NOBRIDGE) LOG  🔍 Face quality: true
 (NOBRIDGE) LOG  🔍 Is detecting: false
 (NOBRIDGE) LOG  🔍 Has interval: false
 (NOBRIDGE) LOG  🔍 Camera keep-alive: true
 (NOBRIDGE) LOG  🔍 Timestamp: 2025-08-26T10:35:24.995Z
 (NOBRIDGE) LOG  👁️ Face data effect triggered: {"faceDataTimestamp": 1756204524883, "hasFaceData": true, "isLivenessActive": true}
 (NOBRIDGE) LOG  👁️ Processing face data for liveness detection
 (NOBRIDGE) LOG  👁️ processFaceData called: {"faceDataDetails": {"leftEye": 0.9956856369972229, "rightEye": 0.9974306225776672, "timestamp": 1756204524883}, "hasFaceData": true, "isLivenessActive": true}
 (NOBRIDGE) LOG  👁️ Processing liveness data: {"average": "0.997", "eyeClosedThreshold": 0.98, "eyeOpenThreshold": 0.995, "historyLength": 4, "leftEye": "0.996", "rightEye": "0.997"}
 (NOBRIDGE) LOG  👁️ Analyzing blink pattern in history: {"historyLength": 4, "minRequired": 5}
 (NOBRIDGE) LOG  👁️ Liveness score calculation: {"blinkCount": 0, "blinkScore": 0, "historyLength": 4, "minRequired": 0.1, "movementScore": "0.000", "overallScore": "0.080", "timeScore": "0.400"}
 (NOBRIDGE) LOG  Face detection state: {"faceData": true, "faceDetected": true, "faceQuality": true, "isDetecting": false, "verificationStep": "capturing"}
 (NOBRIDGE) LOG  🔍 === CAMERA isActive CALCULATION ===
 (NOBRIDGE) LOG  🔍 visible: true
 (NOBRIDGE) LOG  🔍 verificationStep: capturing
 (NOBRIDGE) LOG  🔍 isDetecting: false
 (NOBRIDGE) LOG  🔍 cameraKeepAlive: true
 (NOBRIDGE) LOG  🔍 Final isActive result: true
 (NOBRIDGE) LOG  🔍 Camera should be active - checking persistence state...
 (NOBRIDGE) LOG  ✅ Photo capture successful: {"height": 1200, "isMirrored": true, "isRawPhoto": false, "orientation": "portrait", "path": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy4671468727262394651.jpg", "width": 1600}
 (NOBRIDGE) LOG  ✅ ML Kit detection completed successfully: {"faceCount": 1, "faces": [{"contours": [Array], "frame": [Object], "headEulerAngleX": -6.204826354980469, "headEulerAngleY": 1.078517198562622, "headEulerAngleZ": -3.1355018615722656, "landmarks": [Array], "leftEyeOpenProbability": 0.9947605133056641, "rightEyeOpenProbability": 0.997727632522583, "smilingProbability": 0.004573858808726072, "trackingID": 3}], "rawResult": {"faces": [[Object]], "imagePath": "file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy4649548117261440552.jpg"}, "success": true}
 (NOBRIDGE) LOG  🎉 SUCCESS: Face detection completed with 1 face(s)
 (NOBRIDGE) LOG  🎯 Processing detected faces...
 (NOBRIDGE) LOG  👤 Detected face details: {"headAngles": {"x": -6.204826354980469, "y": 1.078517198562622, "z": -3.1355018615722656}, "leftEyeOpen": 0.9947605133056641, "rightEyeOpen": 0.997727632522583, "smiling": 0.004573858808726072, "trackingID": 3}
 (NOBRIDGE) LOG  🔄 Converted face data: {"bounds": {"height": 695, "width": 695, "x": 251, "y": 439}, "faceId": "3", "leftEyeOpenProbability": 0.9947605133056641, "rightEyeOpenProbability": 0.997727632522583, "rollAngle": -3.1355018615722656, "timestamp": 1756204525377, "yawAngle": 1.078517198562622}
 (NOBRIDGE) LOG  Face quality calculation: {"bounds": {"height": 695, "width": 695, "x": 251, "y": 439}, "faceArea": 483025, "faceRatio": 0.25157552083333334, "maxFaceSize": 0.6, "minFaceSize": 0.05, "screenArea": 1920000}
 (NOBRIDGE) LOG  Quality scores: {"angleQuality": 0.9477416356404622, "lightingQuality": 1, "overall": 0.8811714490254721, "sizeQuality": 0.7421223958333334, "threshold": 0.4}
 (NOBRIDGE) LOG  ✅ Face detection state updated successfully
 (NOBRIDGE) LOG  📊 Face quality score: 0.8811714490254721
 (NOBRIDGE) LOG  🎉 Face detection completed successfully - stopping all timers
 (NOBRIDGE) LOG  ⏱️ Face detection process completed in 3948.97ms
 (NOBRIDGE) LOG  === MAIN FACE DETECTION PROCESS COMPLETED ===
 (NOBRIDGE) LOG  🔍 === CAMERA isActive CALCULATION ===
 (NOBRIDGE) LOG  🔍 visible: true
 (NOBRIDGE) LOG  🔍 verificationStep: capturing
 (NOBRIDGE) LOG  🔍 isDetecting: false
 (NOBRIDGE) LOG  🔍 cameraKeepAlive: true
 (NOBRIDGE) LOG  🔍 Final isActive result: true
 (NOBRIDGE) LOG  🔍 Camera should be active - checking persistence state...
 (NOBRIDGE) LOG  🔍 === FACE DETECTION STATE CHANGED ===
 (NOBRIDGE) LOG  🔍 Face data: true
 (NOBRIDGE) LOG  🔍 Face detected: true
 (NOBRIDGE) LOG  🔍 Face quality: true
 (NOBRIDGE) LOG  🔍 Is detecting: false
 (NOBRIDGE) LOG  🔍 Has interval: false
 (NOBRIDGE) LOG  🔍 Camera keep-alive: true
 (NOBRIDGE) LOG  🔍 Timestamp: 2025-08-26T10:35:25.488Z
 (NOBRIDGE) LOG  👁️ Face data effect triggered: {"faceDataTimestamp": 1756204525377, "hasFaceData": true, "isLivenessActive": true}
 (NOBRIDGE) LOG  👁️ Processing face data for liveness detection
 (NOBRIDGE) LOG  👁️ processFaceData called: {"faceDataDetails": {"leftEye": 0.9947605133056641, "rightEye": 0.997727632522583, "timestamp": 1756204525377}, "hasFaceData": true, "isLivenessActive": true}
 (NOBRIDGE) LOG  👁️ Processing liveness data: {"average": "0.996", "eyeClosedThreshold": 0.98, "eyeOpenThreshold": 0.995, "historyLength": 4, "leftEye": "0.995", "rightEye": "0.998"}
 (NOBRIDGE) LOG  👁️ Analyzing blink pattern in history: {"historyLength": 4, "minRequired": 5}
 (NOBRIDGE) LOG  👁️ Liveness score calculation: {"blinkCount": 0, "blinkScore": 0, "historyLength": 4, "minRequired": 0.1, "movementScore": "0.000", "overallScore": "0.080", "timeScore": "0.400"}
 (NOBRIDGE) LOG  Face detection state: {"faceData": true, "faceDetected": true, "faceQuality": true, "isDetecting": false, "verificationStep": "capturing"}
 (NOBRIDGE) LOG  🔍 === CAMERA isActive CALCULATION ===
 (NOBRIDGE) LOG  🔍 visible: true
 (NOBRIDGE) LOG  🔍 verificationStep: capturing
 (NOBRIDGE) LOG  🔍 isDetecting: false
 (NOBRIDGE) LOG  🔍 cameraKeepAlive: true
 (NOBRIDGE) LOG  🔍 Final isActive result: true
 (NOBRIDGE) LOG  🔍 Camera should be active - checking persistence state...
 (NOBRIDGE) LOG  ✅ ML Kit detection completed successfully: {"faceCount": 1, "faces": [{"contours": [Array], "frame": [Object], "headEulerAngleX": -6.3515143394470215, "headEulerAngleY": 0.9610761404037476, "headEulerAngleZ": -3.073417901992798, "landmarks": [Array], "leftEyeOpenProbability": 0.9942908883094788, "rightEyeOpenProbability": 0.998312771320343, "smilingProbability": 0.00541888689622283, "trackingID": 3}], "rawResult": {"faces": [[Object]], "imagePath": "file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy1841409346287072510.jpg"}, "success": true}
 (NOBRIDGE) LOG  🎉 SUCCESS: Face detection completed with 1 face(s)
 (NOBRIDGE) LOG  🎯 Processing detected faces...
 (NOBRIDGE) LOG  👤 Detected face details: {"headAngles": {"x": -6.3515143394470215, "y": 0.9610761404037476, "z": -3.073417901992798}, "leftEyeOpen": 0.9942908883094788, "rightEyeOpen": 0.998312771320343, "smiling": 0.00541888689622283, "trackingID": 3}
 (NOBRIDGE) LOG  🔄 Converted face data: {"bounds": {"height": 689, "width": 689, "x": 262, "y": 442}, "faceId": "3", "leftEyeOpenProbability": 0.9942908883094788, "rightEyeOpenProbability": 0.998312771320343, "rollAngle": -3.073417901992798, "timestamp": 1756204525888, "yawAngle": 0.9610761404037476}
 (NOBRIDGE) LOG  Face quality calculation: {"bounds": {"height": 689, "width": 689, "x": 262, "y": 442}, "faceArea": 474721, "faceRatio": 0.24725052083333332, "maxFaceSize": 0.6, "minFaceSize": 0.05, "screenArea": 1920000}
 (NOBRIDGE) LOG  Quality scores: {"angleQuality": 0.94877636830012, "lightingQuality": 1, "overall": 0.8901318688233695, "sizeQuality": 0.7637473958333334, "threshold": 0.4}
 (NOBRIDGE) LOG  ✅ Face detection state updated successfully
 (NOBRIDGE) LOG  📊 Face quality score: 0.8901318688233695
 (NOBRIDGE) LOG  🎉 Face detection completed successfully - stopping all timers
 (NOBRIDGE) LOG  ⏱️ Face detection process completed in 4147.26ms
 (NOBRIDGE) LOG  === MAIN FACE DETECTION PROCESS COMPLETED ===
 (NOBRIDGE) LOG  🔍 === CAMERA isActive CALCULATION ===
 (NOBRIDGE) LOG  🔍 visible: true
 (NOBRIDGE) LOG  🔍 verificationStep: capturing
 (NOBRIDGE) LOG  🔍 isDetecting: false
 (NOBRIDGE) LOG  🔍 cameraKeepAlive: true
 (NOBRIDGE) LOG  🔍 Final isActive result: true
 (NOBRIDGE) LOG  🔍 Camera should be active - checking persistence state...
 (NOBRIDGE) LOG  🔍 === FACE DETECTION STATE CHANGED ===
 (NOBRIDGE) LOG  🔍 Face data: true
 (NOBRIDGE) LOG  🔍 Face detected: true
 (NOBRIDGE) LOG  🔍 Face quality: true
 (NOBRIDGE) LOG  🔍 Is detecting: false
 (NOBRIDGE) LOG  🔍 Has interval: false
 (NOBRIDGE) LOG  🔍 Camera keep-alive: true
 (NOBRIDGE) LOG  🔍 Timestamp: 2025-08-26T10:35:25.994Z
 (NOBRIDGE) LOG  👁️ Face data effect triggered: {"faceDataTimestamp": 1756204525888, "hasFaceData": true, "isLivenessActive": true}
 (NOBRIDGE) LOG  👁️ Processing face data for liveness detection
 (NOBRIDGE) LOG  👁️ processFaceData called: {"faceDataDetails": {"leftEye": 0.9942908883094788, "rightEye": 0.998312771320343, "timestamp": 1756204525888}, "hasFaceData": true, "isLivenessActive": true}
 (NOBRIDGE) LOG  👁️ Processing liveness data: {"average": "0.996", "eyeClosedThreshold": 0.98, "eyeOpenThreshold": 0.995, "historyLength": 4, "leftEye": "0.994", "rightEye": "0.998"}
 (NOBRIDGE) LOG  👁️ Analyzing blink pattern in history: {"historyLength": 4, "minRequired": 5}
 (NOBRIDGE) LOG  👁️ Liveness score calculation: {"blinkCount": 0, "blinkScore": 0, "historyLength": 4, "minRequired": 0.1, "movementScore": "0.000", "overallScore": "0.080", "timeScore": "0.400"}
 (NOBRIDGE) LOG  Face detection state: {"faceData": true, "faceDetected": true, "faceQuality": true, "isDetecting": false, "verificationStep": "capturing"}
 (NOBRIDGE) LOG  🔍 === CAMERA isActive CALCULATION ===
 (NOBRIDGE) LOG  🔍 visible: true
 (NOBRIDGE) LOG  🔍 verificationStep: capturing
 (NOBRIDGE) LOG  🔍 isDetecting: false
 (NOBRIDGE) LOG  🔍 cameraKeepAlive: true
 (NOBRIDGE) LOG  🔍 Final isActive result: true
 (NOBRIDGE) LOG  🔍 Camera should be active - checking persistence state...
 (NOBRIDGE) LOG  ✅ ML Kit detection completed successfully: {"faceCount": 1, "faces": [{"contours": [Array], "frame": [Object], "headEulerAngleX": -5.761551380157471, "headEulerAngleY": 1.1431713104248047, "headEulerAngleZ": -3.3476674556732178, "landmarks": [Array], "leftEyeOpenProbability": 0.9965924024581909, "rightEyeOpenProbability": 0.998312771320343, "smilingProbability": 0.004573858808726072, "trackingID": 3}], "rawResult": {"faces": [[Object]], "imagePath": "file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy8649300657214020909.jpg"}, "success": true}
 (NOBRIDGE) LOG  🎉 SUCCESS: Face detection completed with 1 face(s)
 (NOBRIDGE) LOG  🎯 Processing detected faces...
 (NOBRIDGE) LOG  👤 Detected face details: {"headAngles": {"x": -5.761551380157471, "y": 1.1431713104248047, "z": -3.3476674556732178}, "leftEyeOpen": 0.9965924024581909, "rightEyeOpen": 0.998312771320343, "smiling": 0.004573858808726072, "trackingID": 3}
 (NOBRIDGE) LOG  🔄 Converted face data: {"bounds": {"height": 694, "width": 693, "x": 258, "y": 443}, "faceId": "3", "leftEyeOpenProbability": 0.9965924024581909, "rightEyeOpenProbability": 0.998312771320343, "rollAngle": -3.3476674556732178, "timestamp": 1756204526489, "yawAngle": 1.1431713104248047}
 (NOBRIDGE) LOG  Face quality calculation: {"bounds": {"height": 694, "width": 693, "x": 258, "y": 443}, "faceArea": 480942, "faceRatio": 0.250490625, "maxFaceSize": 0.6, "minFaceSize": 0.05, "screenArea": 1920000}
 (NOBRIDGE) LOG  Quality scores: {"angleQuality": 0.9442055424054464, "lightingQuality": 1, "overall": 0.8822804127216338, "sizeQuality": 0.7475468749999999, "threshold": 0.4}
 (NOBRIDGE) LOG  ✅ Face detection state updated successfully
 (NOBRIDGE) LOG  📊 Face quality score: 0.8822804127216338
 (NOBRIDGE) LOG  🎉 Face detection completed successfully - stopping all timers
 (NOBRIDGE) LOG  ⏱️ Face detection process completed in 4424.21ms
 (NOBRIDGE) LOG  === MAIN FACE DETECTION PROCESS COMPLETED ===
 (NOBRIDGE) LOG  🔍 === CAMERA isActive CALCULATION ===
 (NOBRIDGE) LOG  🔍 visible: true
 (NOBRIDGE) LOG  🔍 verificationStep: capturing
 (NOBRIDGE) LOG  🔍 isDetecting: false
 (NOBRIDGE) LOG  🔍 cameraKeepAlive: true
 (NOBRIDGE) LOG  🔍 Final isActive result: true
 (NOBRIDGE) LOG  🔍 Camera should be active - checking persistence state...
 (NOBRIDGE) LOG  🔍 === FACE DETECTION STATE CHANGED ===
 (NOBRIDGE) LOG  🔍 Face data: true
 (NOBRIDGE) LOG  🔍 Face detected: true
 (NOBRIDGE) LOG  🔍 Face quality: true
 (NOBRIDGE) LOG  🔍 Is detecting: false
 (NOBRIDGE) LOG  🔍 Has interval: false
 (NOBRIDGE) LOG  🔍 Camera keep-alive: true
 (NOBRIDGE) LOG  🔍 Timestamp: 2025-08-26T10:35:26.617Z
 (NOBRIDGE) LOG  👁️ Face data effect triggered: {"faceDataTimestamp": 1756204526489, "hasFaceData": true, "isLivenessActive": true}
 (NOBRIDGE) LOG  👁️ Processing face data for liveness detection
 (NOBRIDGE) LOG  👁️ processFaceData called: {"faceDataDetails": {"leftEye": 0.9965924024581909, "rightEye": 0.998312771320343, "timestamp": 1756204526489}, "hasFaceData": true, "isLivenessActive": true}
 (NOBRIDGE) LOG  👁️ Processing liveness data: {"average": "0.997", "eyeClosedThreshold": 0.98, "eyeOpenThreshold": 0.995, "historyLength": 4, "leftEye": "0.997", "rightEye": "0.998"}
 (NOBRIDGE) LOG  👁️ Analyzing blink pattern in history: {"historyLength": 4, "minRequired": 5}
 (NOBRIDGE) LOG  👁️ Liveness score calculation: {"blinkCount": 0, "blinkScore": 0, "historyLength": 4, "minRequired": 0.1, "movementScore": "0.000", "overallScore": "0.080", "timeScore": "0.400"}
 (NOBRIDGE) LOG  Face detection state: {"faceData": true, "faceDetected": true, "faceQuality": true, "isDetecting": false, "verificationStep": "capturing"}
 (NOBRIDGE) WARN  AES encryption failed, falling back to Expo crypto: [TypeError: 0, _reactNativeAesCrypto.encrypt is not a function (it is undefined)]
 (NOBRIDGE) LOG  🔍 === CAMERA KEEP-ALIVE EFFECT TRIGGERED ===
 (NOBRIDGE) LOG  🔍 Verification step changed to: processing
 (NOBRIDGE) LOG  🔍 Current camera keep-alive state: true
 (NOBRIDGE) LOG  🔍 Camera keep-alive effect completed
 (NOBRIDGE) LOG  Face detection state: {"faceData": true, "faceDetected": true, "faceQuality": true, "isDetecting": false, "verificationStep": "processing"}
 (NOBRIDGE) LOG  Face profile cached for user 7
 (NOBRIDGE) LOG  Face profile stored successfully for user: 7
 (NOBRIDGE) LOG  🛡️ Detection active flag reset - allowing cleanup
 (NOBRIDGE) LOG  🔍 === CAMERA KEEP-ALIVE EFFECT TRIGGERED ===
 (NOBRIDGE) LOG  🔍 Verification step changed to: success
 (NOBRIDGE) LOG  🔍 Current camera keep-alive state: true
 (NOBRIDGE) LOG  🔒 Keeping camera active for multi-angle registration...
 (NOBRIDGE) LOG  🔍 Camera keep-alive effect completed
 (NOBRIDGE) LOG  Face detection state: {"faceData": true, "faceDetected": true, "faceQuality": true, "isDetecting": false, "verificationStep": "success"}
 (NOBRIDGE) LOG  Modal visible - verification already completed successfully, not restarting
 (NOBRIDGE) LOG  Modal visible for multi-angle registration - resetting state for next angle
 (NOBRIDGE) LOG  🔄 Resetting modal state for next angle registration...
 (NOBRIDGE) LOG  ✅ Modal state reset complete for next angle
 (NOBRIDGE) LOG  🔍 === CAMERA KEEP-ALIVE EFFECT TRIGGERED ===
 (NOBRIDGE) LOG  🔍 Verification step changed to: initializing
 (NOBRIDGE) LOG  🔍 Current camera keep-alive state: true
 (NOBRIDGE) LOG  🔍 Camera keep-alive effect completed
 (NOBRIDGE) LOG  Face detection state: {"faceData": true, "faceDetected": true, "faceQuality": true, "isDetecting": false, "verificationStep": "initializing"}
 (NOBRIDGE) LOG  Modal visible - starting verification process
 (NOBRIDGE) LOG  🛡️ Detection active flag set - preventing modal cleanup
 (NOBRIDGE) LOG  🚀 Starting verification process for next angle...
 (NOBRIDGE) LOG  ⚠️ Camera reference not available - starting verification anyway...
 (NOBRIDGE) LOG  🛡️ Detection active flag set - preventing modal cleanup
 (NOBRIDGE) LOG  🚀 Starting periodic face detection with ML Kit...
 (NOBRIDGE) LOG  🧪 Testing ML Kit detector before starting detection...
 (NOBRIDGE) LOG  ✅ ML Kit detector is ready and has detectFaces method
 (NOBRIDGE) LOG  📊 Setting isDetecting to true and starting interval...
 (NOBRIDGE) LOG  📊 Face detection state updated: {"faceData": false, "faceDetected": false, "faceQuality": undefined, "isDetecting": true, "verificationStep": "detecting"}
 (NOBRIDGE) LOG  ⏰ Starting detection interval...
 (NOBRIDGE) LOG  ✅ Face detection interval started successfully
 (NOBRIDGE) LOG  📊 Face detection state: {"faceData": false, "faceDetected": false, "faceQuality": undefined, "isDetecting": true, "verificationStep": "detecting"}
 (NOBRIDGE) LOG  🔍 === CAMERA isActive CALCULATION ===
 (NOBRIDGE) LOG  🔍 visible: true
 (NOBRIDGE) LOG  🔍 verificationStep: detecting
 (NOBRIDGE) LOG  🔍 isDetecting: true
 (NOBRIDGE) LOG  🔍 cameraKeepAlive: true
 (NOBRIDGE) LOG  🔍 Final isActive result: true
 (NOBRIDGE) LOG  🔍 Camera should be active - checking persistence state...
 (NOBRIDGE) LOG  🔍 === isDetecting STATE CHANGED ===
 (NOBRIDGE) LOG  🔍 New value: true
 (NOBRIDGE) LOG  🔍 Has interval: true
 (NOBRIDGE) LOG  🔍 Has timeout: true
 (NOBRIDGE) LOG  🔍 Camera keep-alive: true
 (NOBRIDGE) LOG  🔍 Timestamp: 2025-08-26T10:35:28.464Z
 (NOBRIDGE) LOG  🔍 === FACE DETECTION STATE CHANGED ===
 (NOBRIDGE) LOG  🔍 Face data: true
 (NOBRIDGE) LOG  🔍 Face detected: true
 (NOBRIDGE) LOG  🔍 Face quality: true
 (NOBRIDGE) LOG  🔍 Is detecting: true
 (NOBRIDGE) LOG  🔍 Has interval: true
 (NOBRIDGE) LOG  🔍 Camera keep-alive: true
 (NOBRIDGE) LOG  🔍 Timestamp: 2025-08-26T10:35:28.486Z
 (NOBRIDGE) LOG  🔍 === CAMERA KEEP-ALIVE EFFECT TRIGGERED ===
 (NOBRIDGE) LOG  🔍 Verification step changed to: detecting
 (NOBRIDGE) LOG  🔍 Current camera keep-alive state: true
 (NOBRIDGE) LOG  🔍 Camera keep-alive effect completed
 (NOBRIDGE) LOG  Face detection state: {"faceData": true, "faceDetected": true, "faceQuality": true, "isDetecting": true, "verificationStep": "detecting"}
 (NOBRIDGE) LOG  Moving to liveness detection step - good quality face detected
 (NOBRIDGE) LOG  🛑 stopDetection called: {"hasInterval": true, "hasTimeout": true, "isDetecting": false, "stack": "    at anonymous (http://192.168.0.108:8081/node_modules/expo-router/entry.bundle//&platform=android&dev=true&hot=false&transform.engine=hermes&transform.bytecode=1&transform.routerRoot=app&unstable_transformProfile=hermes-stable:392412:25)
    at anonymous (http://192.168.0.108:8081/node_modules/expo-router/entry.bundle//&platform=android&dev=true&hot=false&transform.engine=hermes&transform.bytecode=1&transform.routerRoot=app&unstable_transformProfile=hermes-stable:390704:24)
    at commitHookEffectListMount (http://192.168.0.108:8081/node_modules/expo-router/entry.bundle//&platform=android&dev=true&hot=false&transform.engine=hermes&transform.bytecode=1&transform.routerRoot=app&unstable_transformProfile=hermes-stable:31461:35)", "timestamp": "2025-08-26T10:35:28.505Z"}
 (NOBRIDGE) LOG  Detection interval cleared
 (NOBRIDGE) LOG  Detection timeout cleared
 (NOBRIDGE) LOG  🛑 Face detection stopped - isDetecting set to false
 (NOBRIDGE) LOG  🔍 === CAMERA isActive CALCULATION ===
 (NOBRIDGE) LOG  🔍 visible: true
 (NOBRIDGE) LOG  🔍 verificationStep: liveness
 (NOBRIDGE) LOG  🔍 isDetecting: false
 (NOBRIDGE) LOG  🔍 cameraKeepAlive: true
 (NOBRIDGE) LOG  🔍 Final isActive result: true
 (NOBRIDGE) LOG  🔍 Camera should be active - checking persistence state...
 (NOBRIDGE) LOG  Camera onInitialized called
 (NOBRIDGE) LOG  🔍 === isDetecting STATE CHANGED ===
 (NOBRIDGE) LOG  🔍 New value: false
 (NOBRIDGE) LOG  🔍 Has interval: false
 (NOBRIDGE) LOG  🔍 Has timeout: false
 (NOBRIDGE) LOG  🔍 Camera keep-alive: true
 (NOBRIDGE) LOG  🔍 Timestamp: 2025-08-26T10:35:28.664Z
 (NOBRIDGE) LOG  🔍 === FACE DETECTION STATE CHANGED ===
 (NOBRIDGE) LOG  🔍 Face data: true
 (NOBRIDGE) LOG  🔍 Face detected: true
 (NOBRIDGE) LOG  🔍 Face quality: true
 (NOBRIDGE) LOG  🔍 Is detecting: false
 (NOBRIDGE) LOG  🔍 Has interval: false
 (NOBRIDGE) LOG  🔍 Camera keep-alive: true
 (NOBRIDGE) LOG  🔍 Timestamp: 2025-08-26T10:35:28.685Z
 (NOBRIDGE) LOG  🔍 === CAMERA KEEP-ALIVE EFFECT TRIGGERED ===
 (NOBRIDGE) LOG  🔍 Verification step changed to: liveness
 (NOBRIDGE) LOG  🔍 Current camera keep-alive state: true
 (NOBRIDGE) LOG  🔍 Camera keep-alive effect completed
 (NOBRIDGE) LOG  ⏰ Starting countdown timer: 5
 (NOBRIDGE) LOG  Face detection state: {"faceData": true, "faceDetected": true, "faceQuality": true, "isDetecting": false, "verificationStep": "liveness"}
 (NOBRIDGE) LOG  👁️ Starting liveness detection...
 (NOBRIDGE) LOG  👁️ Liveness detection started successfully
 (NOBRIDGE) LOG  Camera started - ensuring detection is running
 (NOBRIDGE) LOG  🔍 === CAMERA isActive CALCULATION ===
 (NOBRIDGE) LOG  🔍 visible: true
 (NOBRIDGE) LOG  🔍 verificationStep: liveness
 (NOBRIDGE) LOG  🔍 isDetecting: false
 (NOBRIDGE) LOG  🔍 cameraKeepAlive: true
 (NOBRIDGE) LOG  🔍 Final isActive result: true
 (NOBRIDGE) LOG  🔍 Camera should be active - checking persistence state...
 (NOBRIDGE) LOG  ⏰ Starting countdown timer: 5
 (NOBRIDGE) LOG  Camera initialized - connecting reference to face detection hook
 (NOBRIDGE) LOG  🔍 === SETTING CAMERA REFERENCE ===
 (NOBRIDGE) LOG  🔍 Camera component exists: true
 (NOBRIDGE) LOG  🔍 Component type: object
 (NOBRIDGE) LOG  🔍 Has component: true
 (NOBRIDGE) LOG  🔍 Component methods: ["props", "context", "refs", "updater", "displayName", "isNativeViewMounted", "lastUIRotation", "rotationHelper", "onViewReady", "onAverageFpsChanged", "onInitialized", "onStarted", "onStopped", "onPreviewStarted", "onPreviewStopped", "onShutter", "onOutputOrientationChanged", "onPreviewOrientationChanged", "onError", "onCodeScanned", "ref", "lastFrameProcessor", "state", "_reactInternals", "_reactInternalInstance"]
 (NOBRIDGE) LOG  🔍 Has takePhoto method: true
 (NOBRIDGE) LOG  🔍 Camera reference stored in persistent ref
 (NOBRIDGE) LOG  ✅ Camera reference set successfully: {"cameraRefType": "object", "hasCameraRef": true, "hasTakePhotoMethod": true, "persistentRefState": "valid"}
 (NOBRIDGE) LOG  Face registration successful for angle: 0 {"confidence": 1, "faceEncoding": "7FEYPr9Ysj5mZu4+jCUfPx4Dfz9Zfn8/XSWVvfxRfz+FGq88B/F/P1VKQD1x/6Q9ufOVPSXiBjzMDR49HAlgPftZuD1OS4g9Z6fDPdv5nj1Scok9N+7cPODtDzu6V4487+B5PWN+ez25FjE9RbO7PWuEmTxlUpU5V/zIPK0RKT0qKm89Z4y3PCpAoT06tG09SUYbPUUI0jztLhg6GNagPc2ETjtdHm89pazPPDc17jz+hNE8ZgTKPR93rDyFbnc9t6G6PYlB/DsFjoI99lXnOiQeGzwcgDw8Dg3HO2Kytj2PCKA9q0fDPM0eoj0G3789gNLDPYgKez3eT649urCHPcI9iz1mFxw90gPVPJv0Yj3G9Es96SIcPLq3ijwtBcM8cSuiPIeSpjsGZVg94oyzPVLhGz3+ypM9JGCSPdCNgj0Nh5M9irtTPfgVCzwqNMk9Ji46PSK8sTwSMkE9eayIPaMG0TvOEAU8KN6WPZJkETzAN+Y80Yq8Pdd9Aj29o3g9ZCxaPNTcrT2+E3Y9SJ5XPYvhvz0exN88FZXFPaLgdj0ln609zG2cPcfwCD2L0kI9+6spPUHejD0zafw8Pg+LPRetkT2HZcM80t49PUsWgT0jJ109f/yfPWBMyT2RVsM7f3S6Pd3XyD3Mfxo9k0VjPQ60PTspF+g8eHCgPIo1Fz0=", "isOffline": false, "livenessDetected": false, "success": true, "timestamp": 2025-08-26T10:35:26.946Z}
 (NOBRIDGE) LOG  🔍 === CAMERA isActive CALCULATION ===
 (NOBRIDGE) LOG  🔍 visible: false
 (NOBRIDGE) LOG  🔍 verificationStep: liveness
 (NOBRIDGE) LOG  🔍 isDetecting: false
 (NOBRIDGE) LOG  🔍 cameraKeepAlive: true
 (NOBRIDGE) LOG  🔍 Final isActive result: false
 (NOBRIDGE) LOG  ⚠️ Modal being hidden during active detection - preventing cleanup
 (NOBRIDGE) LOG  ⏰ Starting countdown timer: 5
 (NOBRIDGE) LOG  Modal hidden - stopping all detection processes
 (NOBRIDGE) LOG  🛑 stopDetection called: {"hasInterval": false, "hasTimeout": false, "isDetecting": false, "stack": "    at anonymous (http://192.168.0.108:8081/node_modules/expo-router/entry.bundle//&platform=android&dev=true&hot=false&transform.engine=hermes&transform.bytecode=1&transform.routerRoot=app&unstable_transformProfile=hermes-stable:392412:25)
    at anonymous (http://192.168.0.108:8081/node_modules/expo-router/entry.bundle//&platform=android&dev=true&hot=false&transform.engine=hermes&transform.bytecode=1&transform.routerRoot=app&unstable_transformProfile=hermes-stable:390818:22)
    at commitHookEffectListMount (http://192.168.0.108:8081/node_modules/expo-router/entry.bundle//&platform=android&dev=true&hot=false&transform.engine=hermes&transform.bytecode=1&transform.routerRoot=app&unstable_transformProfile=hermes-stable:31461:35)", "timestamp": "2025-08-26T10:35:29.151Z"}
 (NOBRIDGE) LOG  🛑 Face detection stopped - isDetecting set to false
 (NOBRIDGE) LOG  👁️ Stopping liveness detection...
 (NOBRIDGE) LOG  👁️ Liveness detection stopped
 (NOBRIDGE) LOG  Modal hidden - resetting verification state (not successful)
 (NOBRIDGE) LOG  👁️ Face data effect triggered: {"faceDataTimestamp": 1756204526489, "hasFaceData": true, "isLivenessActive": false}
 (NOBRIDGE) LOG  👁️ Not processing face data: {"reason": "Liveness not active"}
 (NOBRIDGE) LOG  🔍 === CAMERA KEEP-ALIVE EFFECT TRIGGERED ===
 (NOBRIDGE) LOG  🔍 Verification step changed to: initializing
 (NOBRIDGE) LOG  🔍 Current camera keep-alive state: true
 (NOBRIDGE) LOG  🔍 Camera keep-alive effect completed
 (NOBRIDGE) LOG  Modal hidden - stopping all detection processes
 (NOBRIDGE) LOG  🛑 stopDetection called: {"hasInterval": false, "hasTimeout": false, "isDetecting": false, "stack": "    at anonymous (http://192.168.0.108:8081/node_modules/expo-router/entry.bundle//&platform=android&dev=true&hot=false&transform.engine=hermes&transform.bytecode=1&transform.routerRoot=app&unstable_transformProfile=hermes-stable:392412:25)
    at anonymous (http://192.168.0.108:8081/node_modules/expo-router/entry.bundle//&platform=android&dev=true&hot=false&transform.engine=hermes&transform.bytecode=1&transform.routerRoot=app&unstable_transformProfile=hermes-stable:390818:22)
    at commitHookEffectListMount (http://192.168.0.108:8081/node_modules/expo-router/entry.bundle//&platform=android&dev=true&hot=false&transform.engine=hermes&transform.bytecode=1&transform.routerRoot=app&unstable_transformProfile=hermes-stable:31461:35)", "timestamp": "2025-08-26T10:35:29.246Z"}
 (NOBRIDGE) LOG  🛑 Face detection stopped - isDetecting set to false
 (NOBRIDGE) LOG  👁️ Stopping liveness detection...
 (NOBRIDGE) LOG  👁️ Liveness detection stopped
 (NOBRIDGE) LOG  Modal hidden - resetting verification state (not successful)
 (NOBRIDGE) LOG  🚀 Starting periodic face detection with ML Kit...
 (NOBRIDGE) LOG  🧪 Testing ML Kit detector before starting detection...
 (NOBRIDGE) LOG  ✅ ML Kit detector is ready and has detectFaces method
 (NOBRIDGE) LOG  📊 Setting isDetecting to true and starting interval...
 (NOBRIDGE) LOG  📊 Face detection state updated: {"faceData": false, "faceDetected": false, "faceQuality": undefined, "isDetecting": true, "verificationStep": "detecting"}
 (NOBRIDGE) LOG  ⏰ Starting detection interval...
 (NOBRIDGE) LOG  ✅ Face detection interval started successfully
 (NOBRIDGE) LOG  📊 Face detection state: {"faceData": false, "faceDetected": false, "faceQuality": undefined, "isDetecting": true, "verificationStep": "detecting"}
 (NOBRIDGE) LOG  🔍 === CAMERA isActive CALCULATION ===
 (NOBRIDGE) LOG  🔍 visible: false
 (NOBRIDGE) LOG  🔍 verificationStep: detecting
 (NOBRIDGE) LOG  🔍 isDetecting: true
 (NOBRIDGE) LOG  🔍 cameraKeepAlive: true
 (NOBRIDGE) LOG  🔍 Final isActive result: false
 (NOBRIDGE) LOG  🔍 === isDetecting STATE CHANGED ===
 (NOBRIDGE) LOG  🔍 New value: true
 (NOBRIDGE) LOG  🔍 Has interval: true
 (NOBRIDGE) LOG  🔍 Has timeout: true
 (NOBRIDGE) LOG  🔍 Camera keep-alive: true
 (NOBRIDGE) LOG  🔍 Timestamp: 2025-08-26T10:35:29.355Z
 (NOBRIDGE) LOG  🔍 === FACE DETECTION STATE CHANGED ===
 (NOBRIDGE) LOG  🔍 Face data: true
 (NOBRIDGE) LOG  🔍 Face detected: true
 (NOBRIDGE) LOG  🔍 Face quality: true
 (NOBRIDGE) LOG  🔍 Is detecting: true
 (NOBRIDGE) LOG  🔍 Has interval: true
 (NOBRIDGE) LOG  🔍 Camera keep-alive: true
 (NOBRIDGE) LOG  🔍 Timestamp: 2025-08-26T10:35:29.382Z
 (NOBRIDGE) LOG  🔍 === CAMERA KEEP-ALIVE EFFECT TRIGGERED ===
 (NOBRIDGE) LOG  🔍 Verification step changed to: detecting
 (NOBRIDGE) LOG  🔍 Current camera keep-alive state: true
 (NOBRIDGE) LOG  🔍 Camera keep-alive effect completed
 (NOBRIDGE) LOG  Modal hidden - stopping all detection processes
 (NOBRIDGE) LOG  🛑 stopDetection called: {"hasInterval": true, "hasTimeout": true, "isDetecting": false, "stack": "    at anonymous (http://192.168.0.108:8081/node_modules/expo-router/entry.bundle//&platform=android&dev=true&hot=false&transform.engine=hermes&transform.bytecode=1&transform.routerRoot=app&unstable_transformProfile=hermes-stable:392412:25)
    at anonymous (http://192.168.0.108:8081/node_modules/expo-router/entry.bundle//&platform=android&dev=true&hot=false&transform.engine=hermes&transform.bytecode=1&transform.routerRoot=app&unstable_transformProfile=hermes-stable:390818:22)
    at commitHookEffectListMount (http://192.168.0.108:8081/node_modules/expo-router/entry.bundle//&platform=android&dev=true&hot=false&transform.engine=hermes&transform.bytecode=1&transform.routerRoot=app&unstable_transformProfile=hermes-stable:31461:35)", "timestamp": "2025-08-26T10:35:29.402Z"}
 (NOBRIDGE) LOG  Detection interval cleared
 (NOBRIDGE) LOG  Detection timeout cleared
 (NOBRIDGE) LOG  🛑 Face detection stopped - isDetecting set to false
 (NOBRIDGE) LOG  👁️ Stopping liveness detection...
 (NOBRIDGE) LOG  👁️ Liveness detection stopped
 (NOBRIDGE) LOG  Modal hidden - resetting verification state (not successful)
 (NOBRIDGE) LOG  🔍 === isDetecting STATE CHANGED ===
 (NOBRIDGE) LOG  🔍 New value: false
 (NOBRIDGE) LOG  🔍 Has interval: false
 (NOBRIDGE) LOG  🔍 Has timeout: false
 (NOBRIDGE) LOG  🔍 Camera keep-alive: true
 (NOBRIDGE) LOG  🔍 Timestamp: 2025-08-26T10:35:29.498Z
 (NOBRIDGE) LOG  🔍 === FACE DETECTION STATE CHANGED ===
 (NOBRIDGE) LOG  🔍 Face data: true
 (NOBRIDGE) LOG  🔍 Face detected: true
 (NOBRIDGE) LOG  🔍 Face quality: true
 (NOBRIDGE) LOG  🔍 Is detecting: false
 (NOBRIDGE) LOG  🔍 Has interval: false
 (NOBRIDGE) LOG  🔍 Camera keep-alive: true
 (NOBRIDGE) LOG  🔍 Timestamp: 2025-08-26T10:35:29.524Z
 (NOBRIDGE) LOG  🔍 === CAMERA KEEP-ALIVE EFFECT TRIGGERED ===
 (NOBRIDGE) LOG  🔍 Verification step changed to: initializing
 (NOBRIDGE) LOG  🔍 Current camera keep-alive state: true
 (NOBRIDGE) LOG  🔍 Camera keep-alive effect completed
 (NOBRIDGE) LOG  Modal hidden - stopping all detection processes
 (NOBRIDGE) LOG  🛑 stopDetection called: {"hasInterval": false, "hasTimeout": false, "isDetecting": false, "stack": "    at anonymous (http://192.168.0.108:8081/node_modules/expo-router/entry.bundle//&platform=android&dev=true&hot=false&transform.engine=hermes&transform.bytecode=1&transform.routerRoot=app&unstable_transformProfile=hermes-stable:392412:25)
    at anonymous (http://192.168.0.108:8081/node_modules/expo-router/entry.bundle//&platform=android&dev=true&hot=false&transform.engine=hermes&transform.bytecode=1&transform.routerRoot=app&unstable_transformProfile=hermes-stable:390818:22)
    at commitHookEffectListMount (http://192.168.0.108:8081/node_modules/expo-router/entry.bundle//&platform=android&dev=true&hot=false&transform.engine=hermes&transform.bytecode=1&transform.routerRoot=app&unstable_transformProfile=hermes-stable:31461:35)", "timestamp": "2025-08-26T10:35:29.541Z"}
 (NOBRIDGE) LOG  🛑 Face detection stopped - isDetecting set to false
 (NOBRIDGE) LOG  👁️ Stopping liveness detection...
 (NOBRIDGE) LOG  👁️ Liveness detection stopped
 (NOBRIDGE) LOG  Modal hidden - resetting verification state (not successful)
 (NOBRIDGE) LOG  Face detection state: {"faceData": true, "faceDetected": true, "faceQuality": true, "isDetecting": false, "verificationStep": "initializing"}
 (NOBRIDGE) LOG  Modal visible - starting verification process
 (NOBRIDGE) LOG  🛡️ Detection active flag set - preventing modal cleanup
 (NOBRIDGE) LOG  🚀 Starting periodic face detection with ML Kit...
 (NOBRIDGE) LOG  🧪 Testing ML Kit detector before starting detection...
 (NOBRIDGE) LOG  ✅ ML Kit detector is ready and has detectFaces method
 (NOBRIDGE) LOG  📊 Setting isDetecting to true and starting interval...
 (NOBRIDGE) LOG  📊 Face detection state updated: {"faceData": false, "faceDetected": false, "faceQuality": undefined, "isDetecting": true, "verificationStep": "detecting"}
 (NOBRIDGE) LOG  ⏰ Starting detection interval...
 (NOBRIDGE) LOG  ✅ Face detection interval started successfully
 (NOBRIDGE) LOG  📊 Face detection state: {"faceData": false, "faceDetected": false, "faceQuality": undefined, "isDetecting": true, "verificationStep": "detecting"}
 (NOBRIDGE) LOG  🔍 === CAMERA isActive CALCULATION ===
 (NOBRIDGE) LOG  🔍 visible: true
 (NOBRIDGE) LOG  🔍 verificationStep: detecting
 (NOBRIDGE) LOG  🔍 isDetecting: true
 (NOBRIDGE) LOG  🔍 cameraKeepAlive: true
 (NOBRIDGE) LOG  🔍 Final isActive result: true
 (NOBRIDGE) LOG  🔍 Camera should be active - checking persistence state...
 (NOBRIDGE) LOG  🔍 === isDetecting STATE CHANGED ===
 (NOBRIDGE) LOG  🔍 New value: true
 (NOBRIDGE) LOG  🔍 Has interval: true
 (NOBRIDGE) LOG  🔍 Has timeout: true
 (NOBRIDGE) LOG  🔍 Camera keep-alive: true
 (NOBRIDGE) LOG  🔍 Timestamp: 2025-08-26T10:35:33.708Z
 (NOBRIDGE) LOG  🔍 === FACE DETECTION STATE CHANGED ===
 (NOBRIDGE) LOG  🔍 Face data: true
 (NOBRIDGE) LOG  🔍 Face detected: true
 (NOBRIDGE) LOG  🔍 Face quality: true
 (NOBRIDGE) LOG  🔍 Is detecting: true
 (NOBRIDGE) LOG  🔍 Has interval: true
 (NOBRIDGE) LOG  🔍 Camera keep-alive: true
 (NOBRIDGE) LOG  🔍 Timestamp: 2025-08-26T10:35:33.731Z
 (NOBRIDGE) LOG  🔍 === CAMERA KEEP-ALIVE EFFECT TRIGGERED ===
 (NOBRIDGE) LOG  🔍 Verification step changed to: detecting
 (NOBRIDGE) LOG  🔍 Current camera keep-alive state: true
 (NOBRIDGE) LOG  🔍 Camera keep-alive effect completed
 (NOBRIDGE) LOG  Face detection state: {"faceData": true, "faceDetected": true, "faceQuality": true, "isDetecting": true, "verificationStep": "detecting"}
 (NOBRIDGE) LOG  Moving to liveness detection step - good quality face detected
 (NOBRIDGE) LOG  🛑 stopDetection called: {"hasInterval": true, "hasTimeout": true, "isDetecting": false, "stack": "    at anonymous (http://192.168.0.108:8081/node_modules/expo-router/entry.bundle//&platform=android&dev=true&hot=false&transform.engine=hermes&transform.bytecode=1&transform.routerRoot=app&unstable_transformProfile=hermes-stable:392412:25)
    at anonymous (http://192.168.0.108:8081/node_modules/expo-router/entry.bundle//&platform=android&dev=true&hot=false&transform.engine=hermes&transform.bytecode=1&transform.routerRoot=app&unstable_transformProfile=hermes-stable:390704:24)
    at commitHookEffectListMount (http://192.168.0.108:8081/node_modules/expo-router/entry.bundle//&platform=android&dev=true&hot=false&transform.engine=hermes&transform.bytecode=1&transform.routerRoot=app&unstable_transformProfile=hermes-stable:31461:35)", "timestamp": "2025-08-26T10:35:33.751Z"}
 (NOBRIDGE) LOG  Detection interval cleared
 (NOBRIDGE) LOG  Detection timeout cleared
 (NOBRIDGE) LOG  🛑 Face detection stopped - isDetecting set to false
 (NOBRIDGE) LOG  🔍 === CAMERA isActive CALCULATION ===
 (NOBRIDGE) LOG  🔍 visible: true
 (NOBRIDGE) LOG  🔍 verificationStep: liveness
 (NOBRIDGE) LOG  🔍 isDetecting: false
 (NOBRIDGE) LOG  🔍 cameraKeepAlive: true
 (NOBRIDGE) LOG  🔍 Final isActive result: true
 (NOBRIDGE) LOG  🔍 Camera should be active - checking persistence state...
 (NOBRIDGE) LOG  Camera onInitialized called
 (NOBRIDGE) LOG  🔍 === isDetecting STATE CHANGED ===
 (NOBRIDGE) LOG  🔍 New value: false
 (NOBRIDGE) LOG  🔍 Has interval: false
 (NOBRIDGE) LOG  🔍 Has timeout: false
 (NOBRIDGE) LOG  🔍 Camera keep-alive: true
 (NOBRIDGE) LOG  🔍 Timestamp: 2025-08-26T10:35:33.912Z
 (NOBRIDGE) LOG  🔍 === FACE DETECTION STATE CHANGED ===
 (NOBRIDGE) LOG  🔍 Face data: true
 (NOBRIDGE) LOG  🔍 Face detected: true
 (NOBRIDGE) LOG  🔍 Face quality: true
 (NOBRIDGE) LOG  🔍 Is detecting: false
 (NOBRIDGE) LOG  🔍 Has interval: false
 (NOBRIDGE) LOG  🔍 Camera keep-alive: true
 (NOBRIDGE) LOG  🔍 Timestamp: 2025-08-26T10:35:33.935Z
 (NOBRIDGE) LOG  🔍 === CAMERA KEEP-ALIVE EFFECT TRIGGERED ===
 (NOBRIDGE) LOG  🔍 Verification step changed to: liveness
 (NOBRIDGE) LOG  🔍 Current camera keep-alive state: true
 (NOBRIDGE) LOG  🔍 Camera keep-alive effect completed
 (NOBRIDGE) LOG  ⏰ Starting countdown timer: 5
 (NOBRIDGE) LOG  Face detection state: {"faceData": true, "faceDetected": true, "faceQuality": true, "isDetecting": false, "verificationStep": "liveness"}
 (NOBRIDGE) LOG  ⚠️ Liveness timeout but face detected - proceeding to capture (ultra-forgiving)
 (NOBRIDGE) LOG  🔒 Keeping camera active during transition to prevent native view detachment
 (NOBRIDGE) LOG  🔍 Stabilizing camera for final capture...
 (NOBRIDGE) LOG  Camera started - ensuring detection is running
 (NOBRIDGE) LOG  👁️ Starting liveness detection...
 (NOBRIDGE) LOG  👁️ Liveness detection started successfully
 (NOBRIDGE) LOG  🔍 === CAMERA isActive CALCULATION ===
 (NOBRIDGE) LOG  🔍 visible: true
 (NOBRIDGE) LOG  🔍 verificationStep: capturing
 (NOBRIDGE) LOG  🔍 isDetecting: false
 (NOBRIDGE) LOG  🔍 cameraKeepAlive: true
 (NOBRIDGE) LOG  🔍 Final isActive result: true
 (NOBRIDGE) LOG  🔍 Camera should be active - checking persistence state...
 (NOBRIDGE) LOG  👁️ Face data effect triggered: {"faceDataTimestamp": 1756204526489, "hasFaceData": true, "isLivenessActive": true}
 (NOBRIDGE) LOG  👁️ Processing face data for liveness detection
 (NOBRIDGE) LOG  👁️ processFaceData called: {"faceDataDetails": {"leftEye": 0.9965924024581909, "rightEye": 0.998312771320343, "timestamp": 1756204526489}, "hasFaceData": true, "isLivenessActive": true}
 (NOBRIDGE) LOG  👁️ Processing liveness data: {"average": "0.997", "eyeClosedThreshold": 0.98, "eyeOpenThreshold": 0.995, "historyLength": 1, "leftEye": "0.997", "rightEye": "0.998"}
 (NOBRIDGE) LOG  👁️ Analyzing blink pattern in history: {"historyLength": 1, "minRequired": 5}
 (NOBRIDGE) LOG  👁️ Liveness score calculation: {"blinkCount": 0, "blinkScore": 0, "historyLength": 1, "minRequired": 0.1, "movementScore": "0.000", "overallScore": "0.020", "timeScore": "0.100"}
 (NOBRIDGE) LOG  🔍 === CAMERA KEEP-ALIVE EFFECT TRIGGERED ===
 (NOBRIDGE) LOG  🔍 Verification step changed to: capturing
 (NOBRIDGE) LOG  🔍 Current camera keep-alive state: true
 (NOBRIDGE) LOG  🔍 Camera keep-alive effect completed
 (NOBRIDGE) LOG  Face detection state: {"faceData": true, "faceDetected": true, "faceQuality": true, "isDetecting": false, "verificationStep": "capturing"}
 (NOBRIDGE) LOG  Camera initialized - connecting reference to face detection hook
 (NOBRIDGE) LOG  🔍 === SETTING CAMERA REFERENCE ===
 (NOBRIDGE) LOG  🔍 Camera component exists: true
 (NOBRIDGE) LOG  🔍 Component type: object
 (NOBRIDGE) LOG  🔍 Has component: true
 (NOBRIDGE) LOG  🔍 Component methods: ["props", "context", "refs", "updater", "displayName", "isNativeViewMounted", "lastUIRotation", "rotationHelper", "onViewReady", "onAverageFpsChanged", "onInitialized", "onStarted", "onStopped", "onPreviewStarted", "onPreviewStopped", "onShutter", "onOutputOrientationChanged", "onPreviewOrientationChanged", "onError", "onCodeScanned", "ref", "lastFrameProcessor", "state", "_reactInternals", "_reactInternalInstance"]
 (NOBRIDGE) LOG  🔍 Has takePhoto method: true
 (NOBRIDGE) LOG  🔍 Camera reference stored in persistent ref
 (NOBRIDGE) LOG  ✅ Camera reference set successfully: {"cameraRefType": "object", "hasCameraRef": true, "hasTakePhotoMethod": true, "persistentRefState": "valid"}
 (NOBRIDGE) LOG  🔍 === CAMERA isActive CALCULATION ===
 (NOBRIDGE) LOG  🔍 visible: true
 (NOBRIDGE) LOG  🔍 verificationStep: capturing
 (NOBRIDGE) LOG  🔍 isDetecting: false
 (NOBRIDGE) LOG  🔍 cameraKeepAlive: true
 (NOBRIDGE) LOG  🔍 Final isActive result: true
 (NOBRIDGE) LOG  🔍 Camera should be active - checking persistence state...
 (NOBRIDGE) LOG  🔍 Proactively monitoring camera state...
 (NOBRIDGE) LOG  🔍 === CAMERA STATE MONITORING ===
 (NOBRIDGE) LOG  🔍 Camera ref exists: true
 (NOBRIDGE) LOG  🔍 Persistent ref exists: true
 (NOBRIDGE) LOG  🔍 Camera ref state: valid
 (NOBRIDGE) LOG  🔍 Camera state monitoring: {"hasTakePhoto": true, "isActive": true}
 (NOBRIDGE) LOG  ✅ Camera state is healthy - proceeding with capture
 (NOBRIDGE) LOG  🔍 === COMPREHENSIVE CAMERA STATE VALIDATION ===
 (NOBRIDGE) LOG  🔍 Camera ref exists: true
 (NOBRIDGE) LOG  🔍 Camera ref type: object
 (NOBRIDGE) LOG  🔍 Camera methods available: ["props", "context", "refs", "updater", "displayName", "isNativeViewMounted", "lastUIRotation", "rotationHelper", "onViewReady", "onAverageFpsChanged", "onInitialized", "onStarted", "onStopped", "onPreviewStarted", "onPreviewStopped", "onShutter", "onOutputOrientationChanged", "onPreviewOrientationChanged", "onError", "onCodeScanned", "ref", "lastFrameProcessor", "state", "_reactInternals", "_reactInternalInstance"]
 (NOBRIDGE) LOG  🔍 Has takePhoto method: true
 (NOBRIDGE) LOG  🔍 Camera props: {"audio": false, "device": {"formats": [[Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object]], "hardwareLevel": "full", "hasFlash": false, "hasTorch": false, "id": "1", "isMultiCam": false, "maxExposure": 24, "maxZoom": 10, "minExposure": -24, "minFocusDistance": 0, "minZoom": 1, "name": "1 (FRONT) androidx.camera.camera2", "neutralZoom": 1, "physicalDevices": ["wide-angle-camera"], "position": "front", "sensorOrientation": "landscape-right", "supportsFocus": true, "supportsLowLightBoost": false, "supportsRawCapture": false}, "frameProcessor": {"frameProcessor": [Function withFrameRefCountingTs1], "type": "readonly"}, "isActive": true, "onError": [Function onError], "onInitialized": [Function onInitialized], "onStarted": [Function onStarted], "photo": true, "style": {"height": "100%", "width": "100%"}, "video": false}
 (NOBRIDGE) LOG  🔍 Camera state: {"averageFpsSamples": [], "isRecordingWithFlash": false}
 (NOBRIDGE) LOG  🔍 Camera display name: Camera
 (NOBRIDGE) LOG  ✅ Camera validation passed - proceeding with capture
 (NOBRIDGE) LOG  capturePhoto called with: {"cameraRefCurrent": {"_reactInternalInstance": {}, "_reactInternals": {"_debugHookTypes": null, "_debugInfo": null, "_debugNeedsRemount": false, "_debugOwner": [FiberNode], "actualDuration": 0.2569790184497833, "actualStartTime": 140575547.868508, "alternate": [FiberNode], "child": [FiberNode], "childLanes": 0, "deletions": null, "dependencies": null, "elementType": [Function Camera], "flags": 2097157, "index": 0, "key": "1", "lanes": 0, "memoizedProps": [Object], "memoizedState": [Object], "mode": 3, "pendingProps": [Object], "ref": [Object], "refCleanup": null, "return": [FiberNode], "selfBaseDuration": 0.19552099704742432, "sibling": [FiberNode], "stateNode": [Circular], "subtreeFlags": 2097152, "tag": 1, "treeBaseDuration": 0.21062499284744263, "type": [Function Camera], "updateQueue": [Object]}, "context": {}, "displayName": "Camera", "isNativeViewMounted": true, "lastFrameProcessor": [Function withFrameRefCountingTs1], "lastUIRotation": 0, "onAverageFpsChanged": [Function bound onAverageFpsChanged], "onCodeScanned": [Function bound onCodeScanned], "onError": [Function bound onError], "onInitialized": [Function bound onInitialized], "onOutputOrientationChanged": [Function bound onOutputOrientationChanged], "onPreviewOrientationChanged": [Function bound onPreviewOrientationChanged], "onPreviewStarted": [Function bound onPreviewStarted], "onPreviewStopped": [Function bound onPreviewStopped], "onShutter": [Function bound onShutter], "onStarted": [Function bound onStarted], "onStopped": [Function bound onStopped], "onViewReady": [Function bound onViewReady], "props": {"audio": false, "device": [Object], "frameProcessor": [Object], "isActive": true, "onError": [Function onError], "onInitialized": [Function onInitialized], "onStarted": [Function onStarted], "photo": true, "style": [Object], "video": false}, "ref": {"current": [ReactFabricHostComponent]}, "refs": {}, "rotationHelper": {"outputOrientation": "portrait", "previewOrientation": "portrait"}, "state": {"averageFpsSamples": [Array], "isRecordingWithFlash": false}, "updater": {"enqueueForceUpdate": [Function enqueueForceUpdate], "enqueueReplaceState": [Function enqueueReplaceState], "enqueueSetState": [Function enqueueSetState], "isMounted": [Function isMounted]}}, "hasCameraRef": true, "hasTakePhotoMethod": true, "isInitialized": true}
 (NOBRIDGE) LOG  Capturing photo with validated face...
 (NOBRIDGE) LOG  🔍 Validating camera state before final capture...
 (NOBRIDGE) LOG  ✅ Camera validation successful on attempt 1
 (NOBRIDGE) LOG  📸 Final camera state validation before photo capture...
 (NOBRIDGE) LOG  ✅ Photo capture successful: {"height": 1200, "isMirrored": true, "isRawPhoto": false, "orientation": "portrait", "path": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy830300383177298644.jpg", "width": 1600}
 (NOBRIDGE) LOG  🔍 === CAMERA KEEP-ALIVE EFFECT TRIGGERED ===
 (NOBRIDGE) LOG  🔍 Verification step changed to: processing
 (NOBRIDGE) LOG  🔍 Current camera keep-alive state: true
 (NOBRIDGE) LOG  🔍 Camera keep-alive effect completed
 (NOBRIDGE) LOG  Face detection state: {"faceData": true, "faceDetected": true, "faceQuality": true, "isDetecting": false, "verificationStep": "processing"}
 (NOBRIDGE) WARN  AES encryption failed, falling back to Expo crypto: [TypeError: 0, _reactNativeAesCrypto.encrypt is not a function (it is undefined)]
 (NOBRIDGE) LOG  Face profile cached for user 7
 (NOBRIDGE) LOG  Face profile stored successfully for user: 7
 (NOBRIDGE) LOG  🛡️ Detection active flag reset - allowing cleanup
 (NOBRIDGE) LOG  🔍 === CAMERA KEEP-ALIVE EFFECT TRIGGERED ===
 (NOBRIDGE) LOG  🔍 Verification step changed to: success
 (NOBRIDGE) LOG  🔍 Current camera keep-alive state: true
 (NOBRIDGE) LOG  🔒 Keeping camera active for multi-angle registration...
 (NOBRIDGE) LOG  🔍 Camera keep-alive effect completed
 (NOBRIDGE) LOG  Face detection state: {"faceData": true, "faceDetected": true, "faceQuality": true, "isDetecting": false, "verificationStep": "success"}
 (NOBRIDGE) LOG  Modal visible - verification already completed successfully, not restarting
 (NOBRIDGE) LOG  Modal visible for multi-angle registration - resetting state for next angle
 (NOBRIDGE) LOG  🔄 Resetting modal state for next angle registration...
 (NOBRIDGE) LOG  ✅ Modal state reset complete for next angle
 (NOBRIDGE) LOG  🔍 === CAMERA KEEP-ALIVE EFFECT TRIGGERED ===
 (NOBRIDGE) LOG  🔍 Verification step changed to: initializing
 (NOBRIDGE) LOG  🔍 Current camera keep-alive state: true
 (NOBRIDGE) LOG  🔍 Camera keep-alive effect completed
 (NOBRIDGE) LOG  Face detection state: {"faceData": true, "faceDetected": true, "faceQuality": true, "isDetecting": false, "verificationStep": "initializing"}
 (NOBRIDGE) LOG  Modal visible - starting verification process
 (NOBRIDGE) LOG  🛡️ Detection active flag set - preventing modal cleanup
 (NOBRIDGE) LOG  🚀 Starting verification process for next angle...
 (NOBRIDGE) LOG  ⚠️ Camera reference not available - starting verification anyway...
 (NOBRIDGE) LOG  🛡️ Detection active flag set - preventing modal cleanup
 (NOBRIDGE) LOG  🚀 Starting periodic face detection with ML Kit...
 (NOBRIDGE) LOG  🧪 Testing ML Kit detector before starting detection...
 (NOBRIDGE) LOG  ✅ ML Kit detector is ready and has detectFaces method
 (NOBRIDGE) LOG  📊 Setting isDetecting to true and starting interval...
 (NOBRIDGE) LOG  📊 Face detection state updated: {"faceData": false, "faceDetected": false, "faceQuality": undefined, "isDetecting": true, "verificationStep": "detecting"}
 (NOBRIDGE) LOG  ⏰ Starting detection interval...
 (NOBRIDGE) LOG  ✅ Face detection interval started successfully
 (NOBRIDGE) LOG  📊 Face detection state: {"faceData": false, "faceDetected": false, "faceQuality": undefined, "isDetecting": true, "verificationStep": "detecting"}
 (NOBRIDGE) LOG  🔍 === CAMERA isActive CALCULATION ===
 (NOBRIDGE) LOG  🔍 visible: true
 (NOBRIDGE) LOG  🔍 verificationStep: detecting
 (NOBRIDGE) LOG  🔍 isDetecting: true
 (NOBRIDGE) LOG  🔍 cameraKeepAlive: true
 (NOBRIDGE) LOG  🔍 Final isActive result: true
 (NOBRIDGE) LOG  🔍 Camera should be active - checking persistence state...
 (NOBRIDGE) LOG  🔍 === isDetecting STATE CHANGED ===
 (NOBRIDGE) LOG  🔍 New value: true
 (NOBRIDGE) LOG  🔍 Has interval: true
 (NOBRIDGE) LOG  🔍 Has timeout: true
 (NOBRIDGE) LOG  🔍 Camera keep-alive: true
 (NOBRIDGE) LOG  🔍 Timestamp: 2025-08-26T10:35:37.246Z
 (NOBRIDGE) LOG  🔍 === FACE DETECTION STATE CHANGED ===
 (NOBRIDGE) LOG  🔍 Face data: true
 (NOBRIDGE) LOG  🔍 Face detected: true
 (NOBRIDGE) LOG  🔍 Face quality: true
 (NOBRIDGE) LOG  🔍 Is detecting: true
 (NOBRIDGE) LOG  🔍 Has interval: true
 (NOBRIDGE) LOG  🔍 Camera keep-alive: true
 (NOBRIDGE) LOG  🔍 Timestamp: 2025-08-26T10:35:37.268Z
 (NOBRIDGE) LOG  🔍 === CAMERA KEEP-ALIVE EFFECT TRIGGERED ===
 (NOBRIDGE) LOG  🔍 Verification step changed to: detecting
 (NOBRIDGE) LOG  🔍 Current camera keep-alive state: true
 (NOBRIDGE) LOG  🔍 Camera keep-alive effect completed
 (NOBRIDGE) LOG  Face detection state: {"faceData": true, "faceDetected": true, "faceQuality": true, "isDetecting": true, "verificationStep": "detecting"}
 (NOBRIDGE) LOG  Moving to liveness detection step - good quality face detected
 (NOBRIDGE) LOG  🛑 stopDetection called: {"hasInterval": true, "hasTimeout": true, "isDetecting": false, "stack": "    at anonymous (http://192.168.0.108:8081/node_modules/expo-router/entry.bundle//&platform=android&dev=true&hot=false&transform.engine=hermes&transform.bytecode=1&transform.routerRoot=app&unstable_transformProfile=hermes-stable:392412:25)
    at anonymous (http://192.168.0.108:8081/node_modules/expo-router/entry.bundle//&platform=android&dev=true&hot=false&transform.engine=hermes&transform.bytecode=1&transform.routerRoot=app&unstable_transformProfile=hermes-stable:390704:24)
    at commitHookEffectListMount (http://192.168.0.108:8081/node_modules/expo-router/entry.bundle//&platform=android&dev=true&hot=false&transform.engine=hermes&transform.bytecode=1&transform.routerRoot=app&unstable_transformProfile=hermes-stable:31461:35)", "timestamp": "2025-08-26T10:35:37.287Z"}
 (NOBRIDGE) LOG  Detection interval cleared
 (NOBRIDGE) LOG  Detection timeout cleared
 (NOBRIDGE) LOG  🛑 Face detection stopped - isDetecting set to false
 (NOBRIDGE) LOG  🔍 === CAMERA isActive CALCULATION ===
 (NOBRIDGE) LOG  🔍 visible: true
 (NOBRIDGE) LOG  🔍 verificationStep: liveness
 (NOBRIDGE) LOG  🔍 isDetecting: false
 (NOBRIDGE) LOG  🔍 cameraKeepAlive: true
 (NOBRIDGE) LOG  🔍 Final isActive result: true
 (NOBRIDGE) LOG  🔍 Camera should be active - checking persistence state...
 (NOBRIDGE) LOG  Camera onInitialized called
 (NOBRIDGE) LOG  🔍 === isDetecting STATE CHANGED ===
 (NOBRIDGE) LOG  🔍 New value: false
 (NOBRIDGE) LOG  🔍 Has interval: false
 (NOBRIDGE) LOG  🔍 Has timeout: false
 (NOBRIDGE) LOG  🔍 Camera keep-alive: true
 (NOBRIDGE) LOG  🔍 Timestamp: 2025-08-26T10:35:37.443Z
 (NOBRIDGE) LOG  🔍 === FACE DETECTION STATE CHANGED ===
 (NOBRIDGE) LOG  🔍 Face data: true
 (NOBRIDGE) LOG  🔍 Face detected: true
 (NOBRIDGE) LOG  🔍 Face quality: true
 (NOBRIDGE) LOG  🔍 Is detecting: false
 (NOBRIDGE) LOG  🔍 Has interval: false
 (NOBRIDGE) LOG  🔍 Camera keep-alive: true
 (NOBRIDGE) LOG  🔍 Timestamp: 2025-08-26T10:35:37.465Z
 (NOBRIDGE) LOG  🔍 === CAMERA KEEP-ALIVE EFFECT TRIGGERED ===
 (NOBRIDGE) LOG  🔍 Verification step changed to: liveness
 (NOBRIDGE) LOG  🔍 Current camera keep-alive state: true
 (NOBRIDGE) LOG  🔍 Camera keep-alive effect completed
 (NOBRIDGE) LOG  ⏰ Starting countdown timer: 5
 (NOBRIDGE) LOG  Face detection state: {"faceData": true, "faceDetected": true, "faceQuality": true, "isDetecting": false, "verificationStep": "liveness"}
 (NOBRIDGE) LOG  Camera started - ensuring detection is running
 (NOBRIDGE) LOG  👁️ Starting liveness detection...
 (NOBRIDGE) LOG  👁️ Liveness detection started successfully
 (NOBRIDGE) LOG  🔍 === CAMERA isActive CALCULATION ===
 (NOBRIDGE) LOG  🔍 visible: true
 (NOBRIDGE) LOG  🔍 verificationStep: liveness
 (NOBRIDGE) LOG  🔍 isDetecting: false
 (NOBRIDGE) LOG  🔍 cameraKeepAlive: true
 (NOBRIDGE) LOG  🔍 Final isActive result: true
 (NOBRIDGE) LOG  🔍 Camera should be active - checking persistence state...
 (NOBRIDGE) LOG  ⏰ Starting countdown timer: 5
 (NOBRIDGE) LOG  Camera initialized - connecting reference to face detection hook
 (NOBRIDGE) LOG  🔍 === SETTING CAMERA REFERENCE ===
 (NOBRIDGE) LOG  🔍 Camera component exists: true
 (NOBRIDGE) LOG  🔍 Component type: object
 (NOBRIDGE) LOG  🔍 Has component: true
 (NOBRIDGE) LOG  🔍 Component methods: ["props", "context", "refs", "updater", "displayName", "isNativeViewMounted", "lastUIRotation", "rotationHelper", "onViewReady", "onAverageFpsChanged", "onInitialized", "onStarted", "onStopped", "onPreviewStarted", "onPreviewStopped", "onShutter", "onOutputOrientationChanged", "onPreviewOrientationChanged", "onError", "onCodeScanned", "ref", "lastFrameProcessor", "state", "_reactInternals", "_reactInternalInstance"]
 (NOBRIDGE) LOG  🔍 Has takePhoto method: true
 (NOBRIDGE) LOG  🔍 Camera reference stored in persistent ref
 (NOBRIDGE) LOG  ✅ Camera reference set successfully: {"cameraRefType": "object", "hasCameraRef": true, "hasTakePhotoMethod": true, "persistentRefState": "valid"}
 (NOBRIDGE) LOG  Face registration successful for angle: 1 {"confidence": 1, "faceEncoding": "uB4lPmoDvT6Pwt0+pw0UP64gfz9tkX8/KC9vvSuQfz/Rb6M89fJ/P7YEqz1V1ZY8mR//OzFlID2zBL89LsnuPPB8kj2VdBs8n0+9O1YjVTzOdGk9dmLNPCINdz1MFCc8ApGaPfnlCD3TS4Y9PJ17PPgheT10mco9KArTPIRnxjzw+iY9l4+0PZs6VD1Gi+Q7H+6lPXJMyz06v3M9BgKpPT+hyz1E8nc9i4EJPZgGBjz4yL484CmsPPqHgDtP4Y49CiiDPfmHkz39o689/CHzPA2owT1ARIY84pl1PWdltj1P1ag82Tq1PSp1Kz3n/xU9N9YyPFxWsj2bJJk8mnG4PM2qIj0qEjc9Dg4iPOf+Ezx7ssQ9dQK2PbZVMzupAI89giOWPRu4CT2GdDw9FBLKPfkWsD1rwas94lidPRIldD3OLcE9FJExPRoIIj0atIA9vxS0Pd56ozy2HMo9ty+GPcNXED0e72I87oaZOwgHrD2OVJQ7bWZ/Pd4vRz2RMBc92d+3PYj/jz2wSqI9mgZvPRcUpz1H5XY8gEAFPI7JXT0ry888ryNuO2hDCTz3a0c9afGJPDxLWTkDIr89gNSnPEqZmD0Eeqg9KJkBPSHfUT3O0E49loiIPbkVzDt33xw9PMzpPBhUxD1Kx5I9CSY7O4j/nj24lIc8vYVdPZpJXT0=", "isOffline": false, "livenessDetected": false, "success": true, "timestamp": 2025-08-26T10:35:35.747Z}
 (NOBRIDGE) LOG  🔍 === CAMERA isActive CALCULATION ===
 (NOBRIDGE) LOG  🔍 visible: false
 (NOBRIDGE) LOG  🔍 verificationStep: liveness
 (NOBRIDGE) LOG  🔍 isDetecting: false
 (NOBRIDGE) LOG  🔍 cameraKeepAlive: true
 (NOBRIDGE) LOG  🔍 Final isActive result: false
 (NOBRIDGE) LOG  ⚠️ Modal being hidden during active detection - preventing cleanup
 (NOBRIDGE) LOG  ⏰ Starting countdown timer: 5
 (NOBRIDGE) LOG  Modal hidden - stopping all detection processes
 (NOBRIDGE) LOG  🛑 stopDetection called: {"hasInterval": false, "hasTimeout": false, "isDetecting": false, "stack": "    at anonymous (http://192.168.0.108:8081/node_modules/expo-router/entry.bundle//&platform=android&dev=true&hot=false&transform.engine=hermes&transform.bytecode=1&transform.routerRoot=app&unstable_transformProfile=hermes-stable:392412:25)
    at anonymous (http://192.168.0.108:8081/node_modules/expo-router/entry.bundle//&platform=android&dev=true&hot=false&transform.engine=hermes&transform.bytecode=1&transform.routerRoot=app&unstable_transformProfile=hermes-stable:390818:22)
    at commitHookEffectListMount (http://192.168.0.108:8081/node_modules/expo-router/entry.bundle//&platform=android&dev=true&hot=false&transform.engine=hermes&transform.bytecode=1&transform.routerRoot=app&unstable_transformProfile=hermes-stable:31461:35)", "timestamp": "2025-08-26T10:35:38.011Z"}
 (NOBRIDGE) LOG  🛑 Face detection stopped - isDetecting set to false
 (NOBRIDGE) LOG  👁️ Stopping liveness detection...
 (NOBRIDGE) LOG  👁️ Liveness detection stopped
 (NOBRIDGE) LOG  Modal hidden - resetting verification state (not successful)
 (NOBRIDGE) LOG  👁️ Face data effect triggered: {"faceDataTimestamp": 1756204526489, "hasFaceData": true, "isLivenessActive": false}
 (NOBRIDGE) LOG  👁️ Not processing face data: {"reason": "Liveness not active"}
 (NOBRIDGE) LOG  🔍 === CAMERA KEEP-ALIVE EFFECT TRIGGERED ===
 (NOBRIDGE) LOG  🔍 Verification step changed to: initializing
 (NOBRIDGE) LOG  🔍 Current camera keep-alive state: true
 (NOBRIDGE) LOG  🔍 Camera keep-alive effect completed
 (NOBRIDGE) LOG  Modal hidden - stopping all detection processes
 (NOBRIDGE) LOG  🛑 stopDetection called: {"hasInterval": false, "hasTimeout": false, "isDetecting": false, "stack": "    at anonymous (http://192.168.0.108:8081/node_modules/expo-router/entry.bundle//&platform=android&dev=true&hot=false&transform.engine=hermes&transform.bytecode=1&transform.routerRoot=app&unstable_transformProfile=hermes-stable:392412:25)
    at anonymous (http://192.168.0.108:8081/node_modules/expo-router/entry.bundle//&platform=android&dev=true&hot=false&transform.engine=hermes&transform.bytecode=1&transform.routerRoot=app&unstable_transformProfile=hermes-stable:390818:22)
    at commitHookEffectListMount (http://192.168.0.108:8081/node_modules/expo-router/entry.bundle//&platform=android&dev=true&hot=false&transform.engine=hermes&transform.bytecode=1&transform.routerRoot=app&unstable_transformProfile=hermes-stable:31461:35)", "timestamp": "2025-08-26T10:35:38.148Z"}
 (NOBRIDGE) LOG  🛑 Face detection stopped - isDetecting set to false
 (NOBRIDGE) LOG  👁️ Stopping liveness detection...
 (NOBRIDGE) LOG  👁️ Liveness detection stopped
 (NOBRIDGE) LOG  Modal hidden - resetting verification state (not successful)
 (NOBRIDGE) LOG  🚀 Starting periodic face detection with ML Kit...
 (NOBRIDGE) LOG  🧪 Testing ML Kit detector before starting detection...
 (NOBRIDGE) LOG  ✅ ML Kit detector is ready and has detectFaces method
 (NOBRIDGE) LOG  📊 Setting isDetecting to true and starting interval...
 (NOBRIDGE) LOG  📊 Face detection state updated: {"faceData": false, "faceDetected": false, "faceQuality": undefined, "isDetecting": true, "verificationStep": "detecting"}
 (NOBRIDGE) LOG  ⏰ Starting detection interval...
 (NOBRIDGE) LOG  ✅ Face detection interval started successfully
 (NOBRIDGE) LOG  📊 Face detection state: {"faceData": false, "faceDetected": false, "faceQuality": undefined, "isDetecting": true, "verificationStep": "detecting"}
 (NOBRIDGE) LOG  🔍 === CAMERA isActive CALCULATION ===
 (NOBRIDGE) LOG  🔍 visible: false
 (NOBRIDGE) LOG  🔍 verificationStep: detecting
 (NOBRIDGE) LOG  🔍 isDetecting: true
 (NOBRIDGE) LOG  🔍 cameraKeepAlive: true
 (NOBRIDGE) LOG  🔍 Final isActive result: false
 (NOBRIDGE) LOG  🔍 === isDetecting STATE CHANGED ===
 (NOBRIDGE) LOG  🔍 New value: true
 (NOBRIDGE) LOG  🔍 Has interval: true
 (NOBRIDGE) LOG  🔍 Has timeout: true
 (NOBRIDGE) LOG  🔍 Camera keep-alive: true
 (NOBRIDGE) LOG  🔍 Timestamp: 2025-08-26T10:35:38.255Z
 (NOBRIDGE) LOG  🔍 === FACE DETECTION STATE CHANGED ===
 (NOBRIDGE) LOG  🔍 Face data: true
 (NOBRIDGE) LOG  🔍 Face detected: true
 (NOBRIDGE) LOG  🔍 Face quality: true
 (NOBRIDGE) LOG  🔍 Is detecting: true
 (NOBRIDGE) LOG  🔍 Has interval: true
 (NOBRIDGE) LOG  🔍 Camera keep-alive: true
 (NOBRIDGE) LOG  🔍 Timestamp: 2025-08-26T10:35:38.284Z
 (NOBRIDGE) LOG  🔍 === CAMERA KEEP-ALIVE EFFECT TRIGGERED ===
 (NOBRIDGE) LOG  🔍 Verification step changed to: detecting
 (NOBRIDGE) LOG  🔍 Current camera keep-alive state: true
 (NOBRIDGE) LOG  🔍 Camera keep-alive effect completed
 (NOBRIDGE) LOG  Modal hidden - stopping all detection processes
 (NOBRIDGE) LOG  🛑 stopDetection called: {"hasInterval": true, "hasTimeout": true, "isDetecting": false, "stack": "    at anonymous (http://192.168.0.108:8081/node_modules/expo-router/entry.bundle//&platform=android&dev=true&hot=false&transform.engine=hermes&transform.bytecode=1&transform.routerRoot=app&unstable_transformProfile=hermes-stable:392412:25)
    at anonymous (http://192.168.0.108:8081/node_modules/expo-router/entry.bundle//&platform=android&dev=true&hot=false&transform.engine=hermes&transform.bytecode=1&transform.routerRoot=app&unstable_transformProfile=hermes-stable:390818:22)
    at commitHookEffectListMount (http://192.168.0.108:8081/node_modules/expo-router/entry.bundle//&platform=android&dev=true&hot=false&transform.engine=hermes&transform.bytecode=1&transform.routerRoot=app&unstable_transformProfile=hermes-stable:31461:35)", "timestamp": "2025-08-26T10:35:38.305Z"}
 (NOBRIDGE) LOG  Detection interval cleared
 (NOBRIDGE) LOG  Detection timeout cleared
 (NOBRIDGE) LOG  🛑 Face detection stopped - isDetecting set to false
 (NOBRIDGE) LOG  👁️ Stopping liveness detection...
 (NOBRIDGE) LOG  👁️ Liveness detection stopped
 (NOBRIDGE) LOG  Modal hidden - resetting verification state (not successful)
 (NOBRIDGE) LOG  🔍 === isDetecting STATE CHANGED ===
 (NOBRIDGE) LOG  🔍 New value: false
 (NOBRIDGE) LOG  🔍 Has interval: false
 (NOBRIDGE) LOG  🔍 Has timeout: false
 (NOBRIDGE) LOG  🔍 Camera keep-alive: true
 (NOBRIDGE) LOG  🔍 Timestamp: 2025-08-26T10:35:38.389Z
 (NOBRIDGE) LOG  🔍 === FACE DETECTION STATE CHANGED ===
 (NOBRIDGE) LOG  🔍 Face data: true
 (NOBRIDGE) LOG  🔍 Face detected: true
 (NOBRIDGE) LOG  🔍 Face quality: true
 (NOBRIDGE) LOG  🔍 Is detecting: false
 (NOBRIDGE) LOG  🔍 Has interval: false
 (NOBRIDGE) LOG  🔍 Camera keep-alive: true
 (NOBRIDGE) LOG  🔍 Timestamp: 2025-08-26T10:35:38.413Z
 (NOBRIDGE) LOG  🔍 === CAMERA KEEP-ALIVE EFFECT TRIGGERED ===
 (NOBRIDGE) LOG  🔍 Verification step changed to: initializing
 (NOBRIDGE) LOG  🔍 Current camera keep-alive state: true
 (NOBRIDGE) LOG  🔍 Camera keep-alive effect completed
 (NOBRIDGE) LOG  Modal hidden - stopping all detection processes
 (NOBRIDGE) LOG  🛑 stopDetection called: {"hasInterval": false, "hasTimeout": false, "isDetecting": false, "stack": "    at anonymous (http://192.168.0.108:8081/node_modules/expo-router/entry.bundle//&platform=android&dev=true&hot=false&transform.engine=hermes&transform.bytecode=1&transform.routerRoot=app&unstable_transformProfile=hermes-stable:392412:25)
    at anonymous (http://192.168.0.108:8081/node_modules/expo-router/entry.bundle//&platform=android&dev=true&hot=false&transform.engine=hermes&transform.bytecode=1&transform.routerRoot=app&unstable_transformProfile=hermes-stable:390818:22)
    at commitHookEffectListMount (http://192.168.0.108:8081/node_modules/expo-router/entry.bundle//&platform=android&dev=true&hot=false&transform.engine=hermes&transform.bytecode=1&transform.routerRoot=app&unstable_transformProfile=hermes-stable:31461:35)", "timestamp": "2025-08-26T10:35:38.430Z"}
 (NOBRIDGE) LOG  🛑 Face detection stopped - isDetecting set to false
 (NOBRIDGE) LOG  👁️ Stopping liveness detection...
 (NOBRIDGE) LOG  👁️ Liveness detection stopped
 (NOBRIDGE) LOG  Modal hidden - resetting verification state (not successful)
 (NOBRIDGE) LOG  Face detection state: {"faceData": true, "faceDetected": true, "faceQuality": true, "isDetecting": false, "verificationStep": "initializing"}
 (NOBRIDGE) LOG  Modal visible - starting verification process
 (NOBRIDGE) LOG  🛡️ Detection active flag set - preventing modal cleanup
 (NOBRIDGE) LOG  🚀 Starting periodic face detection with ML Kit...
 (NOBRIDGE) LOG  🧪 Testing ML Kit detector before starting detection...
 (NOBRIDGE) LOG  ✅ ML Kit detector is ready and has detectFaces method
 (NOBRIDGE) LOG  📊 Setting isDetecting to true and starting interval...
 (NOBRIDGE) LOG  📊 Face detection state updated: {"faceData": false, "faceDetected": false, "faceQuality": undefined, "isDetecting": true, "verificationStep": "detecting"}
 (NOBRIDGE) LOG  ⏰ Starting detection interval...
 (NOBRIDGE) LOG  ✅ Face detection interval started successfully
 (NOBRIDGE) LOG  📊 Face detection state: {"faceData": false, "faceDetected": false, "faceQuality": undefined, "isDetecting": true, "verificationStep": "detecting"}
 (NOBRIDGE) LOG  🔍 === CAMERA isActive CALCULATION ===
 (NOBRIDGE) LOG  🔍 visible: true
 (NOBRIDGE) LOG  🔍 verificationStep: detecting
 (NOBRIDGE) LOG  🔍 isDetecting: true
 (NOBRIDGE) LOG  🔍 cameraKeepAlive: true
 (NOBRIDGE) LOG  🔍 Final isActive result: true
 (NOBRIDGE) LOG  🔍 Camera should be active - checking persistence state...
 (NOBRIDGE) LOG  🔍 === isDetecting STATE CHANGED ===
 (NOBRIDGE) LOG  🔍 New value: true
 (NOBRIDGE) LOG  🔍 Has interval: true
 (NOBRIDGE) LOG  🔍 Has timeout: true
 (NOBRIDGE) LOG  🔍 Camera keep-alive: true
 (NOBRIDGE) LOG  🔍 Timestamp: 2025-08-26T10:35:40.937Z
 (NOBRIDGE) LOG  🔍 === FACE DETECTION STATE CHANGED ===
 (NOBRIDGE) LOG  🔍 Face data: true
 (NOBRIDGE) LOG  🔍 Face detected: true
 (NOBRIDGE) LOG  🔍 Face quality: true
 (NOBRIDGE) LOG  🔍 Is detecting: true
 (NOBRIDGE) LOG  🔍 Has interval: true
 (NOBRIDGE) LOG  🔍 Camera keep-alive: true
 (NOBRIDGE) LOG  🔍 Timestamp: 2025-08-26T10:35:40.958Z
 (NOBRIDGE) LOG  🔍 === CAMERA KEEP-ALIVE EFFECT TRIGGERED ===
 (NOBRIDGE) LOG  🔍 Verification step changed to: detecting
 (NOBRIDGE) LOG  🔍 Current camera keep-alive state: true
 (NOBRIDGE) LOG  🔍 Camera keep-alive effect completed
 (NOBRIDGE) LOG  Face detection state: {"faceData": true, "faceDetected": true, "faceQuality": true, "isDetecting": true, "verificationStep": "detecting"}
 (NOBRIDGE) LOG  Moving to liveness detection step - good quality face detected
 (NOBRIDGE) LOG  🛑 stopDetection called: {"hasInterval": true, "hasTimeout": true, "isDetecting": false, "stack": "    at anonymous (http://192.168.0.108:8081/node_modules/expo-router/entry.bundle//&platform=android&dev=true&hot=false&transform.engine=hermes&transform.bytecode=1&transform.routerRoot=app&unstable_transformProfile=hermes-stable:392412:25)
    at anonymous (http://192.168.0.108:8081/node_modules/expo-router/entry.bundle//&platform=android&dev=true&hot=false&transform.engine=hermes&transform.bytecode=1&transform.routerRoot=app&unstable_transformProfile=hermes-stable:390704:24)
    at commitHookEffectListMount (http://192.168.0.108:8081/node_modules/expo-router/entry.bundle//&platform=android&dev=true&hot=false&transform.engine=hermes&transform.bytecode=1&transform.routerRoot=app&unstable_transformProfile=hermes-stable:31461:35)", "timestamp": "2025-08-26T10:35:40.977Z"}
 (NOBRIDGE) LOG  Detection interval cleared
 (NOBRIDGE) LOG  Detection timeout cleared
 (NOBRIDGE) LOG  🛑 Face detection stopped - isDetecting set to false
 (NOBRIDGE) LOG  🔍 === CAMERA isActive CALCULATION ===
 (NOBRIDGE) LOG  🔍 visible: true
 (NOBRIDGE) LOG  🔍 verificationStep: liveness
 (NOBRIDGE) LOG  🔍 isDetecting: false
 (NOBRIDGE) LOG  🔍 cameraKeepAlive: true
 (NOBRIDGE) LOG  🔍 Final isActive result: true
 (NOBRIDGE) LOG  🔍 Camera should be active - checking persistence state...
 (NOBRIDGE) LOG  Camera onInitialized called
 (NOBRIDGE) LOG  🔍 === isDetecting STATE CHANGED ===
 (NOBRIDGE) LOG  🔍 New value: false
 (NOBRIDGE) LOG  🔍 Has interval: false
 (NOBRIDGE) LOG  🔍 Has timeout: false
 (NOBRIDGE) LOG  🔍 Camera keep-alive: true
 (NOBRIDGE) LOG  🔍 Timestamp: 2025-08-26T10:35:41.146Z
 (NOBRIDGE) LOG  🔍 === FACE DETECTION STATE CHANGED ===
 (NOBRIDGE) LOG  🔍 Face data: true
 (NOBRIDGE) LOG  🔍 Face detected: true
 (NOBRIDGE) LOG  🔍 Face quality: true
 (NOBRIDGE) LOG  🔍 Is detecting: false
 (NOBRIDGE) LOG  🔍 Has interval: false
 (NOBRIDGE) LOG  🔍 Camera keep-alive: true
 (NOBRIDGE) LOG  🔍 Timestamp: 2025-08-26T10:35:41.168Z
 (NOBRIDGE) LOG  🔍 === CAMERA KEEP-ALIVE EFFECT TRIGGERED ===
 (NOBRIDGE) LOG  🔍 Verification step changed to: liveness
 (NOBRIDGE) LOG  🔍 Current camera keep-alive state: true
 (NOBRIDGE) LOG  🔍 Camera keep-alive effect completed
 (NOBRIDGE) LOG  ⏰ Starting countdown timer: 5
 (NOBRIDGE) LOG  Face detection state: {"faceData": true, "faceDetected": true, "faceQuality": true, "isDetecting": false, "verificationStep": "liveness"}
 (NOBRIDGE) LOG  ⚠️ Liveness timeout but face detected - proceeding to capture (ultra-forgiving)
 (NOBRIDGE) LOG  🔒 Keeping camera active during transition to prevent native view detachment
 (NOBRIDGE) LOG  🔍 Stabilizing camera for final capture...
 (NOBRIDGE) LOG  👁️ Starting liveness detection...
 (NOBRIDGE) LOG  👁️ Liveness detection started successfully
 (NOBRIDGE) LOG  Camera started - ensuring detection is running
 (NOBRIDGE) LOG  🔍 === CAMERA isActive CALCULATION ===
 (NOBRIDGE) LOG  🔍 visible: true
 (NOBRIDGE) LOG  🔍 verificationStep: capturing
 (NOBRIDGE) LOG  🔍 isDetecting: false
 (NOBRIDGE) LOG  🔍 cameraKeepAlive: true
 (NOBRIDGE) LOG  🔍 Final isActive result: true
 (NOBRIDGE) LOG  🔍 Camera should be active - checking persistence state...
 (NOBRIDGE) LOG  👁️ Face data effect triggered: {"faceDataTimestamp": 1756204526489, "hasFaceData": true, "isLivenessActive": true}
 (NOBRIDGE) LOG  👁️ Processing face data for liveness detection
 (NOBRIDGE) LOG  👁️ processFaceData called: {"faceDataDetails": {"leftEye": 0.9965924024581909, "rightEye": 0.998312771320343, "timestamp": 1756204526489}, "hasFaceData": true, "isLivenessActive": true}
 (NOBRIDGE) LOG  👁️ Processing liveness data: {"average": "0.997", "eyeClosedThreshold": 0.98, "eyeOpenThreshold": 0.995, "historyLength": 1, "leftEye": "0.997", "rightEye": "0.998"}
 (NOBRIDGE) LOG  👁️ Analyzing blink pattern in history: {"historyLength": 1, "minRequired": 5}
 (NOBRIDGE) LOG  👁️ Liveness score calculation: {"blinkCount": 0, "blinkScore": 0, "historyLength": 1, "minRequired": 0.1, "movementScore": "0.000", "overallScore": "0.020", "timeScore": "0.100"}
 (NOBRIDGE) LOG  🔍 === CAMERA KEEP-ALIVE EFFECT TRIGGERED ===
 (NOBRIDGE) LOG  🔍 Verification step changed to: capturing
 (NOBRIDGE) LOG  🔍 Current camera keep-alive state: true
 (NOBRIDGE) LOG  🔍 Camera keep-alive effect completed
 (NOBRIDGE) LOG  Face detection state: {"faceData": true, "faceDetected": true, "faceQuality": true, "isDetecting": false, "verificationStep": "capturing"}
 (NOBRIDGE) LOG  Camera initialized - connecting reference to face detection hook
 (NOBRIDGE) LOG  🔍 === SETTING CAMERA REFERENCE ===
 (NOBRIDGE) LOG  🔍 Camera component exists: true
 (NOBRIDGE) LOG  🔍 Component type: object
 (NOBRIDGE) LOG  🔍 Has component: true
 (NOBRIDGE) LOG  🔍 Component methods: ["props", "context", "refs", "updater", "displayName", "isNativeViewMounted", "lastUIRotation", "rotationHelper", "onViewReady", "onAverageFpsChanged", "onInitialized", "onStarted", "onStopped", "onPreviewStarted", "onPreviewStopped", "onShutter", "onOutputOrientationChanged", "onPreviewOrientationChanged", "onError", "onCodeScanned", "ref", "lastFrameProcessor", "state", "_reactInternals", "_reactInternalInstance"]
 (NOBRIDGE) LOG  🔍 Has takePhoto method: true
 (NOBRIDGE) LOG  🔍 Camera reference stored in persistent ref
 (NOBRIDGE) LOG  ✅ Camera reference set successfully: {"cameraRefType": "object", "hasCameraRef": true, "hasTakePhotoMethod": true, "persistentRefState": "valid"}
 (NOBRIDGE) LOG  🔍 === CAMERA isActive CALCULATION ===
 (NOBRIDGE) LOG  🔍 visible: true
 (NOBRIDGE) LOG  🔍 verificationStep: capturing
 (NOBRIDGE) LOG  🔍 isDetecting: false
 (NOBRIDGE) LOG  🔍 cameraKeepAlive: true
 (NOBRIDGE) LOG  🔍 Final isActive result: true
 (NOBRIDGE) LOG  🔍 Camera should be active - checking persistence state...
 (NOBRIDGE) LOG  🔍 Proactively monitoring camera state...
 (NOBRIDGE) LOG  🔍 === CAMERA STATE MONITORING ===
 (NOBRIDGE) LOG  🔍 Camera ref exists: true
 (NOBRIDGE) LOG  🔍 Persistent ref exists: true
 (NOBRIDGE) LOG  🔍 Camera ref state: valid
 (NOBRIDGE) LOG  🔍 Camera state monitoring: {"hasTakePhoto": true, "isActive": true}
 (NOBRIDGE) LOG  ✅ Camera state is healthy - proceeding with capture
 (NOBRIDGE) LOG  🔍 === COMPREHENSIVE CAMERA STATE VALIDATION ===
 (NOBRIDGE) LOG  🔍 Camera ref exists: true
 (NOBRIDGE) LOG  🔍 Camera ref type: object
 (NOBRIDGE) LOG  🔍 Camera methods available: ["props", "context", "refs", "updater", "displayName", "isNativeViewMounted", "lastUIRotation", "rotationHelper", "onViewReady", "onAverageFpsChanged", "onInitialized", "onStarted", "onStopped", "onPreviewStarted", "onPreviewStopped", "onShutter", "onOutputOrientationChanged", "onPreviewOrientationChanged", "onError", "onCodeScanned", "ref", "lastFrameProcessor", "state", "_reactInternals", "_reactInternalInstance"]
 (NOBRIDGE) LOG  🔍 Has takePhoto method: true
 (NOBRIDGE) LOG  🔍 Camera props: {"audio": false, "device": {"formats": [[Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object]], "hardwareLevel": "full", "hasFlash": false, "hasTorch": false, "id": "1", "isMultiCam": false, "maxExposure": 24, "maxZoom": 10, "minExposure": -24, "minFocusDistance": 0, "minZoom": 1, "name": "1 (FRONT) androidx.camera.camera2", "neutralZoom": 1, "physicalDevices": ["wide-angle-camera"], "position": "front", "sensorOrientation": "landscape-right", "supportsFocus": true, "supportsLowLightBoost": false, "supportsRawCapture": false}, "frameProcessor": {"frameProcessor": [Function withFrameRefCountingTs1], "type": "readonly"}, "isActive": true, "onError": [Function onError], "onInitialized": [Function onInitialized], "onStarted": [Function onStarted], "photo": true, "style": {"height": "100%", "width": "100%"}, "video": false}
 (NOBRIDGE) LOG  🔍 Camera state: {"averageFpsSamples": [], "isRecordingWithFlash": false}
 (NOBRIDGE) LOG  🔍 Camera display name: Camera
 (NOBRIDGE) LOG  ✅ Camera validation passed - proceeding with capture
 (NOBRIDGE) LOG  capturePhoto called with: {"cameraRefCurrent": {"_reactInternalInstance": {}, "_reactInternals": {"_debugHookTypes": null, "_debugInfo": null, "_debugNeedsRemount": false, "_debugOwner": [FiberNode], "actualDuration": 0.2608329951763153, "actualStartTime": 140582777.389703, "alternate": [FiberNode], "child": [FiberNode], "childLanes": 0, "deletions": null, "dependencies": null, "elementType": [Function Camera], "flags": 2097157, "index": 0, "key": "2", "lanes": 0, "memoizedProps": [Object], "memoizedState": [Object], "mode": 3, "pendingProps": [Object], "ref": [Object], "refCleanup": null, "return": [FiberNode], "selfBaseDuration": 0.19651001691818237, "sibling": [FiberNode], "stateNode": [Circular], "subtreeFlags": 2097152, "tag": 1, "treeBaseDuration": 0.21250000596046448, "type": [Function Camera], "updateQueue": [Object]}, "context": {}, "displayName": "Camera", "isNativeViewMounted": true, "lastFrameProcessor": [Function withFrameRefCountingTs1], "lastUIRotation": 0, "onAverageFpsChanged": [Function bound onAverageFpsChanged], "onCodeScanned": [Function bound onCodeScanned], "onError": [Function bound onError], "onInitialized": [Function bound onInitialized], "onOutputOrientationChanged": [Function bound onOutputOrientationChanged], "onPreviewOrientationChanged": [Function bound onPreviewOrientationChanged], "onPreviewStarted": [Function bound onPreviewStarted], "onPreviewStopped": [Function bound onPreviewStopped], "onShutter": [Function bound onShutter], "onStarted": [Function bound onStarted], "onStopped": [Function bound onStopped], "onViewReady": [Function bound onViewReady], "props": {"audio": false, "device": [Object], "frameProcessor": [Object], "isActive": true, "onError": [Function onError], "onInitialized": [Function onInitialized], "onStarted": [Function onStarted], "photo": true, "style": [Object], "video": false}, "ref": {"current": [ReactFabricHostComponent]}, "refs": {}, "rotationHelper": {"outputOrientation": "portrait", "previewOrientation": "portrait"}, "state": {"averageFpsSamples": [Array], "isRecordingWithFlash": false}, "updater": {"enqueueForceUpdate": [Function enqueueForceUpdate], "enqueueReplaceState": [Function enqueueReplaceState], "enqueueSetState": [Function enqueueSetState], "isMounted": [Function isMounted]}}, "hasCameraRef": true, "hasTakePhotoMethod": true, "isInitialized": true}
 (NOBRIDGE) LOG  Capturing photo with validated face...
 (NOBRIDGE) LOG  🔍 Validating camera state before final capture...
 (NOBRIDGE) LOG  ✅ Camera validation successful on attempt 1
 (NOBRIDGE) LOG  📸 Final camera state validation before photo capture...
 (NOBRIDGE) LOG  ✅ Photo capture successful: {"height": 1200, "isMirrored": true, "isRawPhoto": false, "orientation": "portrait", "path": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy5349883437367872094.jpg", "width": 1600}
 (NOBRIDGE) LOG  🔍 === CAMERA KEEP-ALIVE EFFECT TRIGGERED ===
 (NOBRIDGE) LOG  🔍 Verification step changed to: processing
 (NOBRIDGE) LOG  🔍 Current camera keep-alive state: true
 (NOBRIDGE) LOG  🔍 Camera keep-alive effect completed
 (NOBRIDGE) LOG  Face detection state: {"faceData": true, "faceDetected": true, "faceQuality": true, "isDetecting": false, "verificationStep": "processing"}
 (NOBRIDGE) WARN  AES encryption failed, falling back to Expo crypto: [TypeError: 0, _reactNativeAesCrypto.encrypt is not a function (it is undefined)]
 (NOBRIDGE) LOG  Face profile cached for user 7
 (NOBRIDGE) LOG  Face profile stored successfully for user: 7
 (NOBRIDGE) LOG  🛡️ Detection active flag reset - allowing cleanup
 (NOBRIDGE) LOG  🔍 === CAMERA KEEP-ALIVE EFFECT TRIGGERED ===
 (NOBRIDGE) LOG  🔍 Verification step changed to: success
 (NOBRIDGE) LOG  🔍 Current camera keep-alive state: true
 (NOBRIDGE) LOG  🔒 Keeping camera active for multi-angle registration...
 (NOBRIDGE) LOG  🔍 Camera keep-alive effect completed
 (NOBRIDGE) LOG  Face detection state: {"faceData": true, "faceDetected": true, "faceQuality": true, "isDetecting": false, "verificationStep": "success"}
 (NOBRIDGE) LOG  Modal visible - verification already completed successfully, not restarting
 (NOBRIDGE) LOG  Modal visible for multi-angle registration - resetting state for next angle
 (NOBRIDGE) LOG  🔄 Resetting modal state for next angle registration...
 (NOBRIDGE) LOG  ✅ Modal state reset complete for next angle
 (NOBRIDGE) LOG  🔍 === CAMERA KEEP-ALIVE EFFECT TRIGGERED ===
 (NOBRIDGE) LOG  🔍 Verification step changed to: initializing
 (NOBRIDGE) LOG  🔍 Current camera keep-alive state: true
 (NOBRIDGE) LOG  🔍 Camera keep-alive effect completed
 (NOBRIDGE) LOG  Face detection state: {"faceData": true, "faceDetected": true, "faceQuality": true, "isDetecting": false, "verificationStep": "initializing"}
 (NOBRIDGE) LOG  Modal visible - starting verification process
 (NOBRIDGE) LOG  🛡️ Detection active flag set - preventing modal cleanup
 (NOBRIDGE) LOG  🚀 Starting verification process for next angle...
 (NOBRIDGE) LOG  ⚠️ Camera reference not available - starting verification anyway...
 (NOBRIDGE) LOG  🛡️ Detection active flag set - preventing modal cleanup
 (NOBRIDGE) LOG  🚀 Starting periodic face detection with ML Kit...
 (NOBRIDGE) LOG  🧪 Testing ML Kit detector before starting detection...
 (NOBRIDGE) LOG  ✅ ML Kit detector is ready and has detectFaces method
 (NOBRIDGE) LOG  📊 Setting isDetecting to true and starting interval...
 (NOBRIDGE) LOG  📊 Face detection state updated: {"faceData": false, "faceDetected": false, "faceQuality": undefined, "isDetecting": true, "verificationStep": "detecting"}
 (NOBRIDGE) LOG  ⏰ Starting detection interval...
 (NOBRIDGE) LOG  ✅ Face detection interval started successfully
 (NOBRIDGE) LOG  📊 Face detection state: {"faceData": false, "faceDetected": false, "faceQuality": undefined, "isDetecting": true, "verificationStep": "detecting"}
 (NOBRIDGE) LOG  🔍 === CAMERA isActive CALCULATION ===
 (NOBRIDGE) LOG  🔍 visible: true
 (NOBRIDGE) LOG  🔍 verificationStep: detecting
 (NOBRIDGE) LOG  🔍 isDetecting: true
 (NOBRIDGE) LOG  🔍 cameraKeepAlive: true
 (NOBRIDGE) LOG  🔍 Final isActive result: true
 (NOBRIDGE) LOG  🔍 Camera should be active - checking persistence state...
 (NOBRIDGE) LOG  🔍 === isDetecting STATE CHANGED ===
 (NOBRIDGE) LOG  🔍 New value: true
 (NOBRIDGE) LOG  🔍 Has interval: true
 (NOBRIDGE) LOG  🔍 Has timeout: true
 (NOBRIDGE) LOG  🔍 Camera keep-alive: true
 (NOBRIDGE) LOG  🔍 Timestamp: 2025-08-26T10:35:44.459Z
 (NOBRIDGE) LOG  🔍 === FACE DETECTION STATE CHANGED ===
 (NOBRIDGE) LOG  🔍 Face data: true
 (NOBRIDGE) LOG  🔍 Face detected: true
 (NOBRIDGE) LOG  🔍 Face quality: true
 (NOBRIDGE) LOG  🔍 Is detecting: true
 (NOBRIDGE) LOG  🔍 Has interval: true
 (NOBRIDGE) LOG  🔍 Camera keep-alive: true
 (NOBRIDGE) LOG  🔍 Timestamp: 2025-08-26T10:35:44.480Z
 (NOBRIDGE) LOG  🔍 === CAMERA KEEP-ALIVE EFFECT TRIGGERED ===
 (NOBRIDGE) LOG  🔍 Verification step changed to: detecting
 (NOBRIDGE) LOG  🔍 Current camera keep-alive state: true
 (NOBRIDGE) LOG  🔍 Camera keep-alive effect completed
 (NOBRIDGE) LOG  Face detection state: {"faceData": true, "faceDetected": true, "faceQuality": true, "isDetecting": true, "verificationStep": "detecting"}
 (NOBRIDGE) LOG  Moving to liveness detection step - good quality face detected
 (NOBRIDGE) LOG  🛑 stopDetection called: {"hasInterval": true, "hasTimeout": true, "isDetecting": false, "stack": "    at anonymous (http://192.168.0.108:8081/node_modules/expo-router/entry.bundle//&platform=android&dev=true&hot=false&transform.engine=hermes&transform.bytecode=1&transform.routerRoot=app&unstable_transformProfile=hermes-stable:392412:25)
    at anonymous (http://192.168.0.108:8081/node_modules/expo-router/entry.bundle//&platform=android&dev=true&hot=false&transform.engine=hermes&transform.bytecode=1&transform.routerRoot=app&unstable_transformProfile=hermes-stable:390704:24)
    at commitHookEffectListMount (http://192.168.0.108:8081/node_modules/expo-router/entry.bundle//&platform=android&dev=true&hot=false&transform.engine=hermes&transform.bytecode=1&transform.routerRoot=app&unstable_transformProfile=hermes-stable:31461:35)", "timestamp": "2025-08-26T10:35:44.498Z"}
 (NOBRIDGE) LOG  Detection interval cleared
 (NOBRIDGE) LOG  Detection timeout cleared
 (NOBRIDGE) LOG  🛑 Face detection stopped - isDetecting set to false
 (NOBRIDGE) LOG  🔍 === CAMERA isActive CALCULATION ===
 (NOBRIDGE) LOG  🔍 visible: true
 (NOBRIDGE) LOG  🔍 verificationStep: liveness
 (NOBRIDGE) LOG  🔍 isDetecting: false
 (NOBRIDGE) LOG  🔍 cameraKeepAlive: true
 (NOBRIDGE) LOG  🔍 Final isActive result: true
 (NOBRIDGE) LOG  🔍 Camera should be active - checking persistence state...
 (NOBRIDGE) LOG  Camera onInitialized called
 (NOBRIDGE) LOG  🔍 === isDetecting STATE CHANGED ===
 (NOBRIDGE) LOG  🔍 New value: false
 (NOBRIDGE) LOG  🔍 Has interval: false
 (NOBRIDGE) LOG  🔍 Has timeout: false
 (NOBRIDGE) LOG  🔍 Camera keep-alive: true
 (NOBRIDGE) LOG  🔍 Timestamp: 2025-08-26T10:35:44.661Z
 (NOBRIDGE) LOG  🔍 === FACE DETECTION STATE CHANGED ===
 (NOBRIDGE) LOG  🔍 Face data: true
 (NOBRIDGE) LOG  🔍 Face detected: true
 (NOBRIDGE) LOG  🔍 Face quality: true
 (NOBRIDGE) LOG  🔍 Is detecting: false
 (NOBRIDGE) LOG  🔍 Has interval: false
 (NOBRIDGE) LOG  🔍 Camera keep-alive: true
 (NOBRIDGE) LOG  🔍 Timestamp: 2025-08-26T10:35:44.684Z
 (NOBRIDGE) LOG  🔍 === CAMERA KEEP-ALIVE EFFECT TRIGGERED ===
 (NOBRIDGE) LOG  🔍 Verification step changed to: liveness
 (NOBRIDGE) LOG  🔍 Current camera keep-alive state: true
 (NOBRIDGE) LOG  🔍 Camera keep-alive effect completed
 (NOBRIDGE) LOG  ⏰ Starting countdown timer: 5
 (NOBRIDGE) LOG  Face detection state: {"faceData": true, "faceDetected": true, "faceQuality": true, "isDetecting": false, "verificationStep": "liveness"}
 (NOBRIDGE) LOG  Camera started - ensuring detection is running
 (NOBRIDGE) LOG  👁️ Starting liveness detection...
 (NOBRIDGE) LOG  👁️ Liveness detection started successfully
 (NOBRIDGE) LOG  🔍 === CAMERA isActive CALCULATION ===
 (NOBRIDGE) LOG  🔍 visible: true
 (NOBRIDGE) LOG  🔍 verificationStep: liveness
 (NOBRIDGE) LOG  🔍 isDetecting: false
 (NOBRIDGE) LOG  🔍 cameraKeepAlive: true
 (NOBRIDGE) LOG  🔍 Final isActive result: true
 (NOBRIDGE) LOG  🔍 Camera should be active - checking persistence state...
 (NOBRIDGE) LOG  ⏰ Starting countdown timer: 5
 (NOBRIDGE) LOG  Camera initialized - connecting reference to face detection hook
 (NOBRIDGE) LOG  🔍 === SETTING CAMERA REFERENCE ===
 (NOBRIDGE) LOG  🔍 Camera component exists: true
 (NOBRIDGE) LOG  🔍 Component type: object
 (NOBRIDGE) LOG  🔍 Has component: true
 (NOBRIDGE) LOG  🔍 Component methods: ["props", "context", "refs", "updater", "displayName", "isNativeViewMounted", "lastUIRotation", "rotationHelper", "onViewReady", "onAverageFpsChanged", "onInitialized", "onStarted", "onStopped", "onPreviewStarted", "onPreviewStopped", "onShutter", "onOutputOrientationChanged", "onPreviewOrientationChanged", "onError", "onCodeScanned", "ref", "lastFrameProcessor", "state", "_reactInternals", "_reactInternalInstance"]
 (NOBRIDGE) LOG  🔍 Has takePhoto method: true
 (NOBRIDGE) LOG  🔍 Camera reference stored in persistent ref
 (NOBRIDGE) LOG  ✅ Camera reference set successfully: {"cameraRefType": "object", "hasCameraRef": true, "hasTakePhotoMethod": true, "persistentRefState": "valid"}
 (NOBRIDGE) LOG  Face registration successful for angle: 2 {"confidence": 1, "faceEncoding": "uB4lPmoDvT6Pwt0+pw0UP64gfz9tkX8/KC9vvSuQfz/Rb6M89fJ/PzIrPj08zB88HwXJPdlxrj1Rdt48ljudPVLV8DwFIgM9qOxwO3Hhpj0sr6I82PGSPSLiGTwLr+g8dueoPAEkaT32Uq498PsxPUhbHjwPjoo9o4mgPdJdJj2IrrA7Bpx3Pb0iJz18+D495CCpPG8+tj0JuxM9Q/ZvPR/Yij0AXVw9yPo/PZbBmj0L5yA9BShRPZkFjD3RPaI9DtFLPV7ktT0HnGc9L2pJPaBG4Dxpo0098TRlPfzCFj2iJwU9M5pkPeqTrj27RLo9JTsKPGpq+jxIfoQ8lj8ZPVt7WD2agYY9aGSdPccSPT2FKrw95/g8PdhU0zza24Q8IsdBPIk4ZDsmf7g9VQKWPcPftT1ncXs94hgXPZD/Vz2Mu7k9qVuwPUfEZT1bQhM9HzE/O/coGT2I15s83CKxPQNMTD1Gzf08c323PMLqdjyRnb09Ic+RPZisqT0HyJo95vcIPSlGgj2qLrk9xaaHPf1MDT3+bCg82wosPWO9lTxvoYc7vwvBPf1flT3WP409aOY8PUcQKj3DzUc8pf1oPQSaeT2ed6Q96FU+PV6VDj0rRoY9NfOpPSDauTsRZGE9wuWNPQ9hbjyqxpg9AHGRPZwhdTzk2YE9QfHkPEdOrz0=", "isOffline": false, "livenessDetected": false, "success": true, "timestamp": 2025-08-26T10:35:42.962Z}
 (NOBRIDGE) LOG  🧹 === CLEANING UP FACE DETECTION ON UNMOUNT ===
 (NOBRIDGE) LOG  🧹 Cleaning up main camera ref
 (NOBRIDGE) LOG  🧹 Cleaning up persistent camera ref
 (NOBRIDGE) LOG  ✅ Face detection cleanup completed
 (NOBRIDGE) LOG  🛡️ Preventing cleanup during active detection
 (NOBRIDGE) ERROR  Error starting verification process: [Error: Failed to start face detection]
 (NOBRIDGE) LOG  🔍 === isDetecting STATE CHANGED ===
 (NOBRIDGE) LOG  🔍 New value: false
 (NOBRIDGE) LOG  🔍 Has interval: false
 (NOBRIDGE) LOG  🔍 Has timeout: false
 (NOBRIDGE) LOG  🔍 Camera keep-alive: false
 (NOBRIDGE) LOG  🔍 Timestamp: 2025-08-26T10:35:45.692Z
 (NOBRIDGE) LOG  🔍 === FACE DETECTION STATE CHANGED ===
 (NOBRIDGE) LOG  🔍 Face data: false
 (NOBRIDGE) LOG  🔍 Face detected: false
 (NOBRIDGE) LOG  🔍 Face quality: false
 (NOBRIDGE) LOG  🔍 Is detecting: false
 (NOBRIDGE) LOG  🔍 Has interval: false
 (NOBRIDGE) LOG  🔍 Camera keep-alive: false
 (NOBRIDGE) LOG  🔍 Timestamp: 2025-08-26T10:35:45.721Z
 (NOBRIDGE) LOG  👁️ Face data effect triggered: {"faceDataTimestamp": undefined, "hasFaceData": false, "isLivenessActive": false}
 (NOBRIDGE) LOG  👁️ Not processing face data: {"reason": "No face data"}
 (NOBRIDGE) LOG  🔍 === CAMERA KEEP-ALIVE EFFECT TRIGGERED ===
 (NOBRIDGE) LOG  🔍 Verification step changed to: initializing
 (NOBRIDGE) LOG  🔍 Current camera keep-alive state: false
 (NOBRIDGE) LOG  🔍 Camera keep-alive effect completed
 (NOBRIDGE) LOG  Modal hidden - stopping all detection processes
 (NOBRIDGE) LOG  🛑 stopDetection called: {"hasInterval": false, "hasTimeout": false, "isDetecting": false, "stack": "    at anonymous (http://192.168.0.108:8081/node_modules/expo-router/entry.bundle//&platform=android&dev=true&hot=false&transform.engine=hermes&transform.bytecode=1&transform.routerRoot=app&unstable_transformProfile=hermes-stable:392412:25)
    at anonymous (http://192.168.0.108:8081/node_modules/expo-router/entry.bundle//&platform=android&dev=true&hot=false&transform.engine=hermes&transform.bytecode=1&transform.routerRoot=app&unstable_transformProfile=hermes-stable:390818:22)
    at commitHookEffectListMount (http://192.168.0.108:8081/node_modules/expo-router/entry.bundle//&platform=android&dev=true&hot=false&transform.engine=hermes&transform.bytecode=1&transform.routerRoot=app&unstable_transformProfile=hermes-stable:31461:35)", "timestamp": "2025-08-26T10:35:45.745Z"}
 (NOBRIDGE) LOG  🛑 Face detection stopped - isDetecting set to false
 (NOBRIDGE) LOG  👁️ Stopping liveness detection...
 (NOBRIDGE) LOG  👁️ Liveness detection stopped
 (NOBRIDGE) LOG  Modal hidden - resetting verification state (not successful)
 (NOBRIDGE) WARN  ⚠️ Failed to connect camera reference after timeout
 (NOBRIDGE) LOG  Face detection state: {"faceData": false, "faceDetected": false, "faceQuality": undefined, "isDetecting": false, "verificationStep": "initializing"}
 (NOBRIDGE) LOG  Modal visible - starting verification process
 (NOBRIDGE) LOG  🛡️ Detection active flag set - preventing modal cleanup
(NOBRIDGE) LOG  Requesting camera permissions...
 (NOBRIDGE) LOG  Face detection state: {"faceData": false, "faceDetected": false, "faceQuality": undefined, "isDetecting": false, "verificationStep": "initializing"}
 (NOBRIDGE) LOG  Modal visible - starting verification process
 (NOBRIDGE) LOG  🛡️ Detection active flag set - preventing modal cleanup
 (NOBRIDGE) LOG  App state changed: active -> background
 (NOBRIDGE) LOG  App went to background, keeping token refresh timer active
 (NOBRIDGE) LOG  Face detection app state changed: active -> background
 (NOBRIDGE) LOG  Liveness detection app state changed: active -> background
 (NOBRIDGE) LOG  App went to background, pausing liveness detection
 (NOBRIDGE) LOG  App state changed: background -> active
 (NOBRIDGE) LOG  App has come to the foreground!
 (NOBRIDGE) LOG  Face detection app state changed: background -> active
 (NOBRIDGE) LOG  Liveness detection app state changed: background -> active
 (NOBRIDGE) LOG  Initializing ML Kit Face Detection...
 (NOBRIDGE) LOG  ML Kit detector available, checking methods: ["status", "error", "options"]
 (NOBRIDGE) LOG  ML Kit Face Detection initialized successfully with config: {"classificationMode": true, "contourMode": false, "isTrackingEnabled": true, "landmarkMode": true, "minFaceSize": 0.1, "performanceMode": "fast"}
 (NOBRIDGE) LOG  Testing ML Kit detector...
 (NOBRIDGE) LOG  ML Kit detector test completed successfully
 (NOBRIDGE) LOG  Initializing camera with performance mode: fast
 (NOBRIDGE) LOG  🚀 Starting periodic face detection with ML Kit...
 (NOBRIDGE) LOG  🧪 Testing ML Kit detector before starting detection...
 (NOBRIDGE) LOG  ✅ ML Kit detector is ready and has detectFaces method
 (NOBRIDGE) LOG  📊 Setting isDetecting to true and starting interval...
 (NOBRIDGE) LOG  📊 Face detection state updated: {"faceData": false, "faceDetected": false, "faceQuality": undefined, "isDetecting": true, "verificationStep": "detecting"}
 (NOBRIDGE) LOG  ⏰ Starting detection interval...
 (NOBRIDGE) LOG  ✅ Face detection interval started successfully
 (NOBRIDGE) LOG  📊 Face detection state: {"faceData": false, "faceDetected": false, "faceQuality": undefined, "isDetecting": true, "verificationStep": "detecting"}
 (NOBRIDGE) LOG  🔄 Face detection already running (interval active), skipping start request
 (NOBRIDGE) LOG  Face detection state: {"faceData": false, "faceDetected": false, "faceQuality": undefined, "isDetecting": false, "verificationStep": "initializing"}
 (NOBRIDGE) LOG  Modal visible - starting verification process
 (NOBRIDGE) LOG  🛡️ Detection active flag set - preventing modal cleanup
 (NOBRIDGE) LOG  🔍 === isDetecting STATE CHANGED ===
 (NOBRIDGE) LOG  🔍 New value: true
 (NOBRIDGE) LOG  🔍 Has interval: true
 (NOBRIDGE) LOG  🔍 Has timeout: true
 (NOBRIDGE) LOG  🔍 Camera keep-alive: false
 (NOBRIDGE) LOG  🔍 Timestamp: 2025-08-26T10:35:54.475Z
 (NOBRIDGE) LOG  🔍 === FACE DETECTION STATE CHANGED ===
 (NOBRIDGE) LOG  🔍 Face data: false
 (NOBRIDGE) LOG  🔍 Face detected: false
 (NOBRIDGE) LOG  🔍 Face quality: false
 (NOBRIDGE) LOG  🔍 Is detecting: true
 (NOBRIDGE) LOG  🔍 Has interval: true
 (NOBRIDGE) LOG  🔍 Camera keep-alive: false
 (NOBRIDGE) LOG  🔍 Timestamp: 2025-08-26T10:35:54.497Z
 (NOBRIDGE) LOG  Face detection state: {"faceData": false, "faceDetected": false, "faceQuality": undefined, "isDetecting": true, "verificationStep": "initializing"}
 (NOBRIDGE) LOG  Modal visible - starting verification process
 (NOBRIDGE) LOG  🛡️ Detection active flag set - preventing modal cleanup
 (NOBRIDGE) LOG  🔄 Detection interval triggered - calling processPeriodicFaceDetection...
 (NOBRIDGE) LOG  === MAIN FACE DETECTION PROCESS STARTED ===
 (NOBRIDGE) LOG  🔄 processPeriodicFaceDetection called: {"hasCamera": false, "hasMLKit": true, "isDetecting": false, "isMounted": true, "timestamp": "2025-08-26T10:35:54.652Z"}
 (NOBRIDGE) LOG  ❌ Skipping face detection - conditions not met: {"hasCamera": false, "hasMLKit": true, "isDetecting": false, "isMounted": true}
 (NOBRIDGE) LOG  🔍 Camera ref missing - detection will retry when camera is connected
 (NOBRIDGE) LOG  🔄 Detection interval triggered - calling processPeriodicFaceDetection...
 (NOBRIDGE) LOG  === MAIN FACE DETECTION PROCESS STARTED ===
 (NOBRIDGE) LOG  🔄 processPeriodicFaceDetection called: {"hasCamera": false, "hasMLKit": true, "isDetecting": false, "isMounted": true, "timestamp": "2025-08-26T10:35:54.961Z"}
 (NOBRIDGE) LOG  ❌ Skipping face detection - conditions not met: {"hasCamera": false, "hasMLKit": true, "isDetecting": false, "isMounted": true}
 (NOBRIDGE) LOG  🔍 Camera ref missing - detection will retry when camera is connected
 (NOBRIDGE) LOG  🔄 Detection interval triggered - calling processPeriodicFaceDetection...
 (NOBRIDGE) LOG  === MAIN FACE DETECTION PROCESS STARTED ===
 (NOBRIDGE) LOG  🔄 processPeriodicFaceDetection called: {"hasCamera": false, "hasMLKit": true, "isDetecting": false, "isMounted": true, "timestamp": "2025-08-26T10:35:55.269Z"}
 (NOBRIDGE) LOG  ❌ Skipping face detection - conditions not met: {"hasCamera": false, "hasMLKit": true, "isDetecting": false, "isMounted": true}
 (NOBRIDGE) LOG  🔍 Camera ref missing - detection will retry when camera is connected
 (NOBRIDGE) LOG  🔄 Face detection already running (interval active), skipping start request
 (NOBRIDGE) LOG  🔍 === CAMERA isActive CALCULATION ===
 (NOBRIDGE) LOG  🔍 visible: true
 (NOBRIDGE) LOG  🔍 verificationStep: detecting
 (NOBRIDGE) LOG  🔍 isDetecting: true
 (NOBRIDGE) LOG  🔍 cameraKeepAlive: false
 (NOBRIDGE) LOG  🔍 Final isActive result: true
 (NOBRIDGE) LOG  🔍 Camera should be active - checking persistence state...
 (NOBRIDGE) LOG  🔍 === CAMERA KEEP-ALIVE EFFECT TRIGGERED ===
 (NOBRIDGE) LOG  🔍 Verification step changed to: detecting
 (NOBRIDGE) LOG  🔍 Current camera keep-alive state: false
 (NOBRIDGE) LOG  🔍 Camera keep-alive effect completed
 (NOBRIDGE) LOG  Face detection state: {"faceData": false, "faceDetected": false, "faceQuality": undefined, "isDetecting": true, "verificationStep": "detecting"}
 (NOBRIDGE) LOG  🔄 Face detection already running (interval active), skipping start request
 (NOBRIDGE) LOG  🔄 Detection interval triggered - calling processPeriodicFaceDetection...
 (NOBRIDGE) LOG  === MAIN FACE DETECTION PROCESS STARTED ===
 (NOBRIDGE) LOG  🔄 processPeriodicFaceDetection called: {"hasCamera": false, "hasMLKit": true, "isDetecting": false, "isMounted": true, "timestamp": "2025-08-26T10:35:55.721Z"}
 (NOBRIDGE) LOG  ❌ Skipping face detection - conditions not met: {"hasCamera": false, "hasMLKit": true, "isDetecting": false, "isMounted": true}
 (NOBRIDGE) LOG  🔍 Camera ref missing - detection will retry when camera is connected
 (NOBRIDGE) LOG  Camera onInitialized called
 (NOBRIDGE) LOG  Camera started - ensuring detection is running
 (NOBRIDGE) LOG  🔍 === CAMERA isActive CALCULATION ===
 (NOBRIDGE) LOG  🔍 visible: true
 (NOBRIDGE) LOG  🔍 verificationStep: detecting
 (NOBRIDGE) LOG  🔍 isDetecting: true
 (NOBRIDGE) LOG  🔍 cameraKeepAlive: false
 (NOBRIDGE) LOG  🔍 Final isActive result: true
 (NOBRIDGE) LOG  🔍 Camera should be active - checking persistence state...
 (NOBRIDGE) LOG  🔄 Detection interval triggered - calling processPeriodicFaceDetection...
 (NOBRIDGE) LOG  === MAIN FACE DETECTION PROCESS STARTED ===
 (NOBRIDGE) LOG  🔄 processPeriodicFaceDetection called: {"hasCamera": false, "hasMLKit": true, "isDetecting": false, "isMounted": true, "timestamp": "2025-08-26T10:35:55.893Z"}
 (NOBRIDGE) LOG  ❌ Skipping face detection - conditions not met: {"hasCamera": false, "hasMLKit": true, "isDetecting": false, "isMounted": true}
 (NOBRIDGE) LOG  🔍 Camera ref missing - detection will retry when camera is connected
 (NOBRIDGE) LOG  Camera initialized - connecting reference to face detection hook
 (NOBRIDGE) LOG  🔍 === SETTING CAMERA REFERENCE ===
 (NOBRIDGE) LOG  🔍 Camera component exists: true
 (NOBRIDGE) LOG  🔍 Component type: object
 (NOBRIDGE) LOG  🔍 Has component: true
 (NOBRIDGE) LOG  🔍 Component methods: ["props", "context", "refs", "updater", "displayName", "isNativeViewMounted", "lastUIRotation", "rotationHelper", "onViewReady", "onAverageFpsChanged", "onInitialized", "onStarted", "onStopped", "onPreviewStarted", "onPreviewStopped", "onShutter", "onOutputOrientationChanged", "onPreviewOrientationChanged", "onError", "onCodeScanned", "ref", "lastFrameProcessor", "state", "_reactInternals", "_reactInternalInstance"]
 (NOBRIDGE) LOG  🔍 Has takePhoto method: true
 (NOBRIDGE) LOG  🔍 Camera reference stored in persistent ref
 (NOBRIDGE) LOG  ✅ Camera reference set successfully: {"cameraRefType": "object", "hasCameraRef": true, "hasTakePhotoMethod": true, "persistentRefState": "valid"}
 (NOBRIDGE) LOG  🔄 Camera connected during active detection - detection will now proceed
 (NOBRIDGE) LOG  🔄 Detection interval triggered - calling processPeriodicFaceDetection...
 (NOBRIDGE) LOG  === MAIN FACE DETECTION PROCESS STARTED ===
 (NOBRIDGE) LOG  🔄 processPeriodicFaceDetection called: {"hasCamera": true, "hasMLKit": true, "isDetecting": false, "isMounted": true, "timestamp": "2025-08-26T10:35:56.212Z"}
 (NOBRIDGE) LOG  ✅ Starting periodic face detection with enhanced photo processing...
 (NOBRIDGE) LOG  ✅ Camera is active and ready for photo capture
 (NOBRIDGE) ERROR  Frame processor error: {}
 (NOBRIDGE) LOG  📸 Attempting to capture photo for face detection...
 (NOBRIDGE) LOG  🔍 Camera state before photo capture: {"cameraMethods": ["props", "context", "refs", "updater", "displayName", "isNativeViewMounted", "lastUIRotation", "rotationHelper", "onViewReady", "onAverageFpsChanged", "onInitialized", "onStarted", "onStopped", "onPreviewStarted", "onPreviewStopped", "onShutter", "onOutputOrientationChanged", "onPreviewOrientationChanged", "onError", "onCodeScanned", "ref", "lastFrameProcessor", "state", "_reactInternals", "_reactInternalInstance"], "cameraRefExists": true, "hasTakePhoto": true, "isActive": true}
 (NOBRIDGE) LOG  ⚙️ Optimizing camera settings for ML Kit...
 (NOBRIDGE) LOG  🔄 Detection interval triggered - calling processPeriodicFaceDetection...
 (NOBRIDGE) LOG  === MAIN FACE DETECTION PROCESS STARTED ===
 (NOBRIDGE) LOG  🔄 processPeriodicFaceDetection called: {"hasCamera": true, "hasMLKit": true, "isDetecting": false, "isMounted": true, "timestamp": "2025-08-26T10:35:56.528Z"}
 (NOBRIDGE) LOG  ✅ Starting periodic face detection with enhanced photo processing...
 (NOBRIDGE) LOG  ✅ Camera is active and ready for photo capture
 (NOBRIDGE) ERROR  Frame processor error: {}
 (NOBRIDGE) LOG  📸 Attempting to capture photo for face detection...
 (NOBRIDGE) LOG  🔍 Camera state before photo capture: {"cameraMethods": ["props", "context", "refs", "updater", "displayName", "isNativeViewMounted", "lastUIRotation", "rotationHelper", "onViewReady", "onAverageFpsChanged", "onInitialized", "onStarted", "onStopped", "onPreviewStarted", "onPreviewStopped", "onShutter", "onOutputOrientationChanged", "onPreviewOrientationChanged", "onError", "onCodeScanned", "ref", "lastFrameProcessor", "state", "_reactInternals", "_reactInternalInstance"], "cameraRefExists": true, "hasTakePhoto": true, "isActive": true}
 (NOBRIDGE) LOG  ⚙️ Optimizing camera settings for ML Kit...
 (NOBRIDGE) LOG  🔄 Detection interval triggered - calling processPeriodicFaceDetection...
 (NOBRIDGE) LOG  === MAIN FACE DETECTION PROCESS STARTED ===
 (NOBRIDGE) LOG  🔄 processPeriodicFaceDetection called: {"hasCamera": true, "hasMLKit": true, "isDetecting": false, "isMounted": true, "timestamp": "2025-08-26T10:35:56.844Z"}
 (NOBRIDGE) LOG  ✅ Starting periodic face detection with enhanced photo processing...
 (NOBRIDGE) LOG  ✅ Camera is active and ready for photo capture
 (NOBRIDGE) LOG  ✅ Photo captured successfully: {"height": 1200, "path": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy3335985604477176892.jpg", "width": 1600}
 (NOBRIDGE) LOG  📁 Photo URI generated: file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy3335985604477176892.jpg
 (NOBRIDGE) LOG  Processing photo for ML Kit compatibility...
 (NOBRIDGE) LOG  Waiting for photo file to be fully written...
 (NOBRIDGE) LOG  📸 Attempting to capture photo for face detection...
 (NOBRIDGE) LOG  🔍 Camera state before photo capture: {"cameraMethods": ["props", "context", "refs", "updater", "displayName", "isNativeViewMounted", "lastUIRotation", "rotationHelper", "onViewReady", "onAverageFpsChanged", "onInitialized", "onStarted", "onStopped", "onPreviewStarted", "onPreviewStopped", "onShutter", "onOutputOrientationChanged", "onPreviewOrientationChanged", "onError", "onCodeScanned", "ref", "lastFrameProcessor", "state", "_reactInternals", "_reactInternalInstance"], "cameraRefExists": true, "hasTakePhoto": true, "isActive": true}
 (NOBRIDGE) LOG  ⚙️ Optimizing camera settings for ML Kit...
 (NOBRIDGE) LOG  🔄 Detection interval triggered - calling processPeriodicFaceDetection...
 (NOBRIDGE) LOG  === MAIN FACE DETECTION PROCESS STARTED ===
 (NOBRIDGE) LOG  🔄 processPeriodicFaceDetection called: {"hasCamera": true, "hasMLKit": true, "isDetecting": false, "isMounted": true, "timestamp": "2025-08-26T10:35:57.161Z"}
 (NOBRIDGE) LOG  ✅ Starting periodic face detection with enhanced photo processing...
 (NOBRIDGE) LOG  ✅ Camera is active and ready for photo capture
 (NOBRIDGE) LOG  ✅ Photo captured successfully: {"height": 1200, "path": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy3782866065544141752.jpg", "width": 1600}
 (NOBRIDGE) LOG  📁 Photo URI generated: file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy3782866065544141752.jpg
 (NOBRIDGE) LOG  Processing photo for ML Kit compatibility...
 (NOBRIDGE) LOG  Waiting for photo file to be fully written...
 (NOBRIDGE) LOG  📸 Attempting to capture photo for face detection...
 (NOBRIDGE) LOG  🔍 Camera state before photo capture: {"cameraMethods": ["props", "context", "refs", "updater", "displayName", "isNativeViewMounted", "lastUIRotation", "rotationHelper", "onViewReady", "onAverageFpsChanged", "onInitialized", "onStarted", "onStopped", "onPreviewStarted", "onPreviewStopped", "onShutter", "onOutputOrientationChanged", "onPreviewOrientationChanged", "onError", "onCodeScanned", "ref", "lastFrameProcessor", "state", "_reactInternals", "_reactInternalInstance"], "cameraRefExists": true, "hasTakePhoto": true, "isActive": true}
 (NOBRIDGE) LOG  ⚙️ Optimizing camera settings for ML Kit...
 (NOBRIDGE) LOG  Photo file verification: {"exists": true, "fileSize": 559792, "path": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy3335985604477176892.jpg"}
 (NOBRIDGE) LOG  Photo file verified successfully: {"path": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy3335985604477176892.jpg", "size": 559792, "uri": "file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy3335985604477176892.jpg"}
 (NOBRIDGE) LOG  Applying ML Kit photo processing...
 (NOBRIDGE) LOG  Photo file read successfully, content length: 746392
 (NOBRIDGE) LOG  ✅ Photo has valid image format header
 (NOBRIDGE) LOG  Additional delay for file system sync...
 (NOBRIDGE) LOG  🔄 Detection interval triggered - calling processPeriodicFaceDetection...
 (NOBRIDGE) LOG  === MAIN FACE DETECTION PROCESS STARTED ===
 (NOBRIDGE) LOG  🔄 processPeriodicFaceDetection called: {"hasCamera": true, "hasMLKit": true, "isDetecting": false, "isMounted": true, "timestamp": "2025-08-26T10:35:57.479Z"}
 (NOBRIDGE) LOG  ✅ Starting periodic face detection with enhanced photo processing...
 (NOBRIDGE) LOG  ✅ Camera is active and ready for photo capture
 (NOBRIDGE) LOG  ✅ Photo captured successfully: {"height": 1200, "path": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy8441243651766818304.jpg", "width": 1600}
 (NOBRIDGE) LOG  📁 Photo URI generated: file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy8441243651766818304.jpg
 (NOBRIDGE) LOG  Processing photo for ML Kit compatibility...
 (NOBRIDGE) LOG  Waiting for photo file to be fully written...
 (NOBRIDGE) LOG  📸 Attempting to capture photo for face detection...
 (NOBRIDGE) LOG  🔍 Camera state before photo capture: {"cameraMethods": ["props", "context", "refs", "updater", "displayName", "isNativeViewMounted", "lastUIRotation", "rotationHelper", "onViewReady", "onAverageFpsChanged", "onInitialized", "onStarted", "onStopped", "onPreviewStarted", "onPreviewStopped", "onShutter", "onOutputOrientationChanged", "onPreviewOrientationChanged", "onError", "onCodeScanned", "ref", "lastFrameProcessor", "state", "_reactInternals", "_reactInternalInstance"], "cameraRefExists": true, "hasTakePhoto": true, "isActive": true}
 (NOBRIDGE) LOG  ⚙️ Optimizing camera settings for ML Kit...
 (NOBRIDGE) LOG  Photo file verification: {"exists": true, "fileSize": 558387, "path": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy3782866065544141752.jpg"}
 (NOBRIDGE) LOG  Photo file verified successfully: {"path": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy3782866065544141752.jpg", "size": 558387, "uri": "file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy3782866065544141752.jpg"}
 (NOBRIDGE) LOG  Applying ML Kit photo processing...
 (NOBRIDGE) LOG  Photo file read successfully, content length: 744516
 (NOBRIDGE) LOG  ✅ Photo has valid image format header
 (NOBRIDGE) LOG  Additional delay for file system sync...
 (NOBRIDGE) LOG  🤖 Sending photo to ML Kit for face detection...
 (NOBRIDGE) LOG  🔍 ML Kit detector state before detection: {"availableMethods": ["status", "error", "options"], "detectorType": "object", "isInitialized": true, "photoPath": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy3335985604477176892.jpg", "photoUri": "file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy3335985604477176892.jpg"}
 (NOBRIDGE) LOG  ✅ Photo captured successfully: {"height": 1200, "path": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy3838651884089458252.jpg", "width": 1600}
 (NOBRIDGE) LOG  📁 Photo URI generated: file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy3838651884089458252.jpg
 (NOBRIDGE) LOG  Processing photo for ML Kit compatibility...
 (NOBRIDGE) LOG  Waiting for photo file to be fully written...
 (NOBRIDGE) LOG  🔄 Detection interval triggered - calling processPeriodicFaceDetection...
 (NOBRIDGE) LOG  === MAIN FACE DETECTION PROCESS STARTED ===
 (NOBRIDGE) LOG  🔄 processPeriodicFaceDetection called: {"hasCamera": true, "hasMLKit": true, "isDetecting": false, "isMounted": true, "timestamp": "2025-08-26T10:35:57.796Z"}
 (NOBRIDGE) LOG  ✅ Starting periodic face detection with enhanced photo processing...
 (NOBRIDGE) LOG  ✅ Camera is active and ready for photo capture
 (NOBRIDGE) ERROR  Frame processor error: {}
 (NOBRIDGE) LOG  📸 Attempting to capture photo for face detection...
 (NOBRIDGE) LOG  🔍 Camera state before photo capture: {"cameraMethods": ["props", "context", "refs", "updater", "displayName", "isNativeViewMounted", "lastUIRotation", "rotationHelper", "onViewReady", "onAverageFpsChanged", "onInitialized", "onStarted", "onStopped", "onPreviewStarted", "onPreviewStopped", "onShutter", "onOutputOrientationChanged", "onPreviewOrientationChanged", "onError", "onCodeScanned", "ref", "lastFrameProcessor", "state", "_reactInternals", "_reactInternalInstance"], "cameraRefExists": true, "hasTakePhoto": true, "isActive": true}
 (NOBRIDGE) LOG  ⚙️ Optimizing camera settings for ML Kit...
 (NOBRIDGE) LOG  🤖 Sending photo to ML Kit for face detection...
 (NOBRIDGE) LOG  🔍 ML Kit detector state before detection: {"availableMethods": ["status", "error", "options"], "detectorType": "object", "isInitialized": true, "photoPath": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy3782866065544141752.jpg", "photoUri": "file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy3782866065544141752.jpg"}
 (NOBRIDGE) LOG  Photo file verification: {"exists": true, "fileSize": 561034, "path": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy8441243651766818304.jpg"}
 (NOBRIDGE) LOG  Photo file verified successfully: {"path": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy8441243651766818304.jpg", "size": 561034, "uri": "file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy8441243651766818304.jpg"}
 (NOBRIDGE) LOG  Applying ML Kit photo processing...
 (NOBRIDGE) LOG  Photo file read successfully, content length: 748048
 (NOBRIDGE) LOG  ✅ Photo has valid image format header
 (NOBRIDGE) LOG  Additional delay for file system sync...
 (NOBRIDGE) LOG  🔄 Detection interval triggered - calling processPeriodicFaceDetection...
 (NOBRIDGE) LOG  === MAIN FACE DETECTION PROCESS STARTED ===
 (NOBRIDGE) LOG  🔄 processPeriodicFaceDetection called: {"hasCamera": true, "hasMLKit": true, "isDetecting": false, "isMounted": true, "timestamp": "2025-08-26T10:35:58.111Z"}
 (NOBRIDGE) LOG  ✅ Starting periodic face detection with enhanced photo processing...
 (NOBRIDGE) LOG  ✅ Camera is active and ready for photo capture
 (NOBRIDGE) LOG  ✅ Photo captured successfully: {"height": 1200, "path": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy3610410093781359892.jpg", "width": 1600}
 (NOBRIDGE) LOG  📁 Photo URI generated: file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy3610410093781359892.jpg
 (NOBRIDGE) LOG  Processing photo for ML Kit compatibility...
 (NOBRIDGE) LOG  Waiting for photo file to be fully written...
 (NOBRIDGE) LOG  ✅ ML Kit detection completed successfully: {"faceCount": 1, "faces": [{"contours": [Array], "frame": [Object], "headEulerAngleX": -7.190428733825684, "headEulerAngleY": 2.8953702449798584, "headEulerAngleZ": -4.466110706329346, "landmarks": [Array], "leftEyeOpenProbability": 0.9974813461303711, "rightEyeOpenProbability": 0.9991688132286072, "smilingProbability": 0.0058485232293605804, "trackingID": 3}], "rawResult": {"faces": [[Object]], "imagePath": "file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy3335985604477176892.jpg"}, "success": true}
 (NOBRIDGE) LOG  🎉 SUCCESS: Face detection completed with 1 face(s)
 (NOBRIDGE) LOG  🎯 Processing detected faces...
 (NOBRIDGE) LOG  👤 Detected face details: {"headAngles": {"x": -7.190428733825684, "y": 2.8953702449798584, "z": -4.466110706329346}, "leftEyeOpen": 0.9974813461303711, "rightEyeOpen": 0.9991688132286072, "smiling": 0.0058485232293605804, "trackingID": 3}
 (NOBRIDGE) LOG  🔄 Converted face data: {"bounds": {"height": 669, "width": 669, "x": 261, "y": 431}, "faceId": "3", "leftEyeOpenProbability": 0.9974813461303711, "rightEyeOpenProbability": 0.9991688132286072, "rollAngle": -4.466110706329346, "timestamp": 1756204558219, "yawAngle": 2.8953702449798584}
 (NOBRIDGE) LOG  Face quality calculation: {"bounds": {"height": 669, "width": 669, "x": 261, "y": 431}, "faceArea": 447561, "faceRatio": 0.2331046875, "maxFaceSize": 0.6, "minFaceSize": 0.05, "screenArea": 1920000}
 (NOBRIDGE) LOG  Quality scores: {"angleQuality": 0.9255648215611776, "lightingQuality": 1, "overall": 0.9114600714683534, "sizeQuality": 0.8344765625000001, "threshold": 0.4}
 (NOBRIDGE) LOG  ✅ Face detection state updated successfully
 (NOBRIDGE) LOG  📊 Face quality score: 0.9114600714683534
 (NOBRIDGE) LOG  🔄 Detection interval cleared - face found
 (NOBRIDGE) LOG  ⏰ Detection timeout cleared - face found
 (NOBRIDGE) LOG  🎉 Face detection completed successfully - stopping all timers
 (NOBRIDGE) LOG  ⏱️ Face detection process completed in 2014.84ms
 (NOBRIDGE) LOG  === MAIN FACE DETECTION PROCESS COMPLETED ===
 (NOBRIDGE) LOG  🔍 === CAMERA isActive CALCULATION ===
 (NOBRIDGE) LOG  🔍 visible: true
 (NOBRIDGE) LOG  🔍 verificationStep: detecting
 (NOBRIDGE) LOG  🔍 isDetecting: false
 (NOBRIDGE) LOG  🔍 cameraKeepAlive: false
 (NOBRIDGE) LOG  🔍 Final isActive result: true
 (NOBRIDGE) LOG  🔍 Camera should be active - checking persistence state...
 (NOBRIDGE) LOG  📸 Attempting to capture photo for face detection...
 (NOBRIDGE) LOG  🔍 Camera state before photo capture: {"cameraMethods": ["props", "context", "refs", "updater", "displayName", "isNativeViewMounted", "lastUIRotation", "rotationHelper", "onViewReady", "onAverageFpsChanged", "onInitialized", "onStarted", "onStopped", "onPreviewStarted", "onPreviewStopped", "onShutter", "onOutputOrientationChanged", "onPreviewOrientationChanged", "onError", "onCodeScanned", "ref", "lastFrameProcessor", "state", "_reactInternals", "_reactInternalInstance"], "cameraRefExists": true, "hasTakePhoto": true, "isActive": true}
 (NOBRIDGE) LOG  ⚙️ Optimizing camera settings for ML Kit...
 (NOBRIDGE) LOG  🔍 === isDetecting STATE CHANGED ===
 (NOBRIDGE) LOG  🔍 New value: false
 (NOBRIDGE) LOG  🔍 Has interval: false
 (NOBRIDGE) LOG  🔍 Has timeout: false
 (NOBRIDGE) LOG  🔍 Camera keep-alive: false
 (NOBRIDGE) LOG  🔍 Timestamp: 2025-08-26T10:35:58.357Z
 (NOBRIDGE) LOG  🔍 === FACE DETECTION STATE CHANGED ===
 (NOBRIDGE) LOG  🔍 Face data: true
 (NOBRIDGE) LOG  🔍 Face detected: true
 (NOBRIDGE) LOG  🔍 Face quality: true
 (NOBRIDGE) LOG  🔍 Is detecting: false
 (NOBRIDGE) LOG  🔍 Has interval: false
 (NOBRIDGE) LOG  🔍 Camera keep-alive: false
 (NOBRIDGE) LOG  🔍 Timestamp: 2025-08-26T10:35:58.383Z
 (NOBRIDGE) LOG  👁️ Face data effect triggered: {"faceDataTimestamp": 1756204558219, "hasFaceData": true, "isLivenessActive": false}
 (NOBRIDGE) LOG  👁️ Not processing face data: {"reason": "Liveness not active"}
 (NOBRIDGE) LOG  Face detection state: {"faceData": true, "faceDetected": true, "faceQuality": true, "isDetecting": false, "verificationStep": "detecting"}
 (NOBRIDGE) LOG  Moving to liveness detection step - good quality face detected
 (NOBRIDGE) LOG  🛑 stopDetection called: {"hasInterval": false, "hasTimeout": false, "isDetecting": false, "stack": "    at anonymous (http://192.168.0.108:8081/node_modules/expo-router/entry.bundle//&platform=android&dev=true&hot=false&transform.engine=hermes&transform.bytecode=1&transform.routerRoot=app&unstable_transformProfile=hermes-stable:392412:25)
    at anonymous (http://192.168.0.108:8081/node_modules/expo-router/entry.bundle//&platform=android&dev=true&hot=false&transform.engine=hermes&transform.bytecode=1&transform.routerRoot=app&unstable_transformProfile=hermes-stable:390704:24)
    at commitHookEffectListMount (http://192.168.0.108:8081/node_modules/expo-router/entry.bundle//&platform=android&dev=true&hot=false&transform.engine=hermes&transform.bytecode=1&transform.routerRoot=app&unstable_transformProfile=hermes-stable:31461:35)", "timestamp": "2025-08-26T10:35:58.420Z"}
 (NOBRIDGE) LOG  🛑 Face detection stopped - isDetecting set to false
 (NOBRIDGE) LOG  Photo file verification: {"exists": true, "fileSize": 569452, "path": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy3838651884089458252.jpg"}
 (NOBRIDGE) ERROR  Frame processor error: {}
 (NOBRIDGE) LOG  🤖 Sending photo to ML Kit for face detection...
 (NOBRIDGE) LOG  🔍 ML Kit detector state before detection: {"availableMethods": ["status", "error", "options"], "detectorType": "object", "isInitialized": true, "photoPath": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy8441243651766818304.jpg", "photoUri": "file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy8441243651766818304.jpg"}
 (NOBRIDGE) LOG  ✅ Photo captured successfully: {"height": 1200, "path": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy7550305416753545102.jpg", "width": 1600}
 (NOBRIDGE) LOG  📁 Photo URI generated: file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy7550305416753545102.jpg
 (NOBRIDGE) LOG  Processing photo for ML Kit compatibility...
 (NOBRIDGE) LOG  Waiting for photo file to be fully written...
 (NOBRIDGE) LOG  Photo file verified successfully: {"path": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy3838651884089458252.jpg", "size": 569452, "uri": "file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy3838651884089458252.jpg"}
 (NOBRIDGE) LOG  Applying ML Kit photo processing...
 (NOBRIDGE) LOG  🔍 === CAMERA isActive CALCULATION ===
 (NOBRIDGE) LOG  🔍 visible: true
 (NOBRIDGE) LOG  🔍 verificationStep: liveness
 (NOBRIDGE) LOG  🔍 isDetecting: false
 (NOBRIDGE) LOG  🔍 cameraKeepAlive: false
 (NOBRIDGE) LOG  🔍 Final isActive result: true
 (NOBRIDGE) LOG  🔍 Camera should be active - checking persistence state...
 (NOBRIDGE) LOG  Photo file read successfully, content length: 759272
 (NOBRIDGE) LOG  ✅ Photo has valid image format header
 (NOBRIDGE) LOG  Additional delay for file system sync...
 (NOBRIDGE) LOG  🔍 === CAMERA KEEP-ALIVE EFFECT TRIGGERED ===
 (NOBRIDGE) LOG  🔍 Verification step changed to: liveness
 (NOBRIDGE) LOG  🔍 Current camera keep-alive state: false
 (NOBRIDGE) LOG  🔒 Enabling camera keep-alive to prevent native view detachment
 (NOBRIDGE) LOG  🔒 === ENABLING CAMERA KEEP-ALIVE ===
 (NOBRIDGE) LOG  🔒 Previous state: false
 (NOBRIDGE) LOG  🔒 New state: true
 (NOBRIDGE) LOG  🔄 Critical transition detected - stabilizing camera component
 (NOBRIDGE) LOG  🔒 Monitoring camera persistence during liveness/capturing...
 (NOBRIDGE) LOG  🔍 Camera keep-alive effect completed
 (NOBRIDGE) LOG  ⏰ Starting countdown timer: 5
 (NOBRIDGE) LOG  Face detection state: {"faceData": true, "faceDetected": true, "faceQuality": true, "isDetecting": false, "verificationStep": "liveness"}
 (NOBRIDGE) LOG  ⚠️ Liveness timeout but face detected - proceeding to capture (ultra-forgiving)
 (NOBRIDGE) LOG  🔒 Keeping camera active during transition to prevent native view detachment
 (NOBRIDGE) LOG  🔍 Stabilizing camera for final capture...
 (NOBRIDGE) LOG  🔍 === CAMERA isActive CALCULATION ===
 (NOBRIDGE) LOG  🔍 visible: true
 (NOBRIDGE) LOG  🔍 verificationStep: capturing
 (NOBRIDGE) LOG  🔍 isDetecting: false
 (NOBRIDGE) LOG  🔍 cameraKeepAlive: true
 (NOBRIDGE) LOG  🔍 Final isActive result: true
 (NOBRIDGE) LOG  🔍 Camera should be active - checking persistence state...
 (NOBRIDGE) LOG  👁️ Starting liveness detection...
 (NOBRIDGE) LOG  👁️ Liveness detection started successfully
 (NOBRIDGE) LOG  🔍 === CAMERA KEEP-ALIVE EFFECT TRIGGERED ===
 (NOBRIDGE) LOG  🔍 Verification step changed to: capturing
 (NOBRIDGE) LOG  🔍 Current camera keep-alive state: true
 (NOBRIDGE) LOG  🔍 Camera keep-alive effect completed
 (NOBRIDGE) LOG  Face detection state: {"faceData": true, "faceDetected": true, "faceQuality": true, "isDetecting": false, "verificationStep": "capturing"}
 (NOBRIDGE) LOG  🔍 === CAMERA isActive CALCULATION ===
 (NOBRIDGE) LOG  🔍 visible: true
 (NOBRIDGE) LOG  🔍 verificationStep: capturing
 (NOBRIDGE) LOG  🔍 isDetecting: false
 (NOBRIDGE) LOG  🔍 cameraKeepAlive: true
 (NOBRIDGE) LOG  🔍 Final isActive result: true
 (NOBRIDGE) LOG  🔍 Camera should be active - checking persistence state...
 (NOBRIDGE) LOG  Photo file verification: {"exists": true, "fileSize": 561929, "path": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy3610410093781359892.jpg"}
 (NOBRIDGE) ERROR  ❌ Photo capture failed: [unknown/unknown: Camera is closed.]
 (NOBRIDGE) LOG  Photo capture error details: {"cameraState": {"hasTakePhoto": true, "isActive": true}, "errorMessage": "Camera is closed.", "errorType": "CameraRuntimeError"}
 (NOBRIDGE) LOG  Photo file verified successfully: {"path": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy3610410093781359892.jpg", "size": 561929, "uri": "file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy3610410093781359892.jpg"}
 (NOBRIDGE) LOG  Applying ML Kit photo processing...
 (NOBRIDGE) LOG  ✅ ML Kit detection completed successfully: {"faceCount": 1, "faces": [{"contours": [Array], "frame": [Object], "headEulerAngleX": -7.711116313934326, "headEulerAngleY": 1.9641872644424438, "headEulerAngleZ": -3.823014259338379, "landmarks": [Array], "leftEyeOpenProbability": 0.9961413145065308, "rightEyeOpenProbability": 0.99802166223526, "smilingProbability": 0.00541888689622283, "trackingID": 3}], "rawResult": {"faces": [[Object]], "imagePath": "file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy3782866065544141752.jpg"}, "success": true}
 (NOBRIDGE) LOG  🎉 SUCCESS: Face detection completed with 1 face(s)
 (NOBRIDGE) LOG  🎯 Processing detected faces...
 (NOBRIDGE) LOG  👤 Detected face details: {"headAngles": {"x": -7.711116313934326, "y": 1.9641872644424438, "z": -3.823014259338379}, "leftEyeOpen": 0.9961413145065308, "rightEyeOpen": 0.99802166223526, "smiling": 0.00541888689622283, "trackingID": 3}
 (NOBRIDGE) LOG  🔄 Converted face data: {"bounds": {"height": 669, "width": 669, "x": 260, "y": 435}, "faceId": "3", "leftEyeOpenProbability": 0.9961413145065308, "rightEyeOpenProbability": 0.99802166223526, "rollAngle": -3.823014259338379, "timestamp": 1756204558968, "yawAngle": 1.9641872644424438}
 (NOBRIDGE) LOG  Face quality calculation: {"bounds": {"height": 669, "width": 669, "x": 260, "y": 435}, "faceArea": 447561, "faceRatio": 0.2331046875, "maxFaceSize": 0.6, "minFaceSize": 0.05, "screenArea": 1920000}
 (NOBRIDGE) LOG  Quality scores: {"angleQuality": 0.9362830956776937, "lightingQuality": 1, "overall": 0.9146755537033082, "sizeQuality": 0.8344765625000001, "threshold": 0.4}
 (NOBRIDGE) LOG  ✅ Face detection state updated successfully
 (NOBRIDGE) LOG  📊 Face quality score: 0.9146755537033082
 (NOBRIDGE) LOG  🎉 Face detection completed successfully - stopping all timers
 (NOBRIDGE) LOG  ⏱️ Face detection process completed in 2450.15ms
 (NOBRIDGE) LOG  === MAIN FACE DETECTION PROCESS COMPLETED ===
 (NOBRIDGE) LOG  🤖 Sending photo to ML Kit for face detection...
 (NOBRIDGE) LOG  🔍 ML Kit detector state before detection: {"availableMethods": ["status", "error", "options"], "detectorType": "object", "isInitialized": true, "photoPath": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy3838651884089458252.jpg", "photoUri": "file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy3838651884089458252.jpg"}
 (NOBRIDGE) LOG  🔍 Proactively monitoring camera state...
 (NOBRIDGE) LOG  🔍 === CAMERA STATE MONITORING ===
 (NOBRIDGE) LOG  🔍 Camera ref exists: true
 (NOBRIDGE) LOG  🔍 Persistent ref exists: true
 (NOBRIDGE) LOG  🔍 Camera ref state: valid
 (NOBRIDGE) LOG  🔍 Camera state monitoring: {"hasTakePhoto": true, "isActive": true}
 (NOBRIDGE) LOG  ✅ Camera state is healthy - proceeding with capture
 (NOBRIDGE) LOG  Camera onInitialized called
 (NOBRIDGE) LOG  Camera started - ensuring detection is running
 (NOBRIDGE) LOG  Photo file read successfully, content length: 749240
 (NOBRIDGE) LOG  ✅ Photo has valid image format header
 (NOBRIDGE) LOG  Additional delay for file system sync...
 (NOBRIDGE) LOG  👁️ Face data effect triggered: {"faceDataTimestamp": 1756204558219, "hasFaceData": true, "isLivenessActive": true}
 (NOBRIDGE) LOG  👁️ Processing face data for liveness detection
 (NOBRIDGE) LOG  👁️ processFaceData called: {"faceDataDetails": {"leftEye": 0.9974813461303711, "rightEye": 0.9991688132286072, "timestamp": 1756204558219}, "hasFaceData": true, "isLivenessActive": true}
 (NOBRIDGE) LOG  👁️ Processing liveness data: {"average": "0.998", "eyeClosedThreshold": 0.98, "eyeOpenThreshold": 0.995, "historyLength": 1, "leftEye": "0.997", "rightEye": "0.999"}
 (NOBRIDGE) LOG  👁️ Analyzing blink pattern in history: {"historyLength": 1, "minRequired": 5}
 (NOBRIDGE) LOG  👁️ Liveness score calculation: {"blinkCount": 0, "blinkScore": 0, "historyLength": 1, "minRequired": 0.1, "movementScore": "0.000", "overallScore": "0.020", "timeScore": "0.100"}
 (NOBRIDGE) LOG  Photo file verification: {"exists": true, "fileSize": 566991, "path": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy7550305416753545102.jpg"}
 (NOBRIDGE) LOG  Photo file verified successfully: {"path": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy7550305416753545102.jpg", "size": 566991, "uri": "file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy7550305416753545102.jpg"}
 (NOBRIDGE) LOG  Applying ML Kit photo processing...
 (NOBRIDGE) LOG  🔍 === CAMERA isActive CALCULATION ===
 (NOBRIDGE) LOG  🔍 visible: true
 (NOBRIDGE) LOG  🔍 verificationStep: capturing
 (NOBRIDGE) LOG  🔍 isDetecting: false
 (NOBRIDGE) LOG  🔍 cameraKeepAlive: true
 (NOBRIDGE) LOG  🔍 Final isActive result: true
 (NOBRIDGE) LOG  🔍 Camera should be active - checking persistence state...
 (NOBRIDGE) LOG  Photo file read successfully, content length: 755988
 (NOBRIDGE) LOG  ✅ Photo has valid image format header
 (NOBRIDGE) LOG  Additional delay for file system sync...
 (NOBRIDGE) LOG  ✅ Camera component stabilized for critical transition
 (NOBRIDGE) LOG  🔍 === FACE DETECTION STATE CHANGED ===
 (NOBRIDGE) LOG  🔍 Face data: true
 (NOBRIDGE) LOG  🔍 Face detected: true
 (NOBRIDGE) LOG  🔍 Face quality: true
 (NOBRIDGE) LOG  🔍 Is detecting: false
 (NOBRIDGE) LOG  🔍 Has interval: false
 (NOBRIDGE) LOG  🔍 Camera keep-alive: true
 (NOBRIDGE) LOG  🔍 Timestamp: 2025-08-26T10:35:59.266Z
 (NOBRIDGE) LOG  👁️ Face data effect triggered: {"faceDataTimestamp": 1756204558968, "hasFaceData": true, "isLivenessActive": true}
 (NOBRIDGE) LOG  👁️ Processing face data for liveness detection
 (NOBRIDGE) LOG  👁️ processFaceData called: {"faceDataDetails": {"leftEye": 0.9961413145065308, "rightEye": 0.99802166223526, "timestamp": 1756204558968}, "hasFaceData": true, "isLivenessActive": true}
 (NOBRIDGE) LOG  👁️ Processing liveness data: {"average": "0.997", "eyeClosedThreshold": 0.98, "eyeOpenThreshold": 0.995, "historyLength": 2, "leftEye": "0.996", "rightEye": "0.998"}
 (NOBRIDGE) LOG  👁️ Analyzing blink pattern in history: {"historyLength": 2, "minRequired": 5}
 (NOBRIDGE) LOG  👁️ Liveness score calculation: {"blinkCount": 0, "blinkScore": 0, "historyLength": 2, "minRequired": 0.1, "movementScore": "0.000", "overallScore": "0.040", "timeScore": "0.200"}
 (NOBRIDGE) LOG  Face detection state: {"faceData": true, "faceDetected": true, "faceQuality": true, "isDetecting": false, "verificationStep": "capturing"}
 (NOBRIDGE) LOG  Camera initialized - connecting reference to face detection hook
 (NOBRIDGE) LOG  🔍 === SETTING CAMERA REFERENCE ===
 (NOBRIDGE) LOG  🔍 Camera component exists: true
 (NOBRIDGE) LOG  🔍 Component type: object
 (NOBRIDGE) LOG  🔍 Has component: true
 (NOBRIDGE) LOG  🔍 Component methods: ["props", "context", "refs", "updater", "displayName", "isNativeViewMounted", "lastUIRotation", "rotationHelper", "onViewReady", "onAverageFpsChanged", "onInitialized", "onStarted", "onStopped", "onPreviewStarted", "onPreviewStopped", "onShutter", "onOutputOrientationChanged", "onPreviewOrientationChanged", "onError", "onCodeScanned", "ref", "lastFrameProcessor", "state", "_reactInternals", "_reactInternalInstance"]
 (NOBRIDGE) LOG  🔍 Has takePhoto method: true
 (NOBRIDGE) LOG  🔍 Camera reference stored in persistent ref
 (NOBRIDGE) LOG  ✅ Camera reference set successfully: {"cameraRefType": "object", "hasCameraRef": true, "hasTakePhotoMethod": true, "persistentRefState": "valid"}
 (NOBRIDGE) LOG  🔍 === COMPREHENSIVE CAMERA STATE VALIDATION ===
 (NOBRIDGE) LOG  🔍 Camera ref exists: true
 (NOBRIDGE) LOG  🔍 Camera ref type: object
 (NOBRIDGE) LOG  🔍 Camera methods available: ["props", "context", "refs", "updater", "displayName", "isNativeViewMounted", "lastUIRotation", "rotationHelper", "onViewReady", "onAverageFpsChanged", "onInitialized", "onStarted", "onStopped", "onPreviewStarted", "onPreviewStopped", "onShutter", "onOutputOrientationChanged", "onPreviewOrientationChanged", "onError", "onCodeScanned", "ref", "lastFrameProcessor", "state", "_reactInternals", "_reactInternalInstance"]
 (NOBRIDGE) LOG  🔍 Has takePhoto method: true
 (NOBRIDGE) LOG  🔍 Camera props: {"audio": false, "device": {"formats": [[Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object]], "hardwareLevel": "full", "hasFlash": false, "hasTorch": false, "id": "1", "isMultiCam": false, "maxExposure": 24, "maxZoom": 10, "minExposure": -24, "minFocusDistance": 0, "minZoom": 1, "name": "1 (FRONT) androidx.camera.camera2", "neutralZoom": 1, "physicalDevices": ["wide-angle-camera"], "position": "front", "sensorOrientation": "landscape-right", "supportsFocus": true, "supportsLowLightBoost": false, "supportsRawCapture": false}, "frameProcessor": {"frameProcessor": [Function withFrameRefCountingTs1], "type": "readonly"}, "isActive": true, "onError": [Function onError], "onInitialized": [Function onInitialized], "onStarted": [Function onStarted], "photo": true, "style": {"height": "100%", "width": "100%"}, "video": false}
 (NOBRIDGE) LOG  🔍 Camera state: {"averageFpsSamples": [], "isRecordingWithFlash": false}
 (NOBRIDGE) LOG  🔍 Camera display name: Camera
 (NOBRIDGE) LOG  ✅ Camera validation passed - proceeding with capture
 (NOBRIDGE) LOG  capturePhoto called with: {"cameraRefCurrent": {"_reactInternalInstance": {}, "_reactInternals": {"_debugHookTypes": null, "_debugInfo": null, "_debugNeedsRemount": false, "_debugOwner": [FiberNode], "actualDuration": 0.28791600465774536, "actualStartTime": 140600631.210113, "alternate": [FiberNode], "child": [FiberNode], "childLanes": 0, "deletions": null, "dependencies": null, "elementType": [Function Camera], "flags": 2097157, "index": 0, "key": "stable", "lanes": 0, "memoizedProps": [Object], "memoizedState": [Object], "mode": 3, "pendingProps": [Object], "ref": [Object], "refCleanup": null, "return": [FiberNode], "selfBaseDuration": 0.21869799494743347, "sibling": [FiberNode], "stateNode": [Circular], "subtreeFlags": 2097152, "tag": 1, "treeBaseDuration": 0.23604199290275574, "type": [Function Camera], "updateQueue": [Object]}, "context": {}, "displayName": "Camera", "isNativeViewMounted": true, "lastFrameProcessor": [Function withFrameRefCountingTs1], "lastUIRotation": 0, "onAverageFpsChanged": [Function bound onAverageFpsChanged], "onCodeScanned": [Function bound onCodeScanned], "onError": [Function bound onError], "onInitialized": [Function bound onInitialized], "onOutputOrientationChanged": [Function bound onOutputOrientationChanged], "onPreviewOrientationChanged": [Function bound onPreviewOrientationChanged], "onPreviewStarted": [Function bound onPreviewStarted], "onPreviewStopped": [Function bound onPreviewStopped], "onShutter": [Function bound onShutter], "onStarted": [Function bound onStarted], "onStopped": [Function bound onStopped], "onViewReady": [Function bound onViewReady], "props": {"audio": false, "device": [Object], "frameProcessor": [Object], "isActive": true, "onError": [Function onError], "onInitialized": [Function onInitialized], "onStarted": [Function onStarted], "photo": true, "style": [Object], "video": false}, "ref": {"current": [ReactFabricHostComponent]}, "refs": {}, "rotationHelper": {"outputOrientation": "portrait", "previewOrientation": "portrait"}, "state": {"averageFpsSamples": [Array], "isRecordingWithFlash": false}, "updater": {"enqueueForceUpdate": [Function enqueueForceUpdate], "enqueueReplaceState": [Function enqueueReplaceState], "enqueueSetState": [Function enqueueSetState], "isMounted": [Function isMounted]}}, "hasCameraRef": true, "hasTakePhotoMethod": true, "isInitialized": true}
 (NOBRIDGE) LOG  Capturing photo with validated face...
 (NOBRIDGE) LOG  🔍 Validating camera state before final capture...
 (NOBRIDGE) LOG  🤖 Sending photo to ML Kit for face detection...
 (NOBRIDGE) LOG  🔍 ML Kit detector state before detection: {"availableMethods": ["status", "error", "options"], "detectorType": "object", "isInitialized": true, "photoPath": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy3610410093781359892.jpg", "photoUri": "file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy3610410093781359892.jpg"}
 (NOBRIDGE) LOG  🔍 === CAMERA isActive CALCULATION ===
 (NOBRIDGE) LOG  🔍 visible: true
 (NOBRIDGE) LOG  🔍 verificationStep: capturing
 (NOBRIDGE) LOG  🔍 isDetecting: false
 (NOBRIDGE) LOG  🔍 cameraKeepAlive: true
 (NOBRIDGE) LOG  🔍 Final isActive result: true
 (NOBRIDGE) LOG  🔍 Camera should be active - checking persistence state...
 (NOBRIDGE) LOG  🤖 Sending photo to ML Kit for face detection...
 (NOBRIDGE) LOG  🔍 ML Kit detector state before detection: {"availableMethods": ["status", "error", "options"], "detectorType": "object", "isInitialized": true, "photoPath": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy7550305416753545102.jpg", "photoUri": "file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy7550305416753545102.jpg"}
 (NOBRIDGE) LOG  🔍 === CAMERA STATE MONITORING ===
 (NOBRIDGE) LOG  🔍 Camera ref exists: true
 (NOBRIDGE) LOG  🔍 Persistent ref exists: true
 (NOBRIDGE) LOG  🔍 Camera ref state: valid
 (NOBRIDGE) LOG  🔍 Camera state monitoring: {"hasTakePhoto": true, "isActive": true}
 (NOBRIDGE) LOG  🔒 Camera health check result: true
 (NOBRIDGE) LOG  ✅ Camera validation successful on attempt 1
 (NOBRIDGE) LOG  📸 Final camera state validation before photo capture...
 (NOBRIDGE) LOG  ✅ ML Kit detection completed successfully: {"faceCount": 1, "faces": [{"contours": [Array], "frame": [Object], "headEulerAngleX": -7.228265285491943, "headEulerAngleY": 2.6042041778564453, "headEulerAngleZ": -4.2333083152771, "landmarks": [Array], "leftEyeOpenProbability": 0.9965924024581909, "rightEyeOpenProbability": 0.997727632522583, "smilingProbability": 0.004573858808726072, "trackingID": 3}], "rawResult": {"faces": [[Object]], "imagePath": "file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy8441243651766818304.jpg"}, "success": true}
 (NOBRIDGE) LOG  🎉 SUCCESS: Face detection completed with 1 face(s)
 (NOBRIDGE) LOG  🎯 Processing detected faces...
 (NOBRIDGE) LOG  👤 Detected face details: {"headAngles": {"x": -7.228265285491943, "y": 2.6042041778564453, "z": -4.2333083152771}, "leftEyeOpen": 0.9965924024581909, "rightEyeOpen": 0.997727632522583, "smiling": 0.004573858808726072, "trackingID": 3}
 (NOBRIDGE) LOG  🔄 Converted face data: {"bounds": {"height": 670, "width": 669, "x": 265, "y": 443}, "faceId": "3", "leftEyeOpenProbability": 0.9965924024581909, "rightEyeOpenProbability": 0.997727632522583, "rollAngle": -4.2333083152771, "timestamp": 1756204559771, "yawAngle": 2.6042041778564453}
 (NOBRIDGE) LOG  Face quality calculation: {"bounds": {"height": 670, "width": 669, "x": 265, "y": 443}, "faceArea": 448230, "faceRatio": 0.233453125, "maxFaceSize": 0.6, "minFaceSize": 0.05, "screenArea": 1920000}
 (NOBRIDGE) LOG  Quality scores: {"angleQuality": 0.9294448614120483, "lightingQuality": 1, "overall": 0.9119272084236145, "sizeQuality": 0.832734375, "threshold": 0.4}
 (NOBRIDGE) LOG  ✅ Face detection state updated successfully
 (NOBRIDGE) LOG  📊 Face quality score: 0.9119272084236145
 (NOBRIDGE) LOG  🎉 Face detection completed successfully - stopping all timers
 (NOBRIDGE) LOG  ⏱️ Face detection process completed in 2935.28ms
 (NOBRIDGE) LOG  === MAIN FACE DETECTION PROCESS COMPLETED ===
 (NOBRIDGE) LOG  🔍 === CAMERA isActive CALCULATION ===
 (NOBRIDGE) LOG  🔍 visible: true
 (NOBRIDGE) LOG  🔍 verificationStep: capturing
 (NOBRIDGE) LOG  🔍 isDetecting: false
 (NOBRIDGE) LOG  🔍 cameraKeepAlive: true
 (NOBRIDGE) LOG  🔍 Final isActive result: true
 (NOBRIDGE) LOG  🔍 Camera should be active - checking persistence state...
 (NOBRIDGE) LOG  🔍 === FACE DETECTION STATE CHANGED ===
 (NOBRIDGE) LOG  🔍 Face data: true
 (NOBRIDGE) LOG  🔍 Face detected: true
 (NOBRIDGE) LOG  🔍 Face quality: true
 (NOBRIDGE) LOG  🔍 Is detecting: false
 (NOBRIDGE) LOG  🔍 Has interval: false
 (NOBRIDGE) LOG  🔍 Camera keep-alive: true
 (NOBRIDGE) LOG  🔍 Timestamp: 2025-08-26T10:35:59.890Z
 (NOBRIDGE) LOG  👁️ Face data effect triggered: {"faceDataTimestamp": 1756204559771, "hasFaceData": true, "isLivenessActive": true}
 (NOBRIDGE) LOG  👁️ Processing face data for liveness detection
 (NOBRIDGE) LOG  👁️ processFaceData called: {"faceDataDetails": {"leftEye": 0.9965924024581909, "rightEye": 0.997727632522583, "timestamp": 1756204559771}, "hasFaceData": true, "isLivenessActive": true}
 (NOBRIDGE) LOG  👁️ Processing liveness data: {"average": "0.997", "eyeClosedThreshold": 0.98, "eyeOpenThreshold": 0.995, "historyLength": 3, "leftEye": "0.997", "rightEye": "0.998"}
 (NOBRIDGE) LOG  👁️ Analyzing blink pattern in history: {"historyLength": 3, "minRequired": 5}
 (NOBRIDGE) LOG  👁️ Liveness score calculation: {"blinkCount": 0, "blinkScore": 0, "historyLength": 3, "minRequired": 0.1, "movementScore": "0.000", "overallScore": "0.060", "timeScore": "0.300"}
 (NOBRIDGE) LOG  Face detection state: {"faceData": true, "faceDetected": true, "faceQuality": true, "isDetecting": false, "verificationStep": "capturing"}
 (NOBRIDGE) LOG  🔍 === CAMERA isActive CALCULATION ===
 (NOBRIDGE) LOG  🔍 visible: true
 (NOBRIDGE) LOG  🔍 verificationStep: capturing
 (NOBRIDGE) LOG  🔍 isDetecting: false
 (NOBRIDGE) LOG  🔍 cameraKeepAlive: true
 (NOBRIDGE) LOG  🔍 Final isActive result: true
 (NOBRIDGE) LOG  🔍 Camera should be active - checking persistence state...
 (NOBRIDGE) LOG  ✅ Photo capture successful: {"height": 1200, "isMirrored": true, "isRawPhoto": false, "orientation": "portrait", "path": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy4364465463743562107.jpg", "width": 1600}
 (NOBRIDGE) LOG  ✅ ML Kit detection completed successfully: {"faceCount": 1, "faces": [{"contours": [Array], "frame": [Object], "headEulerAngleX": -7.327531814575195, "headEulerAngleY": 2.660099744796753, "headEulerAngleZ": -4.250775337219238, "landmarks": [Array], "leftEyeOpenProbability": 0.9942908883094788, "rightEyeOpenProbability": 0.998600959777832, "smilingProbability": 0.004573858808726072, "trackingID": 3}], "rawResult": {"faces": [[Object]], "imagePath": "file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy3838651884089458252.jpg"}, "success": true}
 (NOBRIDGE) LOG  🎉 SUCCESS: Face detection completed with 1 face(s)
 (NOBRIDGE) LOG  🎯 Processing detected faces...
 (NOBRIDGE) LOG  👤 Detected face details: {"headAngles": {"x": -7.327531814575195, "y": 2.660099744796753, "z": -4.250775337219238}, "leftEyeOpen": 0.9942908883094788, "rightEyeOpen": 0.998600959777832, "smiling": 0.004573858808726072, "trackingID": 3}
 (NOBRIDGE) LOG  🔄 Converted face data: {"bounds": {"height": 669, "width": 669, "x": 265, "y": 447}, "faceId": "3", "leftEyeOpenProbability": 0.9942908883094788, "rightEyeOpenProbability": 0.998600959777832, "rollAngle": -4.250775337219238, "timestamp": 1756204560263, "yawAngle": 2.660099744796753}
 (NOBRIDGE) LOG  Face quality calculation: {"bounds": {"height": 669, "width": 669, "x": 265, "y": 447}, "faceArea": 447561, "faceRatio": 0.2331046875, "maxFaceSize": 0.6, "minFaceSize": 0.05, "screenArea": 1920000}
 (NOBRIDGE) LOG  Quality scores: {"angleQuality": 0.9291537443796793, "lightingQuality": 1, "overall": 0.9125367483139039, "sizeQuality": 0.8344765625000001, "threshold": 0.4}
 (NOBRIDGE) LOG  ✅ Face detection state updated successfully
 (NOBRIDGE) LOG  📊 Face quality score: 0.9125367483139039
 (NOBRIDGE) LOG  🎉 Face detection completed successfully - stopping all timers
 (NOBRIDGE) LOG  ⏱️ Face detection process completed in 3105.94ms
 (NOBRIDGE) LOG  === MAIN FACE DETECTION PROCESS COMPLETED ===
 (NOBRIDGE) LOG  🔍 === CAMERA isActive CALCULATION ===
 (NOBRIDGE) LOG  🔍 visible: true
 (NOBRIDGE) LOG  🔍 verificationStep: capturing
 (NOBRIDGE) LOG  🔍 isDetecting: false
 (NOBRIDGE) LOG  🔍 cameraKeepAlive: true
 (NOBRIDGE) LOG  🔍 Final isActive result: true
 (NOBRIDGE) LOG  🔍 Camera should be active - checking persistence state...
 (NOBRIDGE) LOG  🔍 === FACE DETECTION STATE CHANGED ===
 (NOBRIDGE) LOG  🔍 Face data: true
 (NOBRIDGE) LOG  🔍 Face detected: true
 (NOBRIDGE) LOG  🔍 Face quality: true
 (NOBRIDGE) LOG  🔍 Is detecting: false
 (NOBRIDGE) LOG  🔍 Has interval: false
 (NOBRIDGE) LOG  🔍 Camera keep-alive: true
 (NOBRIDGE) LOG  🔍 Timestamp: 2025-08-26T10:36:00.387Z
 (NOBRIDGE) LOG  👁️ Face data effect triggered: {"faceDataTimestamp": 1756204560263, "hasFaceData": true, "isLivenessActive": true}
 (NOBRIDGE) LOG  👁️ Processing face data for liveness detection
 (NOBRIDGE) LOG  👁️ processFaceData called: {"faceDataDetails": {"leftEye": 0.9942908883094788, "rightEye": 0.998600959777832, "timestamp": 1756204560263}, "hasFaceData": true, "isLivenessActive": true}
 (NOBRIDGE) LOG  👁️ Processing liveness data: {"average": "0.996", "eyeClosedThreshold": 0.98, "eyeOpenThreshold": 0.995, "historyLength": 3, "leftEye": "0.994", "rightEye": "0.999"}
 (NOBRIDGE) LOG  👁️ Analyzing blink pattern in history: {"historyLength": 3, "minRequired": 5}
 (NOBRIDGE) LOG  👁️ Liveness score calculation: {"blinkCount": 0, "blinkScore": 0, "historyLength": 3, "minRequired": 0.1, "movementScore": "0.000", "overallScore": "0.060", "timeScore": "0.300"}
 (NOBRIDGE) LOG  Face detection state: {"faceData": true, "faceDetected": true, "faceQuality": true, "isDetecting": false, "verificationStep": "capturing"}
 (NOBRIDGE) LOG  🔍 === CAMERA isActive CALCULATION ===
 (NOBRIDGE) LOG  🔍 visible: true
 (NOBRIDGE) LOG  🔍 verificationStep: capturing
 (NOBRIDGE) LOG  🔍 isDetecting: false
 (NOBRIDGE) LOG  🔍 cameraKeepAlive: true
 (NOBRIDGE) LOG  🔍 Final isActive result: true
 (NOBRIDGE) LOG  🔍 Camera should be active - checking persistence state...
 (NOBRIDGE) LOG  ✅ ML Kit detection completed successfully: {"faceCount": 1, "faces": [{"contours": [Array], "frame": [Object], "headEulerAngleX": -7.3334197998046875, "headEulerAngleY": 2.7376906871795654, "headEulerAngleZ": -4.534194469451904, "landmarks": [Array], "leftEyeOpenProbability": 0.9965924024581909, "rightEyeOpenProbability": 0.9968274235725403, "smilingProbability": 0.004994028247892857, "trackingID": 3}], "rawResult": {"faces": [[Object]], "imagePath": "file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy3610410093781359892.jpg"}, "success": true}
 (NOBRIDGE) LOG  🎉 SUCCESS: Face detection completed with 1 face(s)
 (NOBRIDGE) LOG  🎯 Processing detected faces...
 (NOBRIDGE) LOG  👤 Detected face details: {"headAngles": {"x": -7.3334197998046875, "y": 2.7376906871795654, "z": -4.534194469451904}, "leftEyeOpen": 0.9965924024581909, "rightEyeOpen": 0.9968274235725403, "smiling": 0.004994028247892857, "trackingID": 3}
 (NOBRIDGE) LOG  🔄 Converted face data: {"bounds": {"height": 674, "width": 674, "x": 265, "y": 448}, "faceId": "3", "leftEyeOpenProbability": 0.9965924024581909, "rightEyeOpenProbability": 0.9968274235725403, "rollAngle": -4.534194469451904, "timestamp": 1756204560736, "yawAngle": 2.7376906871795654}
 (NOBRIDGE) LOG  Face quality calculation: {"bounds": {"height": 674, "width": 674, "x": 265, "y": 448}, "faceArea": 454276, "faceRatio": 0.23660208333333332, "maxFaceSize": 0.6, "minFaceSize": 0.05, "screenArea": 1920000}
 (NOBRIDGE) LOG  Quality scores: {"angleQuality": 0.9244300921758016, "lightingQuality": 1, "overall": 0.9041248609860739, "sizeQuality": 0.8169895833333334, "threshold": 0.4}
 (NOBRIDGE) LOG  ✅ Face detection state updated successfully
 (NOBRIDGE) LOG  📊 Face quality score: 0.9041248609860739
 (NOBRIDGE) LOG  🎉 Face detection completed successfully - stopping all timers
 (NOBRIDGE) LOG  ⏱️ Face detection process completed in 3261.03ms
 (NOBRIDGE) LOG  === MAIN FACE DETECTION PROCESS COMPLETED ===
 (NOBRIDGE) LOG  🔍 === CAMERA isActive CALCULATION ===
 (NOBRIDGE) LOG  🔍 visible: true
 (NOBRIDGE) LOG  🔍 verificationStep: capturing
 (NOBRIDGE) LOG  🔍 isDetecting: false
 (NOBRIDGE) LOG  🔍 cameraKeepAlive: true
 (NOBRIDGE) LOG  🔍 Final isActive result: true
 (NOBRIDGE) LOG  🔍 Camera should be active - checking persistence state...
 (NOBRIDGE) LOG  🔍 === FACE DETECTION STATE CHANGED ===
 (NOBRIDGE) LOG  🔍 Face data: true
 (NOBRIDGE) LOG  🔍 Face detected: true
 (NOBRIDGE) LOG  🔍 Face quality: true
 (NOBRIDGE) LOG  🔍 Is detecting: false
 (NOBRIDGE) LOG  🔍 Has interval: false
 (NOBRIDGE) LOG  🔍 Camera keep-alive: true
 (NOBRIDGE) LOG  🔍 Timestamp: 2025-08-26T10:36:00.849Z
 (NOBRIDGE) LOG  👁️ Face data effect triggered: {"faceDataTimestamp": 1756204560736, "hasFaceData": true, "isLivenessActive": true}
 (NOBRIDGE) LOG  👁️ Processing face data for liveness detection
 (NOBRIDGE) LOG  👁️ processFaceData called: {"faceDataDetails": {"leftEye": 0.9965924024581909, "rightEye": 0.9968274235725403, "timestamp": 1756204560736}, "hasFaceData": true, "isLivenessActive": true}
 (NOBRIDGE) LOG  👁️ Processing liveness data: {"average": "0.997", "eyeClosedThreshold": 0.98, "eyeOpenThreshold": 0.995, "historyLength": 4, "leftEye": "0.997", "rightEye": "0.997"}
 (NOBRIDGE) LOG  👁️ Analyzing blink pattern in history: {"historyLength": 4, "minRequired": 5}
 (NOBRIDGE) LOG  👁️ Liveness score calculation: {"blinkCount": 0, "blinkScore": 0, "historyLength": 4, "minRequired": 0.1, "movementScore": "0.000", "overallScore": "0.080", "timeScore": "0.400"}
 (NOBRIDGE) LOG  Face detection state: {"faceData": true, "faceDetected": true, "faceQuality": true, "isDetecting": false, "verificationStep": "capturing"}
 (NOBRIDGE) LOG  🔍 === CAMERA isActive CALCULATION ===
 (NOBRIDGE) LOG  🔍 visible: true
 (NOBRIDGE) LOG  🔍 verificationStep: capturing
 (NOBRIDGE) LOG  🔍 isDetecting: false
 (NOBRIDGE) LOG  🔍 cameraKeepAlive: true
 (NOBRIDGE) LOG  🔍 Final isActive result: true
 (NOBRIDGE) LOG  🔍 Camera should be active - checking persistence state...
 (NOBRIDGE) LOG  ✅ ML Kit detection completed successfully: {"faceCount": 1, "faces": [{"contours": [Array], "frame": [Object], "headEulerAngleX": -7.680830478668213, "headEulerAngleY": 2.5046286582946777, "headEulerAngleZ": -4.243841171264648, "landmarks": [Array], "leftEyeOpenProbability": 0.9965924024581909, "rightEyeOpenProbability": 0.997727632522583, "smilingProbability": 0.0058485232293605804, "trackingID": 3}], "rawResult": {"faces": [[Object]], "imagePath": "file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy7550305416753545102.jpg"}, "success": true}
 (NOBRIDGE) LOG  🎉 SUCCESS: Face detection completed with 1 face(s)
 (NOBRIDGE) LOG  🎯 Processing detected faces...
 (NOBRIDGE) LOG  👤 Detected face details: {"headAngles": {"x": -7.680830478668213, "y": 2.5046286582946777, "z": -4.243841171264648}, "leftEyeOpen": 0.9965924024581909, "rightEyeOpen": 0.997727632522583, "smiling": 0.0058485232293605804, "trackingID": 3}
 (NOBRIDGE) LOG  🔄 Converted face data: {"bounds": {"height": 673, "width": 673, "x": 268, "y": 450}, "faceId": "3", "leftEyeOpenProbability": 0.9965924024581909, "rightEyeOpenProbability": 0.997727632522583, "rollAngle": -4.243841171264648, "timestamp": 1756204561213, "yawAngle": 2.5046286582946777}
 (NOBRIDGE) LOG  Face quality calculation: {"bounds": {"height": 673, "width": 673, "x": 268, "y": 450}, "faceArea": 452929, "faceRatio": 0.23590052083333332, "maxFaceSize": 0.6, "minFaceSize": 0.05, "screenArea": 1920000}
 (NOBRIDGE) LOG  Quality scores: {"angleQuality": 0.9292693138122559, "lightingQuality": 1, "overall": 0.9069797524770101, "sizeQuality": 0.8204973958333335, "threshold": 0.4}
 (NOBRIDGE) LOG  ✅ Face detection state updated successfully
 (NOBRIDGE) LOG  📊 Face quality score: 0.9069797524770101
 (NOBRIDGE) LOG  🎉 Face detection completed successfully - stopping all timers
 (NOBRIDGE) LOG  ⏱️ Face detection process completed in 3426.61ms
 (NOBRIDGE) LOG  === MAIN FACE DETECTION PROCESS COMPLETED ===
 (NOBRIDGE) LOG  🔍 === CAMERA isActive CALCULATION ===
 (NOBRIDGE) LOG  🔍 visible: true
 (NOBRIDGE) LOG  🔍 verificationStep: capturing
 (NOBRIDGE) LOG  🔍 isDetecting: false
 (NOBRIDGE) LOG  🔍 cameraKeepAlive: true
 (NOBRIDGE) LOG  🔍 Final isActive result: true
 (NOBRIDGE) LOG  🔍 Camera should be active - checking persistence state...
 (NOBRIDGE) LOG  🔍 === FACE DETECTION STATE CHANGED ===
 (NOBRIDGE) LOG  🔍 Face data: true
 (NOBRIDGE) LOG  🔍 Face detected: true
 (NOBRIDGE) LOG  🔍 Face quality: true
 (NOBRIDGE) LOG  🔍 Is detecting: false
 (NOBRIDGE) LOG  🔍 Has interval: false
 (NOBRIDGE) LOG  🔍 Camera keep-alive: true
 (NOBRIDGE) LOG  🔍 Timestamp: 2025-08-26T10:36:01.388Z
 (NOBRIDGE) LOG  👁️ Face data effect triggered: {"faceDataTimestamp": 1756204561213, "hasFaceData": true, "isLivenessActive": true}
 (NOBRIDGE) LOG  👁️ Processing face data for liveness detection
 (NOBRIDGE) LOG  👁️ processFaceData called: {"faceDataDetails": {"leftEye": 0.9965924024581909, "rightEye": 0.997727632522583, "timestamp": 1756204561213}, "hasFaceData": true, "isLivenessActive": true}
 (NOBRIDGE) LOG  👁️ Processing liveness data: {"average": "0.997", "eyeClosedThreshold": 0.98, "eyeOpenThreshold": 0.995, "historyLength": 4, "leftEye": "0.997", "rightEye": "0.998"}
 (NOBRIDGE) LOG  👁️ Analyzing blink pattern in history: {"historyLength": 4, "minRequired": 5}
 (NOBRIDGE) LOG  👁️ Liveness score calculation: {"blinkCount": 0, "blinkScore": 0, "historyLength": 4, "minRequired": 0.1, "movementScore": "0.000", "overallScore": "0.080", "timeScore": "0.400"}
 (NOBRIDGE) LOG  Face detection state: {"faceData": true, "faceDetected": true, "faceQuality": true, "isDetecting": false, "verificationStep": "capturing"}
 (NOBRIDGE) LOG  🔍 === CAMERA KEEP-ALIVE EFFECT TRIGGERED ===
 (NOBRIDGE) LOG  🔍 Verification step changed to: processing
 (NOBRIDGE) LOG  🔍 Current camera keep-alive state: true
 (NOBRIDGE) LOG  🔍 Camera keep-alive effect completed
 (NOBRIDGE) LOG  Face detection state: {"faceData": true, "faceDetected": true, "faceQuality": true, "isDetecting": false, "verificationStep": "processing"}
 (NOBRIDGE) LOG  🛡️ Detection active flag reset - allowing cleanup
 (NOBRIDGE) LOG  🔍 === CAMERA KEEP-ALIVE EFFECT TRIGGERED ===
 (NOBRIDGE) LOG  🔍 Verification step changed to: success
 (NOBRIDGE) LOG  🔍 Current camera keep-alive state: true
 (NOBRIDGE) LOG  🔓 Disabling camera keep-alive - verification complete
 (NOBRIDGE) LOG  🔓 === DISABLING CAMERA KEEP-ALIVE ===
 (NOBRIDGE) LOG  🔓 Previous state: true
 (NOBRIDGE) LOG  🔓 New state: false
 (NOBRIDGE) LOG  🔍 Camera keep-alive effect completed
 (NOBRIDGE) LOG  Face detection state: {"faceData": true, "faceDetected": true, "faceQuality": true, "isDetecting": false, "verificationStep": "success"}
 (NOBRIDGE) LOG  Modal visible - verification already completed successfully, not restarting
 (NOBRIDGE) LOG  🔍 === CAMERA KEEP-ALIVE EFFECT TRIGGERED ===
 (NOBRIDGE) LOG  🔍 Verification step changed to: success
 (NOBRIDGE) LOG  🔍 Current camera keep-alive state: false
 (NOBRIDGE) LOG  🔍 Camera keep-alive effect completed
 (NOBRIDGE) LOG  Verification test successful: {"confidence": 0.9901160471010066, "faceEncoding": "PQonPrHktz57FNY+UrgOP/Bafz+HyX8/AXqfvQE5fz/s5U49V6x/P4ILZD3l6Uc9vMSxPcmhvT22TA89QJ5lPZ6mJT2DoLk9ft6cPWVh9DzqTXM9fYOAO6tpqTzDJvo8SpSsPd3wqD3kokI91MSDPF7NHz1dgsw6PGggPfOpUD1EeSA9Gg6KPbr/jj0CRB09T4auPbhl2jx+PBc9/44KPWQ5/zyiH8I9j2mzO9yiqj1lf589MSN1Ov8ujD20G5Y9/AA+PbKSsT2ZOMU9BiytPVkOrD3Ioa495ABDPfkkpTyPKJw9Rwc4PQz/gz3r/IY8KenJPZjThj0mqb488QJ+PX6MuT2LEAQ9edBOPRfCED1/bhw9ypKRPY82CD3QBWk83L5+Pb9Txz2udrI97oWbPSoJBj2+9dk8k13GPb6VoD1rivo8RXA0O7zawj1gnK090DicPftThD0yocI915SpPRClNj1BsYI9GCqPPSe5wz2BFbg9NT86PZgMYT2HIpw9C/edPeHMDT1cNLk8uambPfdrKT3fBr499TcYPbqZvT2klPo8+4nFPThzZT2sNcE9XNmFPd7hHz2kJNU8fSlrO5QisT2PqHo9ZEFPPPZQjz193Z091PYZPPvCRTygfDY94riOPW89UD0CTAk8NuxqOxYMgD2SojM9onioO+i67jk=", "isOffline": false, "livenessDetected": false, "success": true, "timestamp": 2025-08-26T10:36:01.579Z}
 (NOBRIDGE) LOG  Modal hidden - stopping all detection processes
 (NOBRIDGE) LOG  🛑 stopDetection called: {"hasInterval": false, "hasTimeout": false, "isDetecting": false, "stack": "    at anonymous (http://192.168.0.108:8081/node_modules/expo-router/entry.bundle//&platform=android&dev=true&hot=false&transform.engine=hermes&transform.bytecode=1&transform.routerRoot=app&unstable_transformProfile=hermes-stable:392412:25)
    at anonymous (http://192.168.0.108:8081/node_modules/expo-router/entry.bundle//&platform=android&dev=true&hot=false&transform.engine=hermes&transform.bytecode=1&transform.routerRoot=app&unstable_transformProfile=hermes-stable:390818:22)
    at commitHookEffectListMount (http://192.168.0.108:8081/node_modules/expo-router/entry.bundle//&platform=android&dev=true&hot=false&transform.engine=hermes&transform.bytecode=1&transform.routerRoot=app&unstable_transformProfile=hermes-stable:31461:35)", "timestamp": "2025-08-26T10:36:03.717Z"}
 (NOBRIDGE) LOG  🛑 Face detection stopped - isDetecting set to false
 (NOBRIDGE) LOG  👁️ Stopping liveness detection...
 (NOBRIDGE) LOG  👁️ Liveness detection stopped
 (NOBRIDGE) LOG  Modal hidden - keeping success state (verification completed)
 (NOBRIDGE) LOG  👁️ Face data effect triggered: {"faceDataTimestamp": 1756204561213, "hasFaceData": true, "isLivenessActive": false}
 (NOBRIDGE) LOG  👁️ Not processing face data: {"reason": "Liveness not active"}
(NOBRIDGE) LOG  🧹 === CLEANING UP FACE DETECTION ON UNMOUNT ===
 (NOBRIDGE) LOG  🧹 Cleaning up main camera ref
 (NOBRIDGE) LOG  🧹 Cleaning up persistent camera ref
 (NOBRIDGE) LOG  ✅ Face detection cleanup completed
 (NOBRIDGE) LOG  FaceVerificationModal cleanup - stopping all detection
 (NOBRIDGE) LOG  🛑 stopDetection called: {"hasInterval": false, "hasTimeout": false, "isDetecting": false, "stack": "    at anonymous (http://192.168.0.108:8081/node_modules/expo-router/entry.bundle//&platform=android&dev=true&hot=false&transform.engine=hermes&transform.bytecode=1&transform.routerRoot=app&unstable_transformProfile=hermes-stable:392412:25)
    at anonymous (http://192.168.0.108:8081/node_modules/expo-router/entry.bundle//&platform=android&dev=true&hot=false&transform.engine=hermes&transform.bytecode=1&transform.routerRoot=app&unstable_transformProfile=hermes-stable:390607:24)
    at safelyCallDestroy (http://192.168.0.108:8081/node_modules/expo-router/entry.bundle//&platform=android&dev=true&hot=false&transform.engine=hermes&transform.bytecode=1&transform.routerRoot=app&unstable_transformProfile=hermes-stable:31298:18)", "timestamp": "2025-08-26T10:36:06.137Z"}
 (NOBRIDGE) LOG  🛑 Face detection stopped - isDetecting set to false
 (NOBRIDGE) LOG  👁️ Stopping liveness detection...
 (NOBRIDGE) LOG  👁️ Liveness detection stopped
 (NOBRIDGE) ERROR  Error fetching group admins: [AxiosError: Request failed with status code 403]
 (NOBRIDGE) LOG  App state changed: active -> background
 (NOBRIDGE) LOG  App went to background, keeping token refresh timer active
 (NOBRIDGE) LOG  Cleaning up TrackingContext on unmount
 (NOBRIDGE) WARN  Route "./(dashboard)/Group-Admin/reports/components/pdf-templates/AttendanceTemplate.tsx" is missing the required default export. Ensure a React component is exported as default. [Component Stack]
 (NOBRIDGE) WARN  Route "./(dashboard)/Group-Admin/reports/components/pdf-templates/BaseTemplate.tsx" is missing the required default export. Ensure a React component is exported as default. [Component Stack]
 (NOBRIDGE) WARN  Route "./(dashboard)/Group-Admin/reports/components/pdf-templates/ExpenseTemplate.tsx" is missing the required default export. Ensure a React component is exported as default. [Component Stack]
 (NOBRIDGE) WARN  Route "./(dashboard)/Group-Admin/reports/components/pdf-templates/LeaveTemplate.tsx" is missing the required default export. Ensure a React component is exported as default. [Component Stack]
 (NOBRIDGE) WARN  Route "./(dashboard)/Group-Admin/reports/components/pdf-templates/PerformanceTemplate.tsx" is missing the required default export. Ensure a React component is exported as default. [Component Stack]
 (NOBRIDGE) WARN  Route "./(dashboard)/Group-Admin/reports/components/pdf-templates/TaskTemplate.tsx" is missing the required default export. Ensure a React component is exported as default. [Component Stack]
 (NOBRIDGE) WARN  Route "./(dashboard)/Group-Admin/reports/components/pdf-templates/TravelTemplate.tsx" is missing the required default export. Ensure a React component is exported as default. [Component Stack]
 (NOBRIDGE) WARN  Route "./(dashboard)/Group-Admin/reports/services/PDFGenerator.ts" is missing the required default export. Ensure a React component is exported as default. [Component Stack]
 (NOBRIDGE) WARN  Route "./(dashboard)/Group-Admin/reports/types.ts" is missing the required default export. Ensure a React component is exported as default. [Component Stack]
 (NOBRIDGE) WARN  Route "./(dashboard)/Group-Admin/types.ts" is missing the required default export. Ensure a React component is exported as default. [Component Stack]
 (NOBRIDGE) WARN  Route "./(dashboard)/Group-Admin/utils/navigationItems.ts" is missing the required default export. Ensure a React component is exported as default. [Component Stack]
 (NOBRIDGE) WARN  Route "./(dashboard)/employee/types.ts" is missing the required default export. Ensure a React component is exported as default. [Component Stack]
 (NOBRIDGE) WARN  Route "./(dashboard)/employee/utils/navigationItems.ts" is missing the required default export. Ensure a React component is exported as default. [Component Stack]
 (NOBRIDGE) WARN  Route "./(dashboard)/management/utils/navigationItems.ts" is missing the required default export. Ensure a React component is exported as default. [Component Stack]
 (NOBRIDGE) WARN  Route "./(dashboard)/super-admin/utils/navigationItems.ts" is missing the required default export. Ensure a React component is exported as default. [Component Stack]
 (NOBRIDGE) WARN  Route "./components/AsyncLoadingStates.tsx" is missing the required default export. Ensure a React component is exported as default. [Component Stack]
 (NOBRIDGE) WARN  Route "./components/FaceDetectionQualityFeedback.tsx" is missing the required default export. Ensure a React component is exported as default. [Component Stack]
 (NOBRIDGE) WARN  Route "./components/ProgressIndicators.tsx" is missing the required default export. Ensure a React component is exported as default. [Component Stack]
 (NOBRIDGE) WARN  Route "./components/VerificationProgressOverlay.tsx" is missing the required default export. Ensure a React component is exported as default. [Component Stack]
 (NOBRIDGE) WARN  Route "./context/NotificationContext.tsx" is missing the required default export. Ensure a React component is exported as default. [Component Stack]
 (NOBRIDGE) WARN  Route "./context/TrackingContext.tsx" is missing the required default export. Ensure a React component is exported as default. [Component Stack]
 (NOBRIDGE) WARN  Route "./hooks/useCameraLiveness.ts" is missing the required default export. Ensure a React component is exported as default. [Component Stack]
 (NOBRIDGE) WARN  Route "./hooks/useErrorHandling.ts" is missing the required default export. Ensure a React component is exported as default. [Component Stack]
 (NOBRIDGE) WARN  Route "./hooks/useFaceDetection.ts" is missing the required default export. Ensure a React component is exported as default. [Component Stack]
 (NOBRIDGE) WARN  Route "./hooks/useGeofencing.ts" is missing the required default export. Ensure a React component is exported as default. [Component Stack]
 (NOBRIDGE) WARN  Route "./hooks/useLocationTracking.ts" is missing the required default export. Ensure a React component is exported as default. [Component Stack]
 (NOBRIDGE) WARN  Route "./hooks/useOfflineVerification.ts" is missing the required default export. Ensure a React component is exported as default. [Component Stack]
 (NOBRIDGE) WARN  Route "./hooks/useShiftManagement.ts" is missing the required default export. Ensure a React component is exported as default. [Component Stack]
 (NOBRIDGE) WARN  Route "./hooks/useSocket.ts" is missing the required default export. Ensure a React component is exported as default. [Component Stack]
 (NOBRIDGE) WARN  Route "./hooks/useVerificationFlow.ts" is missing the required default export. Ensure a React component is exported as default. [Component Stack]
 (NOBRIDGE) WARN  Route "./services/ConnectivityService.ts" is missing the required default export. Ensure a React component is exported as default. [Component Stack]
 (NOBRIDGE) WARN  Route "./services/FaceVerificationService.ts" is missing the required default export. Ensure a React component is exported as default. [Component Stack]
 (NOBRIDGE) WARN  Route "./services/OfflineVerificationService.ts" is missing the required default export. Ensure a React component is exported as default. [Component Stack]
 (NOBRIDGE) WARN  Route "./services/VerificationFlowService.ts" is missing the required default export. Ensure a React component is exported as default. [Component Stack]
 (NOBRIDGE) WARN  Route "./store/trackingPermissionsStore.ts" is missing the required default export. Ensure a React component is exported as default. [Component Stack]
 (NOBRIDGE) WARN  Route "./types/common.ts" is missing the required default export. Ensure a React component is exported as default. [Component Stack]
 (NOBRIDGE) WARN  Route "./types/faceDetection.ts" is missing the required default export. Ensure a React component is exported as default. [Component Stack]
 (NOBRIDGE) WARN  Route "./types/faceVerificationErrors.ts" is missing the required default export. Ensure a React component is exported as default. [Component Stack]
 (NOBRIDGE) WARN  Route "./types/index.ts" is missing the required default export. Ensure a React component is exported as default. [Component Stack]
 (NOBRIDGE) WARN  Route "./types/liveTracking.ts" is missing the required default export. Ensure a React component is exported as default. [Component Stack]
 (NOBRIDGE) WARN  Route "./types/location.ts" is missing the required default export. Ensure a React component is exported as default. [Component Stack]
 (NOBRIDGE) WARN  Route "./types/otp.ts" is missing the required default export. Ensure a React component is exported as default. [Component Stack]
 (NOBRIDGE) WARN  Route "./types/react-native-modal.d.ts" is missing the required default export. Ensure a React component is exported as default. [Component Stack]
 (NOBRIDGE) WARN  Route "./types/userTypes.ts" is missing the required default export. Ensure a React component is exported as default. [Component Stack]
 (NOBRIDGE) WARN  Route "./types/verification.ts" is missing the required default export. Ensure a React component is exported as default. [Component Stack]
 (NOBRIDGE) WARN  Route "./utils/backgroundLocationTask.ts" is missing the required default export. Ensure a React component is exported as default. [Component Stack]
 (NOBRIDGE) WARN  Route "./utils/deepLinkUtils.ts" is missing the required default export. Ensure a React component is exported as default. [Component Stack]
 (NOBRIDGE) WARN  Route "./utils/httpBatchManager.ts" is missing the required default export. Ensure a React component is exported as default. [Component Stack]
 (NOBRIDGE) WARN  Route "./utils/locationAccuracyFilter.ts" is missing the required default export. Ensure a React component is exported as default. [Component Stack]
 (NOBRIDGE) WARN  Route "./utils/locationQueueManager.ts" is missing the required default export. Ensure a React component is exported as default. [Component Stack]
 (NOBRIDGE) WARN  Route "./utils/locationUtils.ts" is missing the required default export. Ensure a React component is exported as default. [Component Stack]
 (NOBRIDGE) WARN  Route "./utils/routeUtils.ts" is missing the required default export. Ensure a React component is exported as default. [Component Stack]
 (NOBRIDGE) LOG  Initializing tracking context...
 (NOBRIDGE) LOG  Device info: Xiaomi, needs optimization: true
 (NOBRIDGE) LOG  Tracking context initialized
 (NOBRIDGE) LOG  Token is missing required claims
 (NOBRIDGE) LOG  Scheduling token refresh in 9042 minutes
 (NOBRIDGE) LOG  Online mode: verifying token with server
 (NOBRIDGE) LOG  === TOKEN STORAGE DIAGNOSTIC ===
 (NOBRIDGE) LOG  Platform: android
 (NOBRIDGE) LOG
AsyncStorage:
 (NOBRIDGE) LOG  - Access token: VALID
 (NOBRIDGE) LOG  - Refresh token: VALID
 (NOBRIDGE) LOG
SecureStore:
 (NOBRIDGE) LOG  - Access token: VALID
 (NOBRIDGE) LOG  - Refresh token: VALID
 (NOBRIDGE) LOG
Detected Issues: None
 (NOBRIDGE) LOG  ==============================
(NOBRIDGE) LOG  Current tasks: []
 (NOBRIDGE) LOG  Current user: {"company_id": 1, "email": "demoemployee@company.com", "id": 7, "name": "Demo Employee", "phone": "+918937228626", "role": "employee"}
 (NOBRIDGE) LOG  Token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6Nywicm9sZSI6ImVtcGxveWVlIiwiY29tcGFueV9pZCI6MSwidG9rZW5fdmVyc2lvbiI6MCwidHlwZSI6ImFjY2VzcyIsImlhdCI6MTc1NjE0MjU5NywiZXhwIjoxNzU2NzQ3Mzk3fQ.d8gLFL7QW63SCOOyn5X7sn3PFpdtywacLGrSnDht9Do
 (NOBRIDGE) LOG  Current user: {"company_id": 1, "email": "demoemployee@company.com", "id": 7, "name": "Demo Employee", "phone": "+918937228626", "role": "employee"}
 (NOBRIDGE) LOG  Token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6Nywicm9sZSI6ImVtcGxveWVlIiwiY29tcGFueV9pZCI6MSwidG9rZW5fdmVyc2lvbiI6MCwidHlwZSI6ImFjY2VzcyIsImlhdCI6MTc1NjE0MjU5NywiZXhwIjoxNzU2NzQ3Mzk3fQ.d8gLFL7QW63SCOOyn5X7sn3PFpdtywacLGrSnDht9Do
 (NOBRIDGE) LOG  Current tasks: []
 (NOBRIDGE) LOG  App state changed: active -> background
 (NOBRIDGE) LOG  App went to background, keeping token refresh timer active

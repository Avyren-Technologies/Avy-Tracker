 (NOBRIDGE) LOG  🔍 === CAMERA KEEP-ALIVE EFFECT TRIGGERED ===
 (NOBRIDGE) LOG  🔍 Verification step changed to: initializing
 (NOBRIDGE) LOG  🔍 Current camera keep-alive state: false
 (NOBRIDGE) LOG  🔍 Camera keep-alive effect completed
 (NOBRIDGE) LOG  Face detection state: {"faceData": false, "faceDetected": false, "faceQuality": undefined, "isDetecting": false, "verificationStep": "initializing"}
 (NOBRIDGE) LOG  Modal visible - starting verification process
 (NOBRIDGE) LOG  🛡️ Detection active flag set - preventing modal cleanup
 (NOBRIDGE) LOG  Requesting camera permissions...
 (NOBRIDGE) LOG  App state changed: active -> background
 (NOBRIDGE) LOG  App went to background, keeping token refresh timer active
 (NOBRIDGE) LOG  Face detection app state changed: active -> background
 (NOBRIDGE) LOG  Liveness detection app state changed: active -> background
 (NOBRIDGE) LOG  App went to background, pausing liveness detection
 (NOBRIDGE) LOG  App state changed: background -> active
 (NOBRIDGE) LOG  App has come to the foreground!
 (NOBRIDGE) LOG  Face detection app state changed: background -> active
 (NOBRIDGE) LOG  Liveness detection app state changed: background -> active
 (NOBRIDGE) LOG  Initializing ML Kit Face Detection...
 (NOBRIDGE) LOG  ML Kit detector available, checking methods: ["status", "error", "options"]
 (NOBRIDGE) LOG  ML Kit Face Detection initialized successfully with config: {"classificationMode": true, "contourMode": true, "isTrackingEnabled": true, "landmarkMode": true, "minFaceSize": 0.1, "performanceMode": "fast"}
 (NOBRIDGE) LOG  Testing ML Kit detector...
 (NOBRIDGE) LOG  ML Kit detector test completed successfully
 (NOBRIDGE) LOG  Initializing camera with performance mode: fast
 (NOBRIDGE) LOG  🚀 Starting periodic face detection with ML Kit...
 (NOBRIDGE) LOG  🧪 Testing ML Kit detector before starting detection...
 (NOBRIDGE) LOG  ✅ ML Kit detector is ready and has detectFaces method
 (NOBRIDGE) LOG  📊 Setting isDetecting to true and starting interval...
 (NOBRIDGE) LOG  📊 Face detection state updated: {"faceData": false, "faceDetected": false, "faceQuality": undefined, "isDetecting": true, "verificationStep": "detecting"}
 (NOBRIDGE) LOG  ⏰ Starting detection interval...
 (NOBRIDGE) LOG  ✅ Face detection interval started successfully
 (NOBRIDGE) LOG  📊 Face detection state: {"faceData": false, "faceDetected": false, "faceQuality": undefined, "isDetecting": true, "verificationStep": "detecting"}
(NOBRIDGE) LOG  🔍 === CAMERA isActive CALCULATION ===
 (NOBRIDGE) LOG  🔍 visible: true
 (NOBRIDGE) LOG  🔍 verificationStep: detecting
 (NOBRIDGE) LOG  🔍 isDetecting: true
 (NOBRIDGE) LOG  🔍 cameraKeepAlive: false
 (NOBRIDGE) LOG  🔍 Final isActive result: true
 (NOBRIDGE) LOG  🔍 Camera should be active - checking persistence state...
 (NOBRIDGE) LOG  🔄 Detection interval triggered - calling processPeriodicFaceDetection...
 (NOBRIDGE) LOG  === MAIN FACE DETECTION PROCESS STARTED ===
 (NOBRIDGE) LOG  🔄 processPeriodicFaceDetection called: {"hasCamera": false, "hasMLKit": true, "isDetecting": false, "isMounted": true, "timestamp": "2025-09-09T16:36:10.323Z"}
 (NOBRIDGE) LOG  🔍 === GET CAMERA INSTANCE ===
 (NOBRIDGE) LOG  🔍 Main ref exists: false
 (NOBRIDGE) LOG  🔍 Persistent ref exists: false
 (NOBRIDGE) WARN  ❌ getCameraInstance: no camera available
 (NOBRIDGE) LOG  ❌ Skipping face detection - conditions not met: {"hasCamera": false, "hasMLKit": true, "isDetecting": false, "isMounted": true}
 (NOBRIDGE) LOG  🔍 Camera ref missing - detection will retry when camera is connected
 (NOBRIDGE) LOG  🔄 Detection interval triggered - calling processPeriodicFaceDetection...
 (NOBRIDGE) LOG  === MAIN FACE DETECTION PROCESS STARTED ===
 (NOBRIDGE) LOG  🔄 processPeriodicFaceDetection called: {"hasCamera": false, "hasMLKit": true, "isDetecting": false, "isMounted": true, "timestamp": "2025-09-09T16:36:10.341Z"}
 (NOBRIDGE) LOG  🔍 === GET CAMERA INSTANCE ===
 (NOBRIDGE) LOG  🔍 Main ref exists: false
 (NOBRIDGE) LOG  🔍 Persistent ref exists: false
 (NOBRIDGE) WARN  ❌ getCameraInstance: no camera available
 (NOBRIDGE) LOG  ❌ Skipping face detection - conditions not met: {"hasCamera": false, "hasMLKit": true, "isDetecting": false, "isMounted": true}
 (NOBRIDGE) LOG  🔍 Camera ref missing - detection will retry when camera is connected
 (NOBRIDGE) LOG  🔍 === isDetecting STATE CHANGED ===
 (NOBRIDGE) LOG  🔍 New value: true
 (NOBRIDGE) LOG  🔍 Has interval: true
 (NOBRIDGE) LOG  🔍 Has timeout: true
 (NOBRIDGE) LOG  🔍 Camera keep-alive: false
 (NOBRIDGE) LOG  🔍 Timestamp: 2025-09-09T16:36:10.412Z
 (NOBRIDGE) LOG  🔍 === FACE DETECTION STATE CHANGED ===
 (NOBRIDGE) LOG  🔍 Face data: false
 (NOBRIDGE) LOG  🔍 Face detected: false
 (NOBRIDGE) LOG  🔍 Face quality: false
 (NOBRIDGE) LOG  🔍 Is detecting: true
 (NOBRIDGE) LOG  🔍 Has interval: true
 (NOBRIDGE) LOG  🔍 Camera keep-alive: false
 (NOBRIDGE) LOG  🔍 Timestamp: 2025-09-09T16:36:10.449Z
 (NOBRIDGE) LOG  🔍 === CAMERA KEEP-ALIVE EFFECT TRIGGERED ===
 (NOBRIDGE) LOG  🔍 Verification step changed to: detecting
 (NOBRIDGE) LOG  🔍 Current camera keep-alive state: false
 (NOBRIDGE) LOG  🔍 Camera keep-alive effect completed
 (NOBRIDGE) LOG  Face detection state: {"faceData": false, "faceDetected": false, "faceQuality": undefined, "isDetecting": true, "verificationStep": "detecting"}
 (NOBRIDGE) LOG  🔄 Detection interval triggered - calling processPeriodicFaceDetection...
 (NOBRIDGE) LOG  === MAIN FACE DETECTION PROCESS STARTED ===
 (NOBRIDGE) LOG  🔄 processPeriodicFaceDetection called: {"hasCamera": false, "hasMLKit": true, "isDetecting": false, "isMounted": true, "timestamp": "2025-09-09T16:36:10.591Z"}
 (NOBRIDGE) LOG  🔍 === GET CAMERA INSTANCE ===
 (NOBRIDGE) LOG  🔍 Main ref exists: false
 (NOBRIDGE) LOG  🔍 Persistent ref exists: false
 (NOBRIDGE) WARN  ❌ getCameraInstance: no camera available
 (NOBRIDGE) LOG  ❌ Skipping face detection - conditions not met: {"hasCamera": false, "hasMLKit": true, "isDetecting": false, "isMounted": true}
 (NOBRIDGE) LOG  🔍 Camera ref missing - detection will retry when camera is connected
 (NOBRIDGE) LOG  Camera onInitialized called
 (NOBRIDGE) LOG  Camera started - ensuring detection is running
 (NOBRIDGE) LOG  🔄 Detection interval triggered - calling processPeriodicFaceDetection...
 (NOBRIDGE) LOG  === MAIN FACE DETECTION PROCESS STARTED ===
 (NOBRIDGE) LOG  🔄 processPeriodicFaceDetection called: {"hasCamera": false, "hasMLKit": true, "isDetecting": false, "isMounted": true, "timestamp": "2025-09-09T16:36:10.794Z"}
 (NOBRIDGE) LOG  🔍 === GET CAMERA INSTANCE ===
 (NOBRIDGE) LOG  🔍 Main ref exists: false
 (NOBRIDGE) LOG  🔍 Persistent ref exists: false
 (NOBRIDGE) WARN  ❌ getCameraInstance: no camera available
 (NOBRIDGE) LOG  ❌ Skipping face detection - conditions not met: {"hasCamera": false, "hasMLKit": true, "isDetecting": false, "isMounted": true}
 (NOBRIDGE) LOG  🔍 Camera ref missing - detection will retry when camera is connected
 (NOBRIDGE) LOG  Camera initialized - connecting reference to face detection hook
 (NOBRIDGE) LOG  🔍 === SETTING CAMERA REFERENCE ===
 (NOBRIDGE) LOG  🔍 Camera component exists: true
 (NOBRIDGE) LOG  🔍 Component type: object
 (NOBRIDGE) LOG  🔍 Has component: true
 (NOBRIDGE) LOG  🔍 Component methods: ["props", "context", "refs", "updater", "displayName", "isNativeViewMounted", "lastUIRotation", "rotationHelper", "onViewReady", "onAverageFpsChanged", "onInitialized", "onStarted", "onStopped", "onPreviewStarted", "onPreviewStopped", "onShutter", "onOutputOrientationChanged", "onPreviewOrientationChanged", "onError", "onCodeScanned", "ref", "lastFrameProcessor", "state", "_reactInternals", "_reactInternalInstance"]
 (NOBRIDGE) LOG  🔍 Has takePhoto method: true
 (NOBRIDGE) LOG  🔍 Camera reference stored in persistent ref
 (NOBRIDGE) LOG  ✅ Camera reference set successfully: {"cameraRefType": "object", "hasCameraRef": true, "hasTakePhotoMethod": true, "persistentRefState": "valid"}
 (NOBRIDGE) LOG  🔄 Camera connected during active detection - detection will now proceed
 (NOBRIDGE) LOG  🔄 Detection interval triggered - calling processPeriodicFaceDetection...
 (NOBRIDGE) LOG  === MAIN FACE DETECTION PROCESS STARTED ===
 (NOBRIDGE) LOG  🔄 processPeriodicFaceDetection called: {"hasCamera": true, "hasMLKit": true, "isDetecting": false, "isMounted": true, "timestamp": "2025-09-09T16:36:11.083Z"}
 (NOBRIDGE) LOG  🔍 === GET CAMERA INSTANCE ===
 (NOBRIDGE) LOG  🔍 Main ref exists: true
 (NOBRIDGE) LOG  🔍 Persistent ref exists: true
 (NOBRIDGE) LOG  ✅ getCameraInstance: returning main ref camera instance
 (NOBRIDGE) LOG  ✅ Starting periodic face detection with enhanced photo processing...
 (NOBRIDGE) LOG  ✅ Camera is active and ready for photo capture
 (NOBRIDGE) LOG  📸 Attempting to capture photo for face detection...
 (NOBRIDGE) LOG  🔍 Camera state before photo capture: {"cameraMethods": ["props", "context", "refs", "updater", "displayName", "isNativeViewMounted", "lastUIRotation", "rotationHelper", "onViewReady", "onAverageFpsChanged", "onInitialized", "onStarted", "onStopped", "onPreviewStarted", "onPreviewStopped", "onShutter", "onOutputOrientationChanged", "onPreviewOrientationChanged", "onError", "onCodeScanned", "ref", "lastFrameProcessor", "state", "_reactInternals", "_reactInternalInstance"], "cameraRefExists": true, "hasTakePhoto": true, "isActive": true}
 (NOBRIDGE) LOG  ⚙️ Optimizing camera settings for ML Kit...
 (NOBRIDGE) LOG  🔄 Detection interval triggered - calling processPeriodicFaceDetection...
 (NOBRIDGE) LOG  === MAIN FACE DETECTION PROCESS STARTED ===
 (NOBRIDGE) LOG  🔄 processPeriodicFaceDetection called: {"hasCamera": true, "hasMLKit": true, "isDetecting": false, "isMounted": true, "timestamp": "2025-09-09T16:36:11.398Z"}
 (NOBRIDGE) LOG  🔍 === GET CAMERA INSTANCE ===
 (NOBRIDGE) LOG  🔍 Main ref exists: true
 (NOBRIDGE) LOG  🔍 Persistent ref exists: true
 (NOBRIDGE) LOG  ✅ getCameraInstance: returning main ref camera instance
 (NOBRIDGE) LOG  ✅ Starting periodic face detection with enhanced photo processing...
 (NOBRIDGE) LOG  ✅ Camera is active and ready for photo capture
 (NOBRIDGE) ERROR  Frame processor error: {}
 (NOBRIDGE) LOG  📸 Attempting to capture photo for face detection...
 (NOBRIDGE) LOG  🔍 Camera state before photo capture: {"cameraMethods": ["props", "context", "refs", "updater", "displayName", "isNativeViewMounted", "lastUIRotation", "rotationHelper", "onViewReady", "onAverageFpsChanged", "onInitialized", "onStarted", "onStopped", "onPreviewStarted", "onPreviewStopped", "onShutter", "onOutputOrientationChanged", "onPreviewOrientationChanged", "onError", "onCodeScanned", "ref", "lastFrameProcessor", "state", "_reactInternals", "_reactInternalInstance"], "cameraRefExists": true, "hasTakePhoto": true, "isActive": true}
 (NOBRIDGE) LOG  ⚙️ Optimizing camera settings for ML Kit...
 (NOBRIDGE) LOG  🔄 Detection interval triggered - calling processPeriodicFaceDetection...
 (NOBRIDGE) LOG  === MAIN FACE DETECTION PROCESS STARTED ===
 (NOBRIDGE) LOG  🔄 processPeriodicFaceDetection called: {"hasCamera": true, "hasMLKit": true, "isDetecting": false, "isMounted": true, "timestamp": "2025-09-09T16:36:11.728Z"}
 (NOBRIDGE) LOG  🔍 === GET CAMERA INSTANCE ===
 (NOBRIDGE) LOG  🔍 Main ref exists: true
 (NOBRIDGE) LOG  🔍 Persistent ref exists: true
 (NOBRIDGE) LOG  ✅ getCameraInstance: returning main ref camera instance
 (NOBRIDGE) LOG  ✅ Starting periodic face detection with enhanced photo processing...
 (NOBRIDGE) LOG  ✅ Camera is active and ready for photo capture
 (NOBRIDGE) LOG  📸 Attempting to capture photo for face detection...
 (NOBRIDGE) LOG  🔍 Camera state before photo capture: {"cameraMethods": ["props", "context", "refs", "updater", "displayName", "isNativeViewMounted", "lastUIRotation", "rotationHelper", "onViewReady", "onAverageFpsChanged", "onInitialized", "onStarted", "onStopped", "onPreviewStarted", "onPreviewStopped", "onShutter", "onOutputOrientationChanged", "onPreviewOrientationChanged", "onError", "onCodeScanned", "ref", "lastFrameProcessor", "state", "_reactInternals", "_reactInternalInstance"], "cameraRefExists": true, "hasTakePhoto": true, "isActive": true}
 (NOBRIDGE) LOG  ⚙️ Optimizing camera settings for ML Kit...
 (NOBRIDGE) LOG  ✅ Photo captured successfully: {"height": 1200, "path": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy7711162719775250794.jpg", "width": 1600}
 (NOBRIDGE) LOG  📁 Photo URI generated: file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy7711162719775250794.jpg
 (NOBRIDGE) LOG  Processing photo for ML Kit compatibility...
 (NOBRIDGE) LOG  Waiting for photo file to be fully written...
 (NOBRIDGE) LOG  🔄 Detection interval triggered - calling processPeriodicFaceDetection...
 (NOBRIDGE) LOG  === MAIN FACE DETECTION PROCESS STARTED ===
 (NOBRIDGE) LOG  🔄 processPeriodicFaceDetection called: {"hasCamera": true, "hasMLKit": true, "isDetecting": false, "isMounted": true, "timestamp": "2025-09-09T16:36:12.038Z"}
 (NOBRIDGE) LOG  🔍 === GET CAMERA INSTANCE ===
 (NOBRIDGE) LOG  🔍 Main ref exists: true
 (NOBRIDGE) LOG  🔍 Persistent ref exists: true
 (NOBRIDGE) LOG  ✅ getCameraInstance: returning main ref camera instance
 (NOBRIDGE) LOG  ✅ Starting periodic face detection with enhanced photo processing...
 (NOBRIDGE) LOG  ✅ Camera is active and ready for photo capture
 (NOBRIDGE) LOG  ✅ Photo captured successfully: {"height": 1200, "path": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy1942692884280313318.jpg", "width": 1600}
 (NOBRIDGE) LOG  📁 Photo URI generated: file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy1942692884280313318.jpg
 (NOBRIDGE) LOG  Processing photo for ML Kit compatibility...
 (NOBRIDGE) LOG  Waiting for photo file to be fully written...
 (NOBRIDGE) LOG  📸 Attempting to capture photo for face detection...
 (NOBRIDGE) LOG  🔍 Camera state before photo capture: {"cameraMethods": ["props", "context", "refs", "updater", "displayName", "isNativeViewMounted", "lastUIRotation", "rotationHelper", "onViewReady", "onAverageFpsChanged", "onInitialized", "onStarted", "onStopped", "onPreviewStarted", "onPreviewStopped", "onShutter", "onOutputOrientationChanged", "onPreviewOrientationChanged", "onError", "onCodeScanned", "ref", "lastFrameProcessor", "state", "_reactInternals", "_reactInternalInstance"], "cameraRefExists": true, "hasTakePhoto": true, "isActive": true}
 (NOBRIDGE) LOG  ⚙️ Optimizing camera settings for ML Kit...
 (NOBRIDGE) ERROR  Frame processor error: {}
 (NOBRIDGE) LOG  🔄 Detection interval triggered - calling processPeriodicFaceDetection...
 (NOBRIDGE) LOG  === MAIN FACE DETECTION PROCESS STARTED ===
 (NOBRIDGE) LOG  🔄 processPeriodicFaceDetection called: {"hasCamera": true, "hasMLKit": true, "isDetecting": false, "isMounted": true, "timestamp": "2025-09-09T16:36:12.349Z"}
 (NOBRIDGE) LOG  🔍 === GET CAMERA INSTANCE ===
 (NOBRIDGE) LOG  🔍 Main ref exists: true
 (NOBRIDGE) LOG  🔍 Persistent ref exists: true
 (NOBRIDGE) LOG  ✅ getCameraInstance: returning main ref camera instance
 (NOBRIDGE) LOG  ✅ Starting periodic face detection with enhanced photo processing...
 (NOBRIDGE) LOG  ✅ Camera is active and ready for photo capture
 (NOBRIDGE) LOG  ✅ Photo captured successfully: {"height": 1200, "path": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy8208854592751666294.jpg", "width": 1600}
 (NOBRIDGE) LOG  📁 Photo URI generated: file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy8208854592751666294.jpg
 (NOBRIDGE) LOG  Processing photo for ML Kit compatibility...
 (NOBRIDGE) LOG  Waiting for photo file to be fully written...
 (NOBRIDGE) LOG  📸 Attempting to capture photo for face detection...
 (NOBRIDGE) LOG  🔍 Camera state before photo capture: {"cameraMethods": ["props", "context", "refs", "updater", "displayName", "isNativeViewMounted", "lastUIRotation", "rotationHelper", "onViewReady", "onAverageFpsChanged", "onInitialized", "onStarted", "onStopped", "onPreviewStarted", "onPreviewStopped", "onShutter", "onOutputOrientationChanged", "onPreviewOrientationChanged", "onError", "onCodeScanned", "ref", "lastFrameProcessor", "state", "_reactInternals", "_reactInternalInstance"], "cameraRefExists": true, "hasTakePhoto": true, "isActive": true}
 (NOBRIDGE) LOG  ⚙️ Optimizing camera settings for ML Kit...
 (NOBRIDGE) LOG  🔄 Detection interval triggered - calling processPeriodicFaceDetection...
 (NOBRIDGE) LOG  === MAIN FACE DETECTION PROCESS STARTED ===
 (NOBRIDGE) LOG  🔄 processPeriodicFaceDetection called: {"hasCamera": true, "hasMLKit": true, "isDetecting": false, "isMounted": true, "timestamp": "2025-09-09T16:36:12.736Z"}
 (NOBRIDGE) LOG  🔍 === GET CAMERA INSTANCE ===
 (NOBRIDGE) LOG  🔍 Main ref exists: true
 (NOBRIDGE) LOG  🔍 Persistent ref exists: true
 (NOBRIDGE) LOG  ✅ getCameraInstance: returning main ref camera instance
 (NOBRIDGE) LOG  ✅ Starting periodic face detection with enhanced photo processing...
 (NOBRIDGE) LOG  ✅ Camera is active and ready for photo capture
 (NOBRIDGE) LOG  ✅ Photo captured successfully: {"height": 1200, "path": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy4103946455503780928.jpg", "width": 1600}
 (NOBRIDGE) LOG  📁 Photo URI generated: file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy4103946455503780928.jpg
 (NOBRIDGE) LOG  Processing photo for ML Kit compatibility...
 (NOBRIDGE) LOG  Waiting for photo file to be fully written...
 (NOBRIDGE) LOG  Photo file verification: {"exists": true, "fileSize": 417424, "path": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy7711162719775250794.jpg"}
 (NOBRIDGE) LOG  Photo file verification: {"exists": true, "fileSize": 425209, "path": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy1942692884280313318.jpg"}
 (NOBRIDGE) LOG  Photo file verified successfully: {"path": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy7711162719775250794.jpg", "size": 417424, "uri": "file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy7711162719775250794.jpg"}
 (NOBRIDGE) LOG  Applying ML Kit photo processing...
 (NOBRIDGE) LOG  Photo file verified successfully: {"path": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy1942692884280313318.jpg", "size": 425209, "uri": "file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy1942692884280313318.jpg"}
 (NOBRIDGE) LOG  Applying ML Kit photo processing...
 (NOBRIDGE) LOG  Photo file read successfully, content length: 556568
 (NOBRIDGE) LOG  ✅ Photo has valid image format header
 (NOBRIDGE) LOG  Additional delay for file system sync...
 (NOBRIDGE) LOG  Photo file read successfully, content length: 566948
 (NOBRIDGE) LOG  ✅ Photo has valid image format header
 (NOBRIDGE) LOG  Additional delay for file system sync...
 (NOBRIDGE) LOG  📸 Attempting to capture photo for face detection...
 (NOBRIDGE) LOG  🔍 Camera state before photo capture: {"cameraMethods": ["props", "context", "refs", "updater", "displayName", "isNativeViewMounted", "lastUIRotation", "rotationHelper", "onViewReady", "onAverageFpsChanged", "onInitialized", "onStarted", "onStopped", "onPreviewStarted", "onPreviewStopped", "onShutter", "onOutputOrientationChanged", "onPreviewOrientationChanged", "onError", "onCodeScanned", "ref", "lastFrameProcessor", "state", "_reactInternals", "_reactInternalInstance"], "cameraRefExists": true, "hasTakePhoto": true, "isActive": true}
 (NOBRIDGE) LOG  ⚙️ Optimizing camera settings for ML Kit...
 (NOBRIDGE) LOG  Photo file verification: {"exists": true, "fileSize": 417240, "path": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy8208854592751666294.jpg"}
 (NOBRIDGE) LOG  Photo file verified successfully: {"path": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy8208854592751666294.jpg", "size": 417240, "uri": "file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy8208854592751666294.jpg"}
 (NOBRIDGE) LOG  Applying ML Kit photo processing...
 (NOBRIDGE) LOG  🔄 Detection interval triggered - calling processPeriodicFaceDetection...
 (NOBRIDGE) LOG  === MAIN FACE DETECTION PROCESS STARTED ===
 (NOBRIDGE) LOG  🔄 processPeriodicFaceDetection called: {"hasCamera": true, "hasMLKit": true, "isDetecting": false, "isMounted": true, "timestamp": "2025-09-09T16:36:12.985Z"}
 (NOBRIDGE) LOG  🔍 === GET CAMERA INSTANCE ===
 (NOBRIDGE) LOG  🔍 Main ref exists: true
 (NOBRIDGE) LOG  🔍 Persistent ref exists: true
 (NOBRIDGE) LOG  ✅ getCameraInstance: returning main ref camera instance
 (NOBRIDGE) LOG  ✅ Starting periodic face detection with enhanced photo processing...
 (NOBRIDGE) LOG  ✅ Camera is active and ready for photo capture
 (NOBRIDGE) LOG  Photo file read successfully, content length: 556320
 (NOBRIDGE) LOG  ✅ Photo has valid image format header
 (NOBRIDGE) LOG  Additional delay for file system sync...
 (NOBRIDGE) LOG  🤖 Sending photo to ML Kit for face detection...
 (NOBRIDGE) LOG  🔍 ML Kit detector state before detection: {"availableMethods": ["status", "error", "options"], "detectorType": "object", "isInitialized": true, "photoPath": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy7711162719775250794.jpg", "photoUri": "file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy7711162719775250794.jpg"}
 (NOBRIDGE) ERROR  Frame processor error: {}
 (NOBRIDGE) LOG  🤖 Sending photo to ML Kit for face detection...
 (NOBRIDGE) LOG  🔍 ML Kit detector state before detection: {"availableMethods": ["status", "error", "options"], "detectorType": "object", "isInitialized": true, "photoPath": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy1942692884280313318.jpg", "photoUri": "file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy1942692884280313318.jpg"}
 (NOBRIDGE) LOG  📸 Attempting to capture photo for face detection...
 (NOBRIDGE) LOG  🔍 Camera state before photo capture: {"cameraMethods": ["props", "context", "refs", "updater", "displayName", "isNativeViewMounted", "lastUIRotation", "rotationHelper", "onViewReady", "onAverageFpsChanged", "onInitialized", "onStarted", "onStopped", "onPreviewStarted", "onPreviewStopped", "onShutter", "onOutputOrientationChanged", "onPreviewOrientationChanged", "onError", "onCodeScanned", "ref", "lastFrameProcessor", "state", "_reactInternals", "_reactInternalInstance"], "cameraRefExists": true, "hasTakePhoto": true, "isActive": true}
 (NOBRIDGE) LOG  ⚙️ Optimizing camera settings for ML Kit...
 (NOBRIDGE) LOG  ✅ Photo captured successfully: {"height": 1200, "path": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy2122873525857027696.jpg", "width": 1600}
 (NOBRIDGE) LOG  📁 Photo URI generated: file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy2122873525857027696.jpg
 (NOBRIDGE) LOG  Processing photo for ML Kit compatibility...
 (NOBRIDGE) LOG  Waiting for photo file to be fully written...
 (NOBRIDGE) LOG  Photo file verification: {"exists": true, "fileSize": 421231, "path": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy4103946455503780928.jpg"}
 (NOBRIDGE) LOG  Photo file verified successfully: {"path": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy4103946455503780928.jpg", "size": 421231, "uri": "file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy4103946455503780928.jpg"}
 (NOBRIDGE) LOG  Applying ML Kit photo processing...
 (NOBRIDGE) LOG  🔄 Detection interval triggered - calling processPeriodicFaceDetection...
 (NOBRIDGE) LOG  === MAIN FACE DETECTION PROCESS STARTED ===
 (NOBRIDGE) LOG  🔄 processPeriodicFaceDetection called: {"hasCamera": true, "hasMLKit": true, "isDetecting": false, "isMounted": true, "timestamp": "2025-09-09T16:36:13.301Z"}
 (NOBRIDGE) LOG  🔍 === GET CAMERA INSTANCE ===
 (NOBRIDGE) LOG  🔍 Main ref exists: true
 (NOBRIDGE) LOG  🔍 Persistent ref exists: true
 (NOBRIDGE) LOG  ✅ getCameraInstance: returning main ref camera instance
 (NOBRIDGE) LOG  ✅ Starting periodic face detection with enhanced photo processing...
 (NOBRIDGE) LOG  ✅ Camera is active and ready for photo capture
 (NOBRIDGE) LOG  🤖 Sending photo to ML Kit for face detection...
 (NOBRIDGE) LOG  🔍 ML Kit detector state before detection: {"availableMethods": ["status", "error", "options"], "detectorType": "object", "isInitialized": true, "photoPath": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy8208854592751666294.jpg", "photoUri": "file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy8208854592751666294.jpg"}
 (NOBRIDGE) LOG  Photo file read successfully, content length: 561644
 (NOBRIDGE) LOG  ✅ Photo has valid image format header
 (NOBRIDGE) LOG  Additional delay for file system sync...
 (NOBRIDGE) LOG  ✅ Photo captured successfully: {"height": 1200, "path": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy7438987835424621993.jpg", "width": 1600}
 (NOBRIDGE) LOG  📁 Photo URI generated: file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy7438987835424621993.jpg
 (NOBRIDGE) LOG  Processing photo for ML Kit compatibility...
 (NOBRIDGE) LOG  Waiting for photo file to be fully written...
 (NOBRIDGE) LOG  📸 Attempting to capture photo for face detection...
 (NOBRIDGE) LOG  🔍 Camera state before photo capture: {"cameraMethods": ["props", "context", "refs", "updater", "displayName", "isNativeViewMounted", "lastUIRotation", "rotationHelper", "onViewReady", "onAverageFpsChanged", "onInitialized", "onStarted", "onStopped", "onPreviewStarted", "onPreviewStopped", "onShutter", "onOutputOrientationChanged", "onPreviewOrientationChanged", "onError", "onCodeScanned", "ref", "lastFrameProcessor", "state", "_reactInternals", "_reactInternalInstance"], "cameraRefExists": true, "hasTakePhoto": true, "isActive": true}
 (NOBRIDGE) LOG  ⚙️ Optimizing camera settings for ML Kit...
 (NOBRIDGE) ERROR  Frame processor error: {}
 (NOBRIDGE) LOG  🔄 Detection interval triggered - calling processPeriodicFaceDetection...
 (NOBRIDGE) LOG  === MAIN FACE DETECTION PROCESS STARTED ===
 (NOBRIDGE) LOG  🔄 processPeriodicFaceDetection called: {"hasCamera": true, "hasMLKit": true, "isDetecting": false, "isMounted": true, "timestamp": "2025-09-09T16:36:13.616Z"}
 (NOBRIDGE) LOG  🔍 === GET CAMERA INSTANCE ===
 (NOBRIDGE) LOG  🔍 Main ref exists: true
 (NOBRIDGE) LOG  🔍 Persistent ref exists: true
 (NOBRIDGE) LOG  ✅ getCameraInstance: returning main ref camera instance
 (NOBRIDGE) LOG  ✅ Starting periodic face detection with enhanced photo processing...
 (NOBRIDGE) LOG  ✅ Camera is active and ready for photo capture
 (NOBRIDGE) LOG  🤖 Sending photo to ML Kit for face detection...
 (NOBRIDGE) LOG  🔍 ML Kit detector state before detection: {"availableMethods": ["status", "error", "options"], "detectorType": "object", "isInitialized": true, "photoPath": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy4103946455503780928.jpg", "photoUri": "file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy4103946455503780928.jpg"}
 (NOBRIDGE) LOG  ✅ Photo captured successfully: {"height": 1200, "path": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy4279865635381619950.jpg", "width": 1600}
 (NOBRIDGE) LOG  📁 Photo URI generated: file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy4279865635381619950.jpg
 (NOBRIDGE) LOG  Processing photo for ML Kit compatibility...
 (NOBRIDGE) LOG  Waiting for photo file to be fully written...
 (NOBRIDGE) LOG  Photo file verification: {"exists": true, "fileSize": 435211, "path": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy2122873525857027696.jpg"}
 (NOBRIDGE) LOG  ✅ ML Kit detection completed successfully: {"faceCount": 1, "faces": [{"contours": [Array], "frame": [Object], "headEulerAngleX": -1.214473009109497, "headEulerAngleY": 1.6524018049240112, "headEulerAngleZ": -3.6456222534179688, "landmarks": [Array], "leftEyeOpenProbability": 0.9942908883094788, "rightEyeOpenProbability": 0.998312771320343, "smilingProbability": 0.010426056571304798, "trackingID": 0}], "rawResult": {"faces": [[Object]], "imagePath": "file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy7711162719775250794.jpg"}, "success": true}
 (NOBRIDGE) LOG  🎉 SUCCESS: Face detection completed with 1 face(s)
 (NOBRIDGE) LOG  🎯 Processing detected faces...
 (NOBRIDGE) LOG  👤 Detected face details: {"headAngles": {"x": -1.214473009109497, "y": 1.6524018049240112, "z": -3.6456222534179688}, "leftEyeOpen": 0.9942908883094788, "rightEyeOpen": 0.998312771320343, "smiling": 0.010426056571304798, "trackingID": 0}
 (NOBRIDGE) LOG  🔄 Converted face data: {"attributes": {"age": undefined, "emotions": {"angry": 0, "happy": 0.010426056571304798, "neutral": 0.9895739434286952, "sad": 0, "surprised": 0}, "gender": undefined, "headEulerAngles": {"x": -1.214473009109497, "y": 1.6524018049240112, "z": -3.6456222534179688}, "smiling": 0.010426056571304798}, "bounds": {"height": 707, "width": 707, "x": 214, "y": 399}, "contours": [], "faceId": "0", "landmarks": [{"position": [Object], "type": "0"}, {"position": [Object], "type": "1"}, {"position": [Object], "type": "3"}, {"position": [Object], "type": "4"}, {"position": [Object], "type": "5"}, {"position": [Object], "type": "6"}, {"position": [Object], "type": "7"}, {"position": [Object], "type": "9"}, {"position": [Object], "type": "10"}, {"position": [Object], "type": "11"}], "leftEyeOpenProbability": 0.9942908883094788, "rightEyeOpenProbability": 0.998312771320343, "rollAngle": -3.6456222534179688, "timestamp": 1757435773796, "trackingId": "0", "yawAngle": 1.6524018049240112}
 (NOBRIDGE) LOG  Face quality calculation: {"bounds": {"height": 707, "width": 707, "x": 214, "y": 399}, "faceArea": 499849, "faceRatio": 0.26033802083333335, "maxFaceSize": 0.6, "minFaceSize": 0.05, "screenArea": 1920000}
 (NOBRIDGE) LOG  Quality scores: {"angleQuality": 0.9392396291097005, "lightingQuality": 1, "overall": 0.8610958470662435, "sizeQuality": 0.6983098958333334, "threshold": 0.4}
 (NOBRIDGE) LOG  ✅ Face detection state updated successfully
 (NOBRIDGE) LOG  📊 Face quality score: 0.8610958470662435
 (NOBRIDGE) LOG  🔄 Detection interval cleared - face found
 (NOBRIDGE) LOG  ⏰ Detection timeout cleared - face found
 (NOBRIDGE) LOG  🎉 Face detection completed successfully - stopping all timers
 (NOBRIDGE) LOG  ⏱️ Face detection process completed in 2721.60ms
 (NOBRIDGE) LOG  === MAIN FACE DETECTION PROCESS COMPLETED ===
 (NOBRIDGE) LOG  Photo file verified successfully: {"path": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy2122873525857027696.jpg", "size": 435211, "uri": "file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy2122873525857027696.jpg"}
 (NOBRIDGE) LOG  Applying ML Kit photo processing...
 (NOBRIDGE) LOG  🔍 === CAMERA isActive CALCULATION ===
 (NOBRIDGE) LOG  🔍 visible: true
 (NOBRIDGE) LOG  🔍 verificationStep: detecting
 (NOBRIDGE) LOG  🔍 isDetecting: false
 (NOBRIDGE) LOG  🔍 cameraKeepAlive: false
 (NOBRIDGE) LOG  🔍 Final isActive result: true
 (NOBRIDGE) LOG  🔍 Camera should be active - checking persistence state...
 (NOBRIDGE) LOG  📸 Attempting to capture photo for face detection...
 (NOBRIDGE) LOG  🔍 Camera state before photo capture: {"cameraMethods": ["props", "context", "refs", "updater", "displayName", "isNativeViewMounted", "lastUIRotation", "rotationHelper", "onViewReady", "onAverageFpsChanged", "onInitialized", "onStarted", "onStopped", "onPreviewStarted", "onPreviewStopped", "onShutter", "onOutputOrientationChanged", "onPreviewOrientationChanged", "onError", "onCodeScanned", "ref", "lastFrameProcessor", "state", "_reactInternals", "_reactInternalInstance"], "cameraRefExists": true, "hasTakePhoto": true, "isActive": true}
 (NOBRIDGE) LOG  ⚙️ Optimizing camera settings for ML Kit...
 (NOBRIDGE) LOG  Photo file read successfully, content length: 580284
 (NOBRIDGE) LOG  ✅ Photo has valid image format header
 (NOBRIDGE) LOG  Additional delay for file system sync...
 (NOBRIDGE) ERROR  Frame processor error: {}
 (NOBRIDGE) LOG  ✅ Photo captured successfully: {"height": 1200, "path": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy7269548646503629037.jpg", "width": 1600}
 (NOBRIDGE) LOG  📁 Photo URI generated: file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy7269548646503629037.jpg
 (NOBRIDGE) LOG  Processing photo for ML Kit compatibility...
 (NOBRIDGE) LOG  Waiting for photo file to be fully written...
 (NOBRIDGE) LOG  ✅ ML Kit detection completed successfully: {"faceCount": 1, "faces": [{"contours": [Array], "frame": [Object], "headEulerAngleX": -6.946013927459717, "headEulerAngleY": 4.8107171058654785, "headEulerAngleZ": -3.633603096008301, "landmarks": [Array], "leftEyeOpenProbability": 0.9987824559211731, "rightEyeOpenProbability": 0.9974306225776672, "smilingProbability": 0.008996601216495037, "trackingID": 0}], "rawResult": {"faces": [[Object]], "imagePath": "file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy1942692884280313318.jpg"}, "success": true}
 (NOBRIDGE) LOG  🎉 SUCCESS: Face detection completed with 1 face(s)
 (NOBRIDGE) LOG  🎯 Processing detected faces...
 (NOBRIDGE) LOG  👤 Detected face details: {"headAngles": {"x": -6.946013927459717, "y": 4.8107171058654785, "z": -3.633603096008301}, "leftEyeOpen": 0.9987824559211731, "rightEyeOpen": 0.9974306225776672, "smiling": 0.008996601216495037, "trackingID": 0}
 (NOBRIDGE) LOG  🔄 Converted face data: {"attributes": {"age": undefined, "emotions": {"angry": 0, "happy": 0.008996601216495037, "neutral": 0.991003398783505, "sad": 0, "surprised": 0}, "gender": undefined, "headEulerAngles": {"x": -6.946013927459717, "y": 4.8107171058654785, "z": -3.633603096008301}, "smiling": 0.008996601216495037}, "bounds": {"height": 700, "width": 700, "x": 249, "y": 438}, "contours": [], "faceId": "0", "landmarks": [{"position": [Object], "type": "0"}, {"position": [Object], "type": "1"}, {"position": [Object], "type": "3"}, {"position": [Object], "type": "4"}, {"position": [Object], "type": "5"}, {"position": [Object], "type": "6"}, {"position": [Object], "type": "7"}, {"position": [Object], "type": "9"}, {"position": [Object], "type": "10"}, {"position": [Object], "type": "11"}], "leftEyeOpenProbability": 0.9987824559211731, "rightEyeOpenProbability": 0.9974306225776672, "rollAngle": -3.633603096008301, "timestamp": 1757435774166, "trackingId": "0", "yawAngle": 4.8107171058654785}
 (NOBRIDGE) LOG  Face quality calculation: {"bounds": {"height": 700, "width": 700, "x": 249, "y": 438}, "faceArea": 490000, "faceRatio": 0.2552083333333333, "maxFaceSize": 0.6, "minFaceSize": 0.05, "screenArea": 1920000}
 (NOBRIDGE) LOG  Quality scores: {"angleQuality": 0.9198213815689087, "lightingQuality": 1, "overall": 0.8655297478040059, "sizeQuality": 0.7239583333333335, "threshold": 0.4}
 (NOBRIDGE) LOG  ✅ Face detection state updated successfully
 (NOBRIDGE) LOG  📊 Face quality score: 0.8655297478040059
 (NOBRIDGE) LOG  🎉 Face detection completed successfully - stopping all timers
 (NOBRIDGE) LOG  ⏱️ Face detection process completed in 2773.47ms
 (NOBRIDGE) LOG  === MAIN FACE DETECTION PROCESS COMPLETED ===
 (NOBRIDGE) LOG  🔍 === isDetecting STATE CHANGED ===
 (NOBRIDGE) LOG  🔍 New value: false
 (NOBRIDGE) LOG  🔍 Has interval: false
 (NOBRIDGE) LOG  🔍 Has timeout: false
 (NOBRIDGE) LOG  🔍 Camera keep-alive: false
 (NOBRIDGE) LOG  🔍 Timestamp: 2025-09-09T16:36:14.189Z
 (NOBRIDGE) LOG  🔍 === FACE DETECTION STATE CHANGED ===
 (NOBRIDGE) LOG  🔍 Face data: true
 (NOBRIDGE) LOG  🔍 Face detected: true
 (NOBRIDGE) LOG  🔍 Face quality: true
 (NOBRIDGE) LOG  🔍 Is detecting: false
 (NOBRIDGE) LOG  🔍 Has interval: false
 (NOBRIDGE) LOG  🔍 Camera keep-alive: false
 (NOBRIDGE) LOG  🔍 Timestamp: 2025-09-09T16:36:14.207Z
 (NOBRIDGE) LOG  👁️ Face data effect triggered: {"faceDataTimestamp": 1757435773796, "hasFaceData": true, "isLivenessActive": false}
 (NOBRIDGE) LOG  👁️ Not processing face data: {"reason": "Liveness not active"}
 (NOBRIDGE) LOG  Face detection state: {"faceData": true, "faceDetected": true, "faceQuality": true, "isDetecting": false, "verificationStep": "detecting"}
 (NOBRIDGE) LOG  Moving to liveness detection step - good quality face detected
 (NOBRIDGE) LOG  🛑 stopDetection called: {"hasInterval": false, "hasTimeout": false, "isDetecting": false, "stack": "    at anonymous (http://192.168.0.110:8081/node_modules/expo-router/entry.bundle//&platform=android&dev=true&hot=false&transform.engine=hermes&transform.bytecode=1&transform.routerRoot=app&unstable_transformProfile=hermes-stable:392962:25)
    at anonymous (http://192.168.0.110:8081/node_modules/expo-router/entry.bundle//&platform=android&dev=true&hot=false&transform.engine=hermes&transform.bytecode=1&transform.routerRoot=app&unstable_transformProfile=hermes-stable:391220:24)
    at commitHookEffectListMount (http://192.168.0.110:8081/node_modules/expo-router/entry.bundle//&platform=android&dev=true&hot=false&transform.engine=hermes&transform.bytecode=1&transform.routerRoot=app&unstable_transformProfile=hermes-stable:31461:35)", "timestamp": "2025-09-09T16:36:14.219Z"}
 (NOBRIDGE) LOG  🛑 Face detection stopped - isDetecting set to false
 (NOBRIDGE) LOG  Photo file verification: {"exists": true, "fileSize": 441222, "path": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy7438987835424621993.jpg"}
 (NOBRIDGE) LOG  🔍 === CAMERA isActive CALCULATION ===
 (NOBRIDGE) LOG  🔍 visible: true
 (NOBRIDGE) LOG  🔍 verificationStep: liveness
 (NOBRIDGE) LOG  🔍 isDetecting: false
 (NOBRIDGE) LOG  🔍 cameraKeepAlive: false
 (NOBRIDGE) LOG  🔍 Final isActive result: true
 (NOBRIDGE) LOG  🔍 Camera should be active - checking persistence state...
 (NOBRIDGE) LOG  Photo file verified successfully: {"path": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy7438987835424621993.jpg", "size": 441222, "uri": "file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy7438987835424621993.jpg"}
 (NOBRIDGE) LOG  Applying ML Kit photo processing...
 (NOBRIDGE) LOG  🔍 === FACE DETECTION STATE CHANGED ===
 (NOBRIDGE) LOG  🔍 Face data: true
 (NOBRIDGE) LOG  🔍 Face detected: true
 (NOBRIDGE) LOG  🔍 Face quality: true
 (NOBRIDGE) LOG  🔍 Is detecting: false
 (NOBRIDGE) LOG  🔍 Has interval: false
 (NOBRIDGE) LOG  🔍 Camera keep-alive: false
 (NOBRIDGE) LOG  🔍 Timestamp: 2025-09-09T16:36:14.374Z
 (NOBRIDGE) LOG  👁️ Face data effect triggered: {"faceDataTimestamp": 1757435774166, "hasFaceData": true, "isLivenessActive": false}
 (NOBRIDGE) LOG  👁️ Not processing face data: {"reason": "Liveness not active"}
 (NOBRIDGE) LOG  🔍 === CAMERA KEEP-ALIVE EFFECT TRIGGERED ===
 (NOBRIDGE) LOG  🔍 Verification step changed to: liveness
 (NOBRIDGE) LOG  🔍 Current camera keep-alive state: false
 (NOBRIDGE) LOG  🔒 Enabling camera keep-alive to prevent native view detachment
 (NOBRIDGE) LOG  🔒 === ENABLING CAMERA KEEP-ALIVE ===
 (NOBRIDGE) LOG  🔒 Previous state: false
 (NOBRIDGE) LOG  🔒 New state: true
 (NOBRIDGE) LOG  🔄 Critical transition detected - stabilizing camera component
 (NOBRIDGE) LOG  🔒 Monitoring camera persistence during liveness/capturing...
 (NOBRIDGE) LOG  🔍 Camera keep-alive effect completed
 (NOBRIDGE) LOG  ⏰ Starting countdown timer: 5
 (NOBRIDGE) LOG  Face detection state: {"faceData": true, "faceDetected": true, "faceQuality": true, "isDetecting": false, "verificationStep": "liveness"}
 (NOBRIDGE) LOG  ⚠️ Liveness timeout but face detected - proceeding to capture (ultra-forgiving)
 (NOBRIDGE) LOG  🔒 Keeping camera active during transition to prevent native view detachment
 (NOBRIDGE) LOG  🔍 Stabilizing camera for final capture...
 (NOBRIDGE) LOG  Photo file read successfully, content length: 588296
 (NOBRIDGE) LOG  ✅ Photo has valid image format header
 (NOBRIDGE) LOG  Additional delay for file system sync...
 (NOBRIDGE) LOG  ✅ ML Kit detection completed successfully: {"faceCount": 1, "faces": [{"contours": [Array], "frame": [Object], "headEulerAngleX": -10.048006057739258, "headEulerAngleY": 5.176116943359375, "headEulerAngleZ": -3.5073049068450928, "landmarks": [Array], "leftEyeOpenProbability": 0.9987824559211731, "rightEyeOpenProbability": 0.998600959777832, "smilingProbability": 0.011907465755939484, "trackingID": 0}], "rawResult": {"faces": [[Object]], "imagePath": "file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy8208854592751666294.jpg"}, "success": true}
 (NOBRIDGE) LOG  🎉 SUCCESS: Face detection completed with 1 face(s)
 (NOBRIDGE) LOG  🎯 Processing detected faces...
 (NOBRIDGE) LOG  👤 Detected face details: {"headAngles": {"x": -10.048006057739258, "y": 5.176116943359375, "z": -3.5073049068450928}, "leftEyeOpen": 0.9987824559211731, "rightEyeOpen": 0.998600959777832, "smiling": 0.011907465755939484, "trackingID": 0}
 (NOBRIDGE) LOG  🔄 Converted face data: {"attributes": {"age": undefined, "emotions": {"angry": 0, "happy": 0.011907465755939484, "neutral": 0.9880925342440605, "sad": 0, "surprised": 0}, "gender": undefined, "headEulerAngles": {"x": -10.048006057739258, "y": 5.176116943359375, "z": -3.5073049068450928}, "smiling": 0.011907465755939484}, "bounds": {"height": 695, "width": 695, "x": 241, "y": 461}, "contours": [], "faceId": "0", "landmarks": [{"position": [Object], "type": "0"}, {"position": [Object], "type": "1"}, {"position": [Object], "type": "3"}, {"position": [Object], "type": "4"}, {"position": [Object], "type": "5"}, {"position": [Object], "type": "6"}, {"position": [Object], "type": "7"}, {"position": [Object], "type": "9"}, {"position": [Object], "type": "10"}, {"position": [Object], "type": "11"}], "leftEyeOpenProbability": 0.9987824559211731, "rightEyeOpenProbability": 0.998600959777832, "rollAngle": -3.5073049068450928, "timestamp": 1757435774471, "trackingId": "0", "yawAngle": 5.176116943359375}
 (NOBRIDGE) LOG  Face quality calculation: {"bounds": {"height": 695, "width": 695, "x": 241, "y": 461}, "faceArea": 483025, "faceRatio": 0.25157552083333334, "maxFaceSize": 0.6, "minFaceSize": 0.05, "screenArea": 1920000}
 (NOBRIDGE) LOG  Quality scores: {"angleQuality": 0.9137313842773438, "lightingQuality": 1, "overall": 0.8709683736165366, "sizeQuality": 0.7421223958333334, "threshold": 0.4}
 (NOBRIDGE) LOG  ✅ Face detection state updated successfully
 (NOBRIDGE) LOG  📊 Face quality score: 0.8709683736165366
 (NOBRIDGE) LOG  🎉 Face detection completed successfully - stopping all timers
 (NOBRIDGE) LOG  ⏱️ Face detection process completed in 2745.53ms
 (NOBRIDGE) LOG  === MAIN FACE DETECTION PROCESS COMPLETED ===
 (NOBRIDGE) ERROR  Frame processor error: {}
 (NOBRIDGE) LOG  👁️ Starting liveness detection...
 (NOBRIDGE) LOG  👁️ Liveness detection started successfully
 (NOBRIDGE) LOG  Photo file verification: {"exists": true, "fileSize": 439071, "path": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy4279865635381619950.jpg"}
 (NOBRIDGE) LOG  🤖 Sending photo to ML Kit for face detection...
 (NOBRIDGE) LOG  🔍 ML Kit detector state before detection: {"availableMethods": ["status", "error", "options"], "detectorType": "object", "isInitialized": true, "photoPath": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy2122873525857027696.jpg", "photoUri": "file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy2122873525857027696.jpg"}
 (NOBRIDGE) LOG  Photo file verified successfully: {"path": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy4279865635381619950.jpg", "size": 439071, "uri": "file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy4279865635381619950.jpg"}
 (NOBRIDGE) LOG  Applying ML Kit photo processing...
 (NOBRIDGE) LOG  🔍 === CAMERA isActive CALCULATION ===
 (NOBRIDGE) LOG  🔍 visible: true
 (NOBRIDGE) LOG  🔍 verificationStep: capturing
 (NOBRIDGE) LOG  🔍 isDetecting: false
 (NOBRIDGE) LOG  🔍 cameraKeepAlive: true
 (NOBRIDGE) LOG  🔍 Final isActive result: true
 (NOBRIDGE) LOG  🔍 Camera should be active - checking persistence state...
 (NOBRIDGE) LOG  Photo file read successfully, content length: 585428
 (NOBRIDGE) LOG  ✅ Photo has valid image format header
 (NOBRIDGE) LOG  Additional delay for file system sync...
 (NOBRIDGE) ERROR  ❌ Photo capture failed: [unknown/unknown: Camera is closed.]
 (NOBRIDGE) LOG  Photo capture error details: {"cameraState": {"hasTakePhoto": true, "isActive": true}, "errorMessage": "Camera is closed.", "errorType": "CameraRuntimeError"}
 (NOBRIDGE) LOG  🔍 === FACE DETECTION STATE CHANGED ===
 (NOBRIDGE) LOG  🔍 Face data: true
 (NOBRIDGE) LOG  🔍 Face detected: true
 (NOBRIDGE) LOG  🔍 Face quality: true
 (NOBRIDGE) LOG  🔍 Is detecting: false
 (NOBRIDGE) LOG  🔍 Has interval: false
 (NOBRIDGE) LOG  🔍 Camera keep-alive: true
 (NOBRIDGE) LOG  🔍 Timestamp: 2025-09-09T16:36:14.724Z
 (NOBRIDGE) LOG  👁️ Face data effect triggered: {"faceDataTimestamp": 1757435774471, "hasFaceData": true, "isLivenessActive": true}
 (NOBRIDGE) LOG  👁️ Processing face data for liveness detection
 (NOBRIDGE) LOG  👁️ processFaceData called: {"faceDataDetails": {"leftEye": 0.9987824559211731, "rightEye": 0.998600959777832, "timestamp": 1757435774471}, "hasFaceData": true, "isLivenessActive": true}
 (NOBRIDGE) LOG  👁️ Processing liveness data: {"average": "0.999", "eyeClosedThreshold": 0.98, "eyeOpenThreshold": 0.995, "historyLength": 1, "leftEye": "0.999", "rightEye": "0.999"}
 (NOBRIDGE) LOG  👁️ Analyzing blink pattern in history: {"historyLength": 1, "minRequired": 5}
 (NOBRIDGE) LOG  👁️ Liveness score calculation: {"blinkCount": 0, "blinkScore": 0, "historyLength": 1, "minRequired": 0.1, "movementScore": "0.000", "overallScore": "0.020", "timeScore": "0.100"}
 (NOBRIDGE) LOG  🔍 === CAMERA KEEP-ALIVE EFFECT TRIGGERED ===
 (NOBRIDGE) LOG  🔍 Verification step changed to: capturing
 (NOBRIDGE) LOG  🔍 Current camera keep-alive state: true
 (NOBRIDGE) LOG  🔍 Camera keep-alive effect completed
 (NOBRIDGE) LOG  Face detection state: {"faceData": true, "faceDetected": true, "faceQuality": true, "isDetecting": false, "verificationStep": "capturing"}
 (NOBRIDGE) LOG  Photo file verification: {"exists": true, "fileSize": 439481, "path": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy7269548646503629037.jpg"}
 (NOBRIDGE) LOG  Camera onInitialized called
 (NOBRIDGE) LOG  Camera started - ensuring detection is running
 (NOBRIDGE) LOG  Photo file verified successfully: {"path": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy7269548646503629037.jpg", "size": 439481, "uri": "file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy7269548646503629037.jpg"}
 (NOBRIDGE) LOG  Applying ML Kit photo processing...
 (NOBRIDGE) LOG  ✅ ML Kit detection completed successfully: {"faceCount": 1, "faces": [{"contours": [Array], "frame": [Object], "headEulerAngleX": -7.686163902282715, "headEulerAngleY": 4.9555840492248535, "headEulerAngleZ": -3.98258113861084, "landmarks": [Array], "leftEyeOpenProbability": 0.9979193210601807, "rightEyeOpenProbability": 0.99802166223526, "smilingProbability": 0.014574314467608929, "trackingID": 0}], "rawResult": {"faces": [[Object]], "imagePath": "file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy4103946455503780928.jpg"}, "success": true}
 (NOBRIDGE) LOG  🎉 SUCCESS: Face detection completed with 1 face(s)
 (NOBRIDGE) LOG  🎯 Processing detected faces...
 (NOBRIDGE) LOG  👤 Detected face details: {"headAngles": {"x": -7.686163902282715, "y": 4.9555840492248535, "z": -3.98258113861084}, "leftEyeOpen": 0.9979193210601807, "rightEyeOpen": 0.99802166223526, "smiling": 0.014574314467608929, "trackingID": 0}
 (NOBRIDGE) LOG  🔄 Converted face data: {"attributes": {"age": undefined, "emotions": {"angry": 0, "happy": 0.014574314467608929, "neutral": 0.9854256855323911, "sad": 0, "surprised": 0}, "gender": undefined, "headEulerAngles": {"x": -7.686163902282715, "y": 4.9555840492248535, "z": -3.98258113861084}, "smiling": 0.014574314467608929}, "bounds": {"height": 669, "width": 669, "x": 269, "y": 452}, "contours": [], "faceId": "0", "landmarks": [{"position": [Object], "type": "0"}, {"position": [Object], "type": "1"}, {"position": [Object], "type": "3"}, {"position": [Object], "type": "4"}, {"position": [Object], "type": "5"}, {"position": [Object], "type": "6"}, {"position": [Object], "type": "7"}, {"position": [Object], "type": "9"}, {"position": [Object], "type": "10"}, {"position": [Object], "type": "11"}], "leftEyeOpenProbability": 0.9979193210601807, "rightEyeOpenProbability": 0.99802166223526, "rollAngle": -3.98258113861084, "timestamp": 1757435774789, "trackingId": "0", "yawAngle": 4.9555840492248535}
 (NOBRIDGE) LOG  Face quality calculation: {"bounds": {"height": 669, "width": 669, "x": 269, "y": 452}, "faceArea": 447561, "faceRatio": 0.2331046875, "maxFaceSize": 0.6, "minFaceSize": 0.05, "screenArea": 1920000}
 (NOBRIDGE) LOG  Quality scores: {"angleQuality": 0.917406932512919, "lightingQuality": 1, "overall": 0.9090127047538757, "sizeQuality": 0.8344765625000001, "threshold": 0.4}
 (NOBRIDGE) LOG  ✅ Face detection state updated successfully
 (NOBRIDGE) LOG  📊 Face quality score: 0.9090127047538757
 (NOBRIDGE) LOG  🎉 Face detection completed successfully - stopping all timers
 (NOBRIDGE) LOG  ⏱️ Face detection process completed in 2746.36ms
 (NOBRIDGE) LOG  === MAIN FACE DETECTION PROCESS COMPLETED ===
 (NOBRIDGE) LOG  🤖 Sending photo to ML Kit for face detection...
 (NOBRIDGE) LOG  🔍 ML Kit detector state before detection: {"availableMethods": ["status", "error", "options"], "detectorType": "object", "isInitialized": true, "photoPath": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy7438987835424621993.jpg", "photoUri": "file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy7438987835424621993.jpg"}
 (NOBRIDGE) LOG  Photo file read successfully, content length: 585976
 (NOBRIDGE) LOG  ✅ Photo has valid image format header
 (NOBRIDGE) LOG  Additional delay for file system sync...
 (NOBRIDGE) LOG  🔍 === CAMERA isActive CALCULATION ===
 (NOBRIDGE) LOG  🔍 visible: true
 (NOBRIDGE) LOG  🔍 verificationStep: capturing
 (NOBRIDGE) LOG  🔍 isDetecting: false
 (NOBRIDGE) LOG  🔍 cameraKeepAlive: true
 (NOBRIDGE) LOG  🔍 Final isActive result: true
 (NOBRIDGE) LOG  🔍 Camera should be active - checking persistence state...
 (NOBRIDGE) LOG  ✅ Camera component stabilized for critical transition
 (NOBRIDGE) LOG  🔍 Proactively monitoring camera state...
 (NOBRIDGE) LOG  🔍 === CAMERA STATE MONITORING ===
 (NOBRIDGE) LOG  🔍 Camera ref exists: true
 (NOBRIDGE) LOG  🔍 Persistent ref exists: true
 (NOBRIDGE) LOG  🔍 Camera ref state: valid
 (NOBRIDGE) LOG  🔍 Camera state monitoring: {"hasTakePhoto": true, "isActive": true}
 (NOBRIDGE) LOG  ✅ Camera state is healthy - proceeding with capture
 (NOBRIDGE) LOG  🔍 === FACE DETECTION STATE CHANGED ===
 (NOBRIDGE) LOG  🔍 Face data: true
 (NOBRIDGE) LOG  🔍 Face detected: true
 (NOBRIDGE) LOG  🔍 Face quality: true
 (NOBRIDGE) LOG  🔍 Is detecting: false
 (NOBRIDGE) LOG  🔍 Has interval: false
 (NOBRIDGE) LOG  🔍 Camera keep-alive: true
 (NOBRIDGE) LOG  🔍 Timestamp: 2025-09-09T16:36:15.050Z
 (NOBRIDGE) LOG  👁️ Face data effect triggered: {"faceDataTimestamp": 1757435774789, "hasFaceData": true, "isLivenessActive": true}
 (NOBRIDGE) LOG  👁️ Processing face data for liveness detection
 (NOBRIDGE) LOG  👁️ processFaceData called: {"faceDataDetails": {"leftEye": 0.9979193210601807, "rightEye": 0.99802166223526, "timestamp": 1757435774789}, "hasFaceData": true, "isLivenessActive": true}
 (NOBRIDGE) LOG  👁️ Processing liveness data: {"average": "0.998", "eyeClosedThreshold": 0.98, "eyeOpenThreshold": 0.995, "historyLength": 2, "leftEye": "0.998", "rightEye": "0.998"}
 (NOBRIDGE) LOG  👁️ Analyzing blink pattern in history: {"historyLength": 2, "minRequired": 5}
 (NOBRIDGE) LOG  👁️ Liveness score calculation: {"blinkCount": 0, "blinkScore": 0, "historyLength": 2, "minRequired": 0.1, "movementScore": "0.000", "overallScore": "0.040", "timeScore": "0.200"}
 (NOBRIDGE) LOG  Face detection state: {"faceData": true, "faceDetected": true, "faceQuality": true, "isDetecting": false, "verificationStep": "capturing"}
 (NOBRIDGE) LOG  Camera initialized - connecting reference to face detection hook
 (NOBRIDGE) LOG  🔍 === SETTING CAMERA REFERENCE ===
 (NOBRIDGE) LOG  🔍 Camera component exists: true
 (NOBRIDGE) LOG  🔍 Component type: object
 (NOBRIDGE) LOG  🔍 Has component: true
 (NOBRIDGE) LOG  🔍 Component methods: ["props", "context", "refs", "updater", "displayName", "isNativeViewMounted", "lastUIRotation", "rotationHelper", "onViewReady", "onAverageFpsChanged", "onInitialized", "onStarted", "onStopped", "onPreviewStarted", "onPreviewStopped", "onShutter", "onOutputOrientationChanged", "onPreviewOrientationChanged", "onError", "onCodeScanned", "ref", "lastFrameProcessor", "state", "_reactInternals", "_reactInternalInstance"]
 (NOBRIDGE) LOG  🔍 Has takePhoto method: true
 (NOBRIDGE) LOG  🔍 Camera reference stored in persistent ref
 (NOBRIDGE) LOG  ✅ Camera reference set successfully: {"cameraRefType": "object", "hasCameraRef": true, "hasTakePhotoMethod": true, "persistentRefState": "valid"}
 (NOBRIDGE) LOG  🤖 Sending photo to ML Kit for face detection...
 (NOBRIDGE) LOG  🔍 ML Kit detector state before detection: {"availableMethods": ["status", "error", "options"], "detectorType": "object", "isInitialized": true, "photoPath": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy4279865635381619950.jpg", "photoUri": "file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy4279865635381619950.jpg"}
 (NOBRIDGE) LOG  🤖 Sending photo to ML Kit for face detection...
 (NOBRIDGE) LOG  🔍 ML Kit detector state before detection: {"availableMethods": ["status", "error", "options"], "detectorType": "object", "isInitialized": true, "photoPath": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy7269548646503629037.jpg", "photoUri": "file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy7269548646503629037.jpg"}
 (NOBRIDGE) LOG  🔍 === CAMERA isActive CALCULATION ===
 (NOBRIDGE) LOG  🔍 visible: true
 (NOBRIDGE) LOG  🔍 verificationStep: capturing
 (NOBRIDGE) LOG  🔍 isDetecting: false
 (NOBRIDGE) LOG  🔍 cameraKeepAlive: true
 (NOBRIDGE) LOG  🔍 Final isActive result: true
 (NOBRIDGE) LOG  🔍 Camera should be active - checking persistence state...
 (NOBRIDGE) LOG  ✅ ML Kit detection completed successfully: {"faceCount": 1, "faces": [{"contours": [Array], "frame": [Object], "headEulerAngleX": -4.757660865783691, "headEulerAngleY": 3.1933631896972656, "headEulerAngleZ": -4.045353889465332, "landmarks": [Array], "leftEyeOpenProbability": 0.9970390796661377, "rightEyeOpenProbability": 0.998312771320343, "smilingProbability": 0.025413721799850464, "trackingID": 0}], "rawResult": {"faces": [[Object]], "imagePath": "file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy2122873525857027696.jpg"}, "success": true}
 (NOBRIDGE) LOG  🎉 SUCCESS: Face detection completed with 1 face(s)
 (NOBRIDGE) LOG  🎯 Processing detected faces...
 (NOBRIDGE) LOG  👤 Detected face details: {"headAngles": {"x": -4.757660865783691, "y": 3.1933631896972656, "z": -4.045353889465332}, "leftEyeOpen": 0.9970390796661377, "rightEyeOpen": 0.998312771320343, "smiling": 0.025413721799850464, "trackingID": 0}
 (NOBRIDGE) LOG  🔄 Converted face data: {"attributes": {"age": undefined, "emotions": {"angry": 0, "happy": 0.025413721799850464, "neutral": 0.9745862782001495, "sad": 0, "surprised": 0}, "gender": undefined, "headEulerAngles": {"x": -4.757660865783691, "y": 3.1933631896972656, "z": -4.045353889465332}, "smiling": 0.025413721799850464}, "bounds": {"height": 647, "width": 647, "x": 284, "y": 450}, "contours": [], "faceId": "0", "landmarks": [{"position": [Object], "type": "0"}, {"position": [Object], "type": "1"}, {"position": [Object], "type": "3"}, {"position": [Object], "type": "4"}, {"position": [Object], "type": "5"}, {"position": [Object], "type": "6"}, {"position": [Object], "type": "7"}, {"position": [Object], "type": "9"}, {"position": [Object], "type": "10"}, {"position": [Object], "type": "11"}], "leftEyeOpenProbability": 0.9970390796661377, "rightEyeOpenProbability": 0.998312771320343, "rollAngle": -4.045353889465332, "timestamp": 1757435775285, "trackingId": "0", "yawAngle": 3.1933631896972656}
 (NOBRIDGE) LOG  Face quality calculation: {"bounds": {"height": 647, "width": 647, "x": 284, "y": 450}, "faceArea": 418609, "faceRatio": 0.21802552083333335, "maxFaceSize": 0.6, "minFaceSize": 0.05, "screenArea": 1920000}
 (NOBRIDGE) LOG  Quality scores: {"angleQuality": 0.9325774351755778, "lightingQuality": 1, "overall": 0.9437221888860067, "sizeQuality": 0.9098723958333333, "threshold": 0.4}
 (NOBRIDGE) LOG  ✅ Face detection state updated successfully
 (NOBRIDGE) LOG  📊 Face quality score: 0.9437221888860067
 (NOBRIDGE) LOG  🎉 Face detection completed successfully - stopping all timers
 (NOBRIDGE) LOG  ⏱️ Face detection process completed in 2932.26ms
 (NOBRIDGE) LOG  === MAIN FACE DETECTION PROCESS COMPLETED ===
 (NOBRIDGE) LOG  🔍 === CAMERA isActive CALCULATION ===
 (NOBRIDGE) LOG  🔍 visible: true
 (NOBRIDGE) LOG  🔍 verificationStep: capturing
 (NOBRIDGE) LOG  🔍 isDetecting: false
 (NOBRIDGE) LOG  🔍 cameraKeepAlive: true
 (NOBRIDGE) LOG  🔍 Final isActive result: true
 (NOBRIDGE) LOG  🔍 Camera should be active - checking persistence state...
 (NOBRIDGE) LOG  🔍 === FACE DETECTION STATE CHANGED ===
 (NOBRIDGE) LOG  🔍 Face data: true
 (NOBRIDGE) LOG  🔍 Face detected: true
 (NOBRIDGE) LOG  🔍 Face quality: true
 (NOBRIDGE) LOG  🔍 Is detecting: false
 (NOBRIDGE) LOG  🔍 Has interval: false
 (NOBRIDGE) LOG  🔍 Camera keep-alive: true
 (NOBRIDGE) LOG  🔍 Timestamp: 2025-09-09T16:36:15.411Z
 (NOBRIDGE) LOG  👁️ Face data effect triggered: {"faceDataTimestamp": 1757435775285, "hasFaceData": true, "isLivenessActive": true}
 (NOBRIDGE) LOG  👁️ Processing face data for liveness detection
 (NOBRIDGE) LOG  👁️ processFaceData called: {"faceDataDetails": {"leftEye": 0.9970390796661377, "rightEye": 0.998312771320343, "timestamp": 1757435775285}, "hasFaceData": true, "isLivenessActive": true}
 (NOBRIDGE) LOG  👁️ Processing liveness data: {"average": "0.998", "eyeClosedThreshold": 0.98, "eyeOpenThreshold": 0.995, "historyLength": 3, "leftEye": "0.997", "rightEye": "0.998"}
 (NOBRIDGE) LOG  👁️ Analyzing blink pattern in history: {"historyLength": 3, "minRequired": 5}
 (NOBRIDGE) LOG  👁️ Liveness score calculation: {"blinkCount": 0, "blinkScore": 0, "historyLength": 3, "minRequired": 0.1, "movementScore": "0.000", "overallScore": "0.060", "timeScore": "0.300"}
 (NOBRIDGE) LOG  Face detection state: {"faceData": true, "faceDetected": true, "faceQuality": true, "isDetecting": false, "verificationStep": "capturing"}
 (NOBRIDGE) LOG  🔍 === CAMERA isActive CALCULATION ===
 (NOBRIDGE) LOG  🔍 visible: true
 (NOBRIDGE) LOG  🔍 verificationStep: capturing
 (NOBRIDGE) LOG  🔍 isDetecting: false
 (NOBRIDGE) LOG  🔍 cameraKeepAlive: true
 (NOBRIDGE) LOG  🔍 Final isActive result: true
 (NOBRIDGE) LOG  🔍 Camera should be active - checking persistence state...
 (NOBRIDGE) LOG  🔍 === CAMERA STATE MONITORING ===
 (NOBRIDGE) LOG  🔍 Camera ref exists: true
 (NOBRIDGE) LOG  🔍 Persistent ref exists: true
 (NOBRIDGE) LOG  🔍 Camera ref state: valid
 (NOBRIDGE) LOG  🔍 Camera state monitoring: {"hasTakePhoto": true, "isActive": true}
 (NOBRIDGE) LOG  🔒 Camera health check result: true
 (NOBRIDGE) LOG  🔍 === COMPREHENSIVE CAMERA STATE VALIDATION ===
 (NOBRIDGE) LOG  🔍 Camera ref exists: true
 (NOBRIDGE) LOG  🔍 Camera ref type: object
 (NOBRIDGE) LOG  🔍 Camera methods available: ["props", "context", "refs", "updater", "displayName", "isNativeViewMounted", "lastUIRotation", "rotationHelper", "onViewReady", "onAverageFpsChanged", "onInitialized", "onStarted", "onStopped", "onPreviewStarted", "onPreviewStopped", "onShutter", "onOutputOrientationChanged", "onPreviewOrientationChanged", "onError", "onCodeScanned", "ref", "lastFrameProcessor", "state", "_reactInternals", "_reactInternalInstance"]
 (NOBRIDGE) LOG  🔍 Has takePhoto method: true
 (NOBRIDGE) LOG  🔍 Camera props: {"audio": false, "device": {"formats": [[Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object]], "hardwareLevel": "full", "hasFlash": false, "hasTorch": false, "id": "1", "isMultiCam": false, "maxExposure": 24, "maxZoom": 10, "minExposure": -24, "minFocusDistance": 0, "minZoom": 1, "name": "1 (FRONT) androidx.camera.camera2", "neutralZoom": 1, "physicalDevices": ["wide-angle-camera"], "position": "front", "sensorOrientation": "landscape-right", "supportsFocus": true, "supportsLowLightBoost": false, "supportsRawCapture": false}, "frameProcessor": {"frameProcessor": [Function withFrameRefCountingTs1], "type": "readonly"}, "isActive": true, "onError": [Function onError], "onInitialized": [Function onInitialized], "onStarted": [Function onStarted], "photo": true, "style": {"height": "100%", "width": "100%"}, "video": false}
 (NOBRIDGE) LOG  🔍 Camera state: {"averageFpsSamples": [], "isRecordingWithFlash": false}
 (NOBRIDGE) LOG  🔍 Camera display name: Camera
 (NOBRIDGE) LOG  ✅ Camera validation passed - proceeding with capture
 (NOBRIDGE) LOG  Capturing photo with validated face...
 (NOBRIDGE) LOG  🔍 Validating camera state before final capture...
 (NOBRIDGE) LOG  ✅ Camera validation successful on attempt 1
 (NOBRIDGE) LOG  📸 Final camera state validation before photo capture...
 (NOBRIDGE) LOG  capturePhoto called with: {"cameraRefCurrent": {"_reactInternalInstance": {}, "_reactInternals": {"_debugHookTypes": null, "_debugInfo": null, "_debugNeedsRemount": false, "_debugOwner": [FiberNode], "actualDuration": 0.22604301571846008, "actualStartTime": 62179614.408882, "alternate": [FiberNode], "child": [FiberNode], "childLanes": 0, "deletions": null, "dependencies": null, "elementType": [Function Camera], "flags": 2097157, "index": 0, "key": "stable", "lanes": 0, "memoizedProps": [Object], "memoizedState": [Object], "mode": 3, "pendingProps": [Object], "ref": [Object], "refCleanup": null, "return": [FiberNode], "selfBaseDuration": 0.17375100404024124, "sibling": [FiberNode], "stateNode": [Circular], "subtreeFlags": 2097152, "tag": 1, "treeBaseDuration": 0.18578200787305832, "type": [Function Camera], "updateQueue": [Object]}, "context": {}, "displayName": "Camera", "isNativeViewMounted": true, "lastFrameProcessor": [Function withFrameRefCountingTs1], "lastUIRotation": 0, "onAverageFpsChanged": [Function bound onAverageFpsChanged], "onCodeScanned": [Function bound onCodeScanned], "onError": [Function bound onError], "onInitialized": [Function bound onInitialized], "onOutputOrientationChanged": [Function bound onOutputOrientationChanged], "onPreviewOrientationChanged": [Function bound onPreviewOrientationChanged], "onPreviewStarted": [Function bound onPreviewStarted], "onPreviewStopped": [Function bound onPreviewStopped], "onShutter": [Function bound onShutter], "onStarted": [Function bound onStarted], "onStopped": [Function bound onStopped], "onViewReady": [Function bound onViewReady], "props": {"audio": false, "device": [Object], "frameProcessor": [Object], "isActive": true, "onError": [Function onError], "onInitialized": [Function onInitialized], "onStarted": [Function onStarted], "photo": true, "style": [Object], "video": false}, "ref": {"current": [ReactFabricHostComponent]}, "refs": {}, "rotationHelper": {"outputOrientation": "portrait", "previewOrientation": "portrait"}, "state": {"averageFpsSamples": [Array], "isRecordingWithFlash": false}, "updater": {"enqueueForceUpdate": [Function enqueueForceUpdate], "enqueueReplaceState": [Function enqueueReplaceState], "enqueueSetState": [Function enqueueSetState], "isMounted": [Function isMounted]}}, "hasCameraRef": true, "hasTakePhotoMethod": true, "isInitialized": true}
 (NOBRIDGE) LOG  Capturing photo with validated face...
 (NOBRIDGE) LOG  🔍 Validating camera state before final capture...
 (NOBRIDGE) LOG  ✅ ML Kit detection completed successfully: {"faceCount": 1, "faces": [{"contours": [Array], "frame": [Object], "headEulerAngleX": -6.089264869689941, "headEulerAngleY": 3.74862003326416, "headEulerAngleZ": -4.282626152038574, "landmarks": [Array], "leftEyeOpenProbability": 0.9970390796661377, "rightEyeOpenProbability": 0.998312771320343, "smilingProbability": 0.022218160331249237, "trackingID": 0}], "rawResult": {"faces": [[Object]], "imagePath": "file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy7438987835424621993.jpg"}, "success": true}
 (NOBRIDGE) LOG  🎉 SUCCESS: Face detection completed with 1 face(s)
 (NOBRIDGE) LOG  🎯 Processing detected faces...
 (NOBRIDGE) LOG  👤 Detected face details: {"headAngles": {"x": -6.089264869689941, "y": 3.74862003326416, "z": -4.282626152038574}, "leftEyeOpen": 0.9970390796661377, "rightEyeOpen": 0.998312771320343, "smiling": 0.022218160331249237, "trackingID": 0}
 (NOBRIDGE) LOG  🔄 Converted face data: {"attributes": {"age": undefined, "emotions": {"angry": 0, "happy": 0.022218160331249237, "neutral": 0.9777818396687508, "sad": 0, "surprised": 0}, "gender": undefined, "headEulerAngles": {"x": -6.089264869689941, "y": 3.74862003326416, "z": -4.282626152038574}, "smiling": 0.022218160331249237}, "bounds": {"height": 653, "width": 653, "x": 283, "y": 446}, "contours": [], "faceId": "0", "landmarks": [{"position": [Object], "type": "0"}, {"position": [Object], "type": "1"}, {"position": [Object], "type": "3"}, {"position": [Object], "type": "4"}, {"position": [Object], "type": "5"}, {"position": [Object], "type": "6"}, {"position": [Object], "type": "7"}, {"position": [Object], "type": "9"}, {"position": [Object], "type": "10"}, {"position": [Object], "type": "11"}], "leftEyeOpenProbability": 0.9970390796661377, "rightEyeOpenProbability": 0.998312771320343, "rollAngle": -4.282626152038574, "timestamp": 1757435775611, "trackingId": "0", "yawAngle": 3.74862003326416}
 (NOBRIDGE) LOG  Face quality calculation: {"bounds": {"height": 653, "width": 653, "x": 283, "y": 446}, "faceArea": 426409, "faceRatio": 0.22208802083333334, "maxFaceSize": 0.6, "minFaceSize": 0.05, "screenArea": 1920000}
 (NOBRIDGE) LOG  Quality scores: {"angleQuality": 0.9286228974660238, "lightingQuality": 1, "overall": 0.9344108275731405, "sizeQuality": 0.8895598958333333, "threshold": 0.4}
 (NOBRIDGE) LOG  ✅ Face detection state updated successfully
 (NOBRIDGE) LOG  📊 Face quality score: 0.9344108275731405
 (NOBRIDGE) LOG  🎉 Face detection completed successfully - stopping all timers
 (NOBRIDGE) LOG  ⏱️ Face detection process completed in 2877.91ms
 (NOBRIDGE) LOG  === MAIN FACE DETECTION PROCESS COMPLETED ===
 (NOBRIDGE) LOG  🔍 === CAMERA isActive CALCULATION ===
 (NOBRIDGE) LOG  🔍 visible: true
 (NOBRIDGE) LOG  🔍 verificationStep: capturing
 (NOBRIDGE) LOG  🔍 isDetecting: false
 (NOBRIDGE) LOG  🔍 cameraKeepAlive: true
 (NOBRIDGE) LOG  🔍 Final isActive result: true
 (NOBRIDGE) LOG  🔍 Camera should be active - checking persistence state...
 (NOBRIDGE) LOG  🔍 === FACE DETECTION STATE CHANGED ===
 (NOBRIDGE) LOG  🔍 Face data: true
 (NOBRIDGE) LOG  🔍 Face detected: true
 (NOBRIDGE) LOG  🔍 Face quality: true
 (NOBRIDGE) LOG  🔍 Is detecting: false
 (NOBRIDGE) LOG  🔍 Has interval: false
 (NOBRIDGE) LOG  🔍 Camera keep-alive: true
 (NOBRIDGE) LOG  🔍 Timestamp: 2025-09-09T16:36:15.807Z
 (NOBRIDGE) LOG  👁️ Face data effect triggered: {"faceDataTimestamp": 1757435775611, "hasFaceData": true, "isLivenessActive": true}
 (NOBRIDGE) LOG  👁️ Processing face data for liveness detection
 (NOBRIDGE) LOG  👁️ processFaceData called: {"faceDataDetails": {"leftEye": 0.9970390796661377, "rightEye": 0.998312771320343, "timestamp": 1757435775611}, "hasFaceData": true, "isLivenessActive": true}
 (NOBRIDGE) LOG  👁️ Processing liveness data: {"average": "0.998", "eyeClosedThreshold": 0.98, "eyeOpenThreshold": 0.995, "historyLength": 4, "leftEye": "0.997", "rightEye": "0.998"}
 (NOBRIDGE) LOG  👁️ Analyzing blink pattern in history: {"historyLength": 4, "minRequired": 5}
 (NOBRIDGE) LOG  👁️ Liveness score calculation: {"blinkCount": 0, "blinkScore": 0, "historyLength": 4, "minRequired": 0.1, "movementScore": "0.000", "overallScore": "0.080", "timeScore": "0.400"}
 (NOBRIDGE) LOG  Face detection state: {"faceData": true, "faceDetected": true, "faceQuality": true, "isDetecting": false, "verificationStep": "capturing"}
 (NOBRIDGE) LOG  🔍 === CAMERA isActive CALCULATION ===
 (NOBRIDGE) LOG  🔍 visible: true
 (NOBRIDGE) LOG  🔍 verificationStep: capturing
 (NOBRIDGE) LOG  🔍 isDetecting: false
 (NOBRIDGE) LOG  🔍 cameraKeepAlive: true
 (NOBRIDGE) LOG  🔍 Final isActive result: true
 (NOBRIDGE) LOG  🔍 Camera should be active - checking persistence state...
 (NOBRIDGE) LOG  ✅ Camera validation successful on attempt 1
 (NOBRIDGE) LOG  📸 Final camera state validation before photo capture...
 (NOBRIDGE) LOG  🔍 === GET CAMERA INSTANCE ===
 (NOBRIDGE) LOG  🔍 Main ref exists: true
 (NOBRIDGE) LOG  🔍 Persistent ref exists: true
 (NOBRIDGE) LOG  ✅ getCameraInstance: returning main ref camera instance
 (NOBRIDGE) LOG  ✅ ML Kit detection completed successfully: {"faceCount": 1, "faces": [{"contours": [Array], "frame": [Object], "headEulerAngleX": -4.3404436111450195, "headEulerAngleY": 3.104517936706543, "headEulerAngleZ": -3.658766746520996, "landmarks": [Array], "leftEyeOpenProbability": 0.05539274215698242, "rightEyeOpenProbability": 0.025484859943389893, "smilingProbability": 0.02065070904791355, "trackingID": 0}], "rawResult": {"faces": [[Object]], "imagePath": "file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy4279865635381619950.jpg"}, "success": true}
 (NOBRIDGE) LOG  🎉 SUCCESS: Face detection completed with 1 face(s)
 (NOBRIDGE) LOG  🎯 Processing detected faces...
 (NOBRIDGE) LOG  👤 Detected face details: {"headAngles": {"x": -4.3404436111450195, "y": 3.104517936706543, "z": -3.658766746520996}, "leftEyeOpen": 0.05539274215698242, "rightEyeOpen": 0.025484859943389893, "smiling": 0.02065070904791355, "trackingID": 0}
 (NOBRIDGE) LOG  🔄 Converted face data: {"attributes": {"age": undefined, "emotions": {"angry": 0, "happy": 0.02065070904791355, "neutral": 0.9793492909520864, "sad": 0, "surprised": 0}, "gender": undefined, "headEulerAngles": {"x": -4.3404436111450195, "y": 3.104517936706543, "z": -3.658766746520996}, "smiling": 0.02065070904791355}, "bounds": {"height": 656, "width": 656, "x": 276, "y": 443}, "contours": [], "faceId": "0", "landmarks": [{"position": [Object], "type": "0"}, {"position": [Object], "type": "1"}, {"position": [Object], "type": "3"}, {"position": [Object], "type": "4"}, {"position": [Object], "type": "5"}, {"position": [Object], "type": "6"}, {"position": [Object], "type": "7"}, {"position": [Object], "type": "9"}, {"position": [Object], "type": "10"}, {"position": [Object], "type": "11"}], "leftEyeOpenProbability": 0.05539274215698242, "rightEyeOpenProbability": 0.025484859943389893, "rollAngle": -3.658766746520996, "timestamp": 1757435776054, "trackingId": "0", "yawAngle": 3.104517936706543}
 (NOBRIDGE) LOG  Face quality calculation: {"bounds": {"height": 656, "width": 656, "x": 276, "y": 443}, "faceArea": 430336, "faceRatio": 0.22413333333333332, "maxFaceSize": 0.6, "minFaceSize": 0.05, "screenArea": 1920000}
 (NOBRIDGE) LOG  Quality scores: {"angleQuality": 0.93902055422465, "lightingQuality": 0.4404388010501862, "overall": 0.7655711399157842, "sizeQuality": 0.8793333333333334, "threshold": 0.4}
 (NOBRIDGE) LOG  ✅ Face detection state updated successfully
 (NOBRIDGE) LOG  📊 Face quality score: 0.7655711399157842
 (NOBRIDGE) LOG  🎉 Face detection completed successfully - stopping all timers
 (NOBRIDGE) LOG  ⏱️ Face detection process completed in 3064.78ms
 (NOBRIDGE) LOG  === MAIN FACE DETECTION PROCESS COMPLETED ===
 (NOBRIDGE) LOG  🔍 === CAMERA isActive CALCULATION ===
 (NOBRIDGE) LOG  🔍 visible: true
 (NOBRIDGE) LOG  🔍 verificationStep: capturing
 (NOBRIDGE) LOG  🔍 isDetecting: false
 (NOBRIDGE) LOG  🔍 cameraKeepAlive: true
 (NOBRIDGE) LOG  🔍 Final isActive result: true
 (NOBRIDGE) LOG  🔍 Camera should be active - checking persistence state...
 (NOBRIDGE) LOG  🔍 === FACE DETECTION STATE CHANGED ===
 (NOBRIDGE) LOG  🔍 Face data: true
 (NOBRIDGE) LOG  🔍 Face detected: true
 (NOBRIDGE) LOG  🔍 Face quality: true
 (NOBRIDGE) LOG  🔍 Is detecting: false
 (NOBRIDGE) LOG  🔍 Has interval: false
 (NOBRIDGE) LOG  🔍 Camera keep-alive: true
 (NOBRIDGE) LOG  🔍 Timestamp: 2025-09-09T16:36:16.156Z
 (NOBRIDGE) LOG  👁️ Face data effect triggered: {"faceDataTimestamp": 1757435776054, "hasFaceData": true, "isLivenessActive": true}
 (NOBRIDGE) LOG  👁️ Processing face data for liveness detection
 (NOBRIDGE) LOG  👁️ processFaceData called: {"faceDataDetails": {"leftEye": 0.05539274215698242, "rightEye": 0.025484859943389893, "timestamp": 1757435776054}, "hasFaceData": true, "isLivenessActive": true}
 (NOBRIDGE) LOG  👁️ Processing liveness data: {"average": "0.040", "eyeClosedThreshold": 0.98, "eyeOpenThreshold": 0.995, "historyLength": 5, "leftEye": "0.055", "rightEye": "0.025"}
 (NOBRIDGE) LOG  👁️ Analyzing blink pattern in history: {"historyLength": 5, "minRequired": 5}
 (NOBRIDGE) LOG  👁️ Checking blink pattern at index 2 : {"curr": "0.998", "currClosed": false, "next": "0.998", "nextOpen": true, "prev": "0.998", "prevOpen": true}
 (NOBRIDGE) LOG  👁️ Micro-movement analysis: {"avgBaseline": "0.9978", "curr": "0.9977", "dipAmount": "0.0003", "next": "0.9977", "prev": "0.9980"}
 (NOBRIDGE) LOG  👁️ Liveness score calculation: {"blinkCount": 0, "blinkScore": 0, "historyLength": 5, "minRequired": 0.1, "movementScore": "0.293", "overallScore": "0.188", "timeScore": "0.500"}
 (NOBRIDGE) LOG  Face detection state: {"faceData": true, "faceDetected": true, "faceQuality": true, "isDetecting": false, "verificationStep": "capturing"}
 (NOBRIDGE) LOG  🔍 === CAMERA isActive CALCULATION ===
 (NOBRIDGE) LOG  🔍 visible: true
 (NOBRIDGE) LOG  🔍 verificationStep: capturing
 (NOBRIDGE) LOG  🔍 isDetecting: false
 (NOBRIDGE) LOG  🔍 cameraKeepAlive: true
 (NOBRIDGE) LOG  🔍 Final isActive result: true
 (NOBRIDGE) LOG  🔍 Camera should be active - checking persistence state...
 (NOBRIDGE) LOG  ✅ ML Kit detection completed successfully: {"faceCount": 1, "faces": [{"contours": [Array], "frame": [Object], "headEulerAngleX": -5.63393497467041, "headEulerAngleY": 3.456531286239624, "headEulerAngleZ": -3.7204606533050537, "landmarks": [Array], "leftEyeOpenProbability": 0.9974813461303711, "rightEyeOpenProbability": 0.9974306225776672, "smilingProbability": 0.022218160331249237, "trackingID": 0}], "rawResult": {"faces": [[Object]], "imagePath": "file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy7269548646503629037.jpg"}, "success": true}
 (NOBRIDGE) LOG  🎉 SUCCESS: Face detection completed with 1 face(s)
 (NOBRIDGE) LOG  🎯 Processing detected faces...
 (NOBRIDGE) LOG  👤 Detected face details: {"headAngles": {"x": -5.63393497467041, "y": 3.456531286239624, "z": -3.7204606533050537}, "leftEyeOpen": 0.9974813461303711, "rightEyeOpen": 0.9974306225776672, "smiling": 0.022218160331249237, "trackingID": 0}
 (NOBRIDGE) LOG  🔄 Converted face data: {"attributes": {"age": undefined, "emotions": {"angry": 0, "happy": 0.022218160331249237, "neutral": 0.9777818396687508, "sad": 0, "surprised": 0}, "gender": undefined, "headEulerAngles": {"x": -5.63393497467041, "y": 3.456531286239624, "z": -3.7204606533050537}, "smiling": 0.022218160331249237}, "bounds": {"height": 670, "width": 670, "x": 257, "y": 435}, "contours": [], "faceId": "0", "landmarks": [{"position": [Object], "type": "0"}, {"position": [Object], "type": "1"}, {"position": [Object], "type": "3"}, {"position": [Object], "type": "4"}, {"position": [Object], "type": "5"}, {"position": [Object], "type": "6"}, {"position": [Object], "type": "7"}, {"position": [Object], "type": "9"}, {"position": [Object], "type": "10"}, {"position": [Object], "type": "11"}], "leftEyeOpenProbability": 0.9974813461303711, "rightEyeOpenProbability": 0.9974306225776672, "rollAngle": -3.7204606533050537, "timestamp": 1757435776297, "trackingId": "0", "yawAngle": 3.456531286239624}
 (NOBRIDGE) LOG  Face quality calculation: {"bounds": {"height": 670, "width": 670, "x": 257, "y": 435}, "faceArea": 448900, "faceRatio": 0.23380208333333333, "maxFaceSize": 0.6, "minFaceSize": 0.05, "screenArea": 1920000}
 (NOBRIDGE) LOG  Quality scores: {"angleQuality": 0.9379923224449158, "lightingQuality": 1, "overall": 0.9137935300668081, "sizeQuality": 0.8309895833333334, "threshold": 0.4}
 (NOBRIDGE) LOG  ✅ Face detection state updated successfully
 (NOBRIDGE) LOG  📊 Face quality score: 0.9137935300668081
 (NOBRIDGE) LOG  🎉 Face detection completed successfully - stopping all timers
 (NOBRIDGE) LOG  ⏱️ Face detection process completed in 2989.47ms
 (NOBRIDGE) LOG  === MAIN FACE DETECTION PROCESS COMPLETED ===
 (NOBRIDGE) LOG  🔍 === CAMERA isActive CALCULATION ===
 (NOBRIDGE) LOG  🔍 visible: true
 (NOBRIDGE) LOG  🔍 verificationStep: capturing
 (NOBRIDGE) LOG  🔍 isDetecting: false
 (NOBRIDGE) LOG  🔍 cameraKeepAlive: true
 (NOBRIDGE) LOG  🔍 Final isActive result: true
 (NOBRIDGE) LOG  🔍 Camera should be active - checking persistence state...
 (NOBRIDGE) LOG  🔍 === FACE DETECTION STATE CHANGED ===
 (NOBRIDGE) LOG  🔍 Face data: true
 (NOBRIDGE) LOG  🔍 Face detected: true
 (NOBRIDGE) LOG  🔍 Face quality: true
 (NOBRIDGE) LOG  🔍 Is detecting: false
 (NOBRIDGE) LOG  🔍 Has interval: false
 (NOBRIDGE) LOG  🔍 Camera keep-alive: true
 (NOBRIDGE) LOG  🔍 Timestamp: 2025-09-09T16:36:16.411Z
 (NOBRIDGE) LOG  👁️ Face data effect triggered: {"faceDataTimestamp": 1757435776297, "hasFaceData": true, "isLivenessActive": true}
 (NOBRIDGE) LOG  👁️ Processing face data for liveness detection
 (NOBRIDGE) LOG  👁️ processFaceData called: {"faceDataDetails": {"leftEye": 0.9974813461303711, "rightEye": 0.9974306225776672, "timestamp": 1757435776297}, "hasFaceData": true, "isLivenessActive": true}
 (NOBRIDGE) LOG  👁️ Processing liveness data: {"average": "0.997", "eyeClosedThreshold": 0.98, "eyeOpenThreshold": 0.995, "historyLength": 6, "leftEye": "0.997", "rightEye": "0.997"}
 (NOBRIDGE) LOG  👁️ Analyzing blink pattern in history: {"historyLength": 6, "minRequired": 5}
 (NOBRIDGE) LOG  👁️ Checking blink pattern at index 2 : {"curr": "0.998", "currClosed": false, "next": "0.998", "nextOpen": true, "prev": "0.998", "prevOpen": true}
 (NOBRIDGE) LOG  👁️ Micro-movement analysis: {"avgBaseline": "0.9978", "curr": "0.9977", "dipAmount": "0.0003", "next": "0.9977", "prev": "0.9980"}
 (NOBRIDGE) LOG  👁️ Checking blink pattern at index 3 : {"curr": "0.998", "currClosed": false, "next": "0.040", "nextOpen": false, "prev": "0.998", "prevOpen": true}
 (NOBRIDGE) LOG  👁️ Micro-movement analysis: {"avgBaseline": "0.5191", "curr": "0.9977", "dipAmount": "0.0000", "next": "0.0404", "prev": "0.9977"}
 (NOBRIDGE) LOG  👁️ Liveness score calculation: {"blinkCount": 0, "blinkScore": 0, "historyLength": 6, "minRequired": 0.1, "movementScore": "0.255", "overallScore": "0.176", "timeScore": "0.500"}
 (NOBRIDGE) LOG  Face detection state: {"faceData": true, "faceDetected": true, "faceQuality": true, "isDetecting": false, "verificationStep": "capturing"}
 (NOBRIDGE) LOG  🔍 === CAMERA isActive CALCULATION ===
 (NOBRIDGE) LOG  🔍 visible: true
 (NOBRIDGE) LOG  🔍 verificationStep: capturing
 (NOBRIDGE) LOG  🔍 isDetecting: false
 (NOBRIDGE) LOG  🔍 cameraKeepAlive: true
 (NOBRIDGE) LOG  🔍 Final isActive result: true
 (NOBRIDGE) LOG  🔍 Camera should be active - checking persistence state...
 (NOBRIDGE) LOG  ✅ Photo capture successful: {"height": 1200, "isMirrored": true, "isRawPhoto": false, "orientation": "portrait", "path": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy211148587824104608.jpg", "width": 1600}
 (NOBRIDGE) LOG  ✅ Photo capture successful: {"height": 1200, "timestamp": 1757435776526, "uri": "file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy211148587824104608.jpg", "width": 1600}
 (NOBRIDGE) LOG  🔍 === CAMERA KEEP-ALIVE EFFECT TRIGGERED ===
 (NOBRIDGE) LOG  🔍 Verification step changed to: processing
 (NOBRIDGE) LOG  🔍 Current camera keep-alive state: true
 (NOBRIDGE) LOG  🔍 Camera keep-alive effect completed
 (NOBRIDGE) LOG  Face detection state: {"faceData": true, "faceDetected": true, "faceQuality": true, "isDetecting": false, "verificationStep": "processing"}
 (NOBRIDGE) WARN  AES encryption failed, falling back to Expo crypto: [TypeError: 0, _reactNativeAesCrypto.encrypt is not a function (it is undefined)]
 (NOBRIDGE) WARN  Value being stored in SecureStore is larger than 2048 bytes and it may not be stored successfully. In a future SDK version, this call may throw an error.
 (NOBRIDGE) LOG  Face profile cached for user 22
 (NOBRIDGE) LOG  Face profile stored successfully for user: 22
 (NOBRIDGE) LOG  🛡️ Detection active flag reset - allowing cleanup
 (NOBRIDGE) LOG  🔍 === CAMERA KEEP-ALIVE EFFECT TRIGGERED ===
 (NOBRIDGE) LOG  🔍 Verification step changed to: success
 (NOBRIDGE) LOG  🔍 Current camera keep-alive state: true
 (NOBRIDGE) LOG  🔒 Keeping camera active for multi-angle registration...
 (NOBRIDGE) LOG  🔍 Camera keep-alive effect completed
 (NOBRIDGE) LOG  Face detection state: {"faceData": true, "faceDetected": true, "faceQuality": true, "isDetecting": false, "verificationStep": "success"}
 (NOBRIDGE) LOG  Modal visible - verification already completed successfully, not restarting
 (NOBRIDGE) LOG  Modal visible for multi-angle registration - resetting state for next angle
 (NOBRIDGE) LOG  🔄 Resetting modal state for next angle registration...
 (NOBRIDGE) LOG  ✅ Modal state reset complete for next angle
 (NOBRIDGE) LOG  🔍 === CAMERA KEEP-ALIVE EFFECT TRIGGERED ===
 (NOBRIDGE) LOG  🔍 Verification step changed to: initializing
 (NOBRIDGE) LOG  🔍 Current camera keep-alive state: true
 (NOBRIDGE) LOG  🔍 Camera keep-alive effect completed
 (NOBRIDGE) LOG  Face detection state: {"faceData": true, "faceDetected": true, "faceQuality": true, "isDetecting": false, "verificationStep": "initializing"}
 (NOBRIDGE) LOG  Modal visible - starting verification process
 (NOBRIDGE) LOG  🛡️ Detection active flag set - preventing modal cleanup
 (NOBRIDGE) LOG  🚀 Starting verification process for next angle...
 (NOBRIDGE) LOG  ⚠️ Camera reference not available - starting verification anyway...
 (NOBRIDGE) LOG  🛡️ Detection active flag set - preventing modal cleanup
 (NOBRIDGE) LOG  🚀 Starting periodic face detection with ML Kit...
 (NOBRIDGE) LOG  🧪 Testing ML Kit detector before starting detection...
 (NOBRIDGE) LOG  ✅ ML Kit detector is ready and has detectFaces method
 (NOBRIDGE) LOG  📊 Setting isDetecting to true and starting interval...
 (NOBRIDGE) LOG  📊 Face detection state updated: {"faceData": false, "faceDetected": false, "faceQuality": undefined, "isDetecting": true, "verificationStep": "detecting"}
 (NOBRIDGE) LOG  ⏰ Starting detection interval...
 (NOBRIDGE) LOG  ✅ Face detection interval started successfully
 (NOBRIDGE) LOG  📊 Face detection state: {"faceData": false, "faceDetected": false, "faceQuality": undefined, "isDetecting": true, "verificationStep": "detecting"}
 (NOBRIDGE) LOG  🔍 === CAMERA isActive CALCULATION ===
 (NOBRIDGE) LOG  🔍 visible: true
 (NOBRIDGE) LOG  🔍 verificationStep: detecting
 (NOBRIDGE) LOG  🔍 isDetecting: true
 (NOBRIDGE) LOG  🔍 cameraKeepAlive: true
 (NOBRIDGE) LOG  🔍 Final isActive result: true
 (NOBRIDGE) LOG  🔍 Camera should be active - checking persistence state...
 (NOBRIDGE) LOG  🔍 === isDetecting STATE CHANGED ===
 (NOBRIDGE) LOG  🔍 New value: true
 (NOBRIDGE) LOG  🔍 Has interval: true
 (NOBRIDGE) LOG  🔍 Has timeout: true
 (NOBRIDGE) LOG  🔍 Camera keep-alive: true
 (NOBRIDGE) LOG  🔍 Timestamp: 2025-09-09T16:36:18.373Z
 (NOBRIDGE) LOG  🔍 === FACE DETECTION STATE CHANGED ===
 (NOBRIDGE) LOG  🔍 Face data: true
 (NOBRIDGE) LOG  🔍 Face detected: true
 (NOBRIDGE) LOG  🔍 Face quality: true
 (NOBRIDGE) LOG  🔍 Is detecting: true
 (NOBRIDGE) LOG  🔍 Has interval: true
 (NOBRIDGE) LOG  🔍 Camera keep-alive: true
 (NOBRIDGE) LOG  🔍 Timestamp: 2025-09-09T16:36:18.404Z
 (NOBRIDGE) LOG  🔍 === CAMERA KEEP-ALIVE EFFECT TRIGGERED ===
 (NOBRIDGE) LOG  🔍 Verification step changed to: detecting
 (NOBRIDGE) LOG  🔍 Current camera keep-alive state: true
 (NOBRIDGE) LOG  🔍 Camera keep-alive effect completed
 (NOBRIDGE) LOG  Face detection state: {"faceData": true, "faceDetected": true, "faceQuality": true, "isDetecting": true, "verificationStep": "detecting"}
 (NOBRIDGE) LOG  Moving to liveness detection step - good quality face detected
 (NOBRIDGE) LOG  🛑 stopDetection called: {"hasInterval": true, "hasTimeout": true, "isDetecting": false, "stack": "    at anonymous (http://192.168.0.110:8081/node_modules/expo-router/entry.bundle//&platform=android&dev=true&hot=false&transform.engine=hermes&transform.bytecode=1&transform.routerRoot=app&unstable_transformProfile=hermes-stable:392962:25)
    at anonymous (http://192.168.0.110:8081/node_modules/expo-router/entry.bundle//&platform=android&dev=true&hot=false&transform.engine=hermes&transform.bytecode=1&transform.routerRoot=app&unstable_transformProfile=hermes-stable:391220:24)
    at commitHookEffectListMount (http://192.168.0.110:8081/node_modules/expo-router/entry.bundle//&platform=android&dev=true&hot=false&transform.engine=hermes&transform.bytecode=1&transform.routerRoot=app&unstable_transformProfile=hermes-stable:31461:35)", "timestamp": "2025-09-09T16:36:18.427Z"}
 (NOBRIDGE) LOG  Detection interval cleared
 (NOBRIDGE) LOG  Detection timeout cleared
 (NOBRIDGE) LOG  🛑 Face detection stopped - isDetecting set to false
 (NOBRIDGE) LOG  Camera onInitialized called
 (NOBRIDGE) LOG  🔍 === CAMERA isActive CALCULATION ===
 (NOBRIDGE) LOG  🔍 visible: true
 (NOBRIDGE) LOG  🔍 verificationStep: liveness
 (NOBRIDGE) LOG  🔍 isDetecting: false
 (NOBRIDGE) LOG  🔍 cameraKeepAlive: true
 (NOBRIDGE) LOG  🔍 Final isActive result: true
 (NOBRIDGE) LOG  🔍 Camera should be active - checking persistence state...
 (NOBRIDGE) LOG  Camera started - ensuring detection is running
 (NOBRIDGE) LOG  🔍 === isDetecting STATE CHANGED ===
 (NOBRIDGE) LOG  🔍 New value: false
 (NOBRIDGE) LOG  🔍 Has interval: false
 (NOBRIDGE) LOG  🔍 Has timeout: false
 (NOBRIDGE) LOG  🔍 Camera keep-alive: true
 (NOBRIDGE) LOG  🔍 Timestamp: 2025-09-09T16:36:18.562Z
 (NOBRIDGE) LOG  🔍 === FACE DETECTION STATE CHANGED ===
 (NOBRIDGE) LOG  🔍 Face data: true
 (NOBRIDGE) LOG  🔍 Face detected: true
 (NOBRIDGE) LOG  🔍 Face quality: true
 (NOBRIDGE) LOG  🔍 Is detecting: false
 (NOBRIDGE) LOG  🔍 Has interval: false
 (NOBRIDGE) LOG  🔍 Camera keep-alive: true
 (NOBRIDGE) LOG  🔍 Timestamp: 2025-09-09T16:36:18.579Z
 (NOBRIDGE) LOG  🔍 === CAMERA KEEP-ALIVE EFFECT TRIGGERED ===
 (NOBRIDGE) LOG  🔍 Verification step changed to: liveness
 (NOBRIDGE) LOG  🔍 Current camera keep-alive state: true
 (NOBRIDGE) LOG  🔍 Camera keep-alive effect completed
 (NOBRIDGE) LOG  ⏰ Starting countdown timer: 5
 (NOBRIDGE) LOG  Face detection state: {"faceData": true, "faceDetected": true, "faceQuality": true, "isDetecting": false, "verificationStep": "liveness"}
 (NOBRIDGE) LOG  👁️ Starting liveness detection...
 (NOBRIDGE) LOG  👁️ Liveness detection started successfully
 (NOBRIDGE) LOG  Camera initialized - connecting reference to face detection hook
 (NOBRIDGE) LOG  🔍 === SETTING CAMERA REFERENCE ===
 (NOBRIDGE) LOG  🔍 Camera component exists: true
 (NOBRIDGE) LOG  🔍 Component type: object
 (NOBRIDGE) LOG  🔍 Has component: true
 (NOBRIDGE) LOG  🔍 Component methods: ["props", "context", "refs", "updater", "displayName", "isNativeViewMounted", "lastUIRotation", "rotationHelper", "onViewReady", "onAverageFpsChanged", "onInitialized", "onStarted", "onStopped", "onPreviewStarted", "onPreviewStopped", "onShutter", "onOutputOrientationChanged", "onPreviewOrientationChanged", "onError", "onCodeScanned", "ref", "lastFrameProcessor", "state", "_reactInternals", "_reactInternalInstance"]
 (NOBRIDGE) LOG  🔍 Has takePhoto method: true
 (NOBRIDGE) LOG  🔍 Camera reference stored in persistent ref
 (NOBRIDGE) LOG  ✅ Camera reference set successfully: {"cameraRefType": "object", "hasCameraRef": true, "hasTakePhotoMethod": true, "persistentRefState": "valid"}
 (NOBRIDGE) LOG  🔍 === CAMERA isActive CALCULATION ===
 (NOBRIDGE) LOG  🔍 visible: true
 (NOBRIDGE) LOG  🔍 verificationStep: liveness
 (NOBRIDGE) LOG  🔍 isDetecting: false
 (NOBRIDGE) LOG  🔍 cameraKeepAlive: true
 (NOBRIDGE) LOG  🔍 Final isActive result: true
 (NOBRIDGE) LOG  🔍 Camera should be active - checking persistence state...
 (NOBRIDGE) LOG  ⏰ Starting countdown timer: 5
 (NOBRIDGE) LOG  Face registration successful for angle: 0 {"confidence": 1, "faceEncoding": "AADAfwAAwH8AAMB/AADAfwAAwH8AAMB/AADAfwAAwH8AAMB/AADAfwAAwH8AAMB/AADAfwAAwH8AAMB/AADAfwAAwH8AAMB/AADAfwAAwH8pXB8+SOG6PgAA4D5VVRU/NbB/P51Xfz8xy4G9QXx/PwPBqz0hGX8/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgPlVVFT8AAEA/AADAfwAAwH8AAMB/AADAfwAAwH8AAAAAAAAAAAAAwH8AAMB/AADAfwAAwH8AAMB/AADAfwAAwH8AAMB/AADAfwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB7ZhM8AAAAAAAAAD9JrPe9A8GrPTHLgb0AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA", "isOffline": false, "livenessDetected": false, "success": true, "timestamp": 2025-09-09T16:36:16.894Z}
 (NOBRIDGE) LOG  🔍 === CAMERA isActive CALCULATION ===
 (NOBRIDGE) LOG  🔍 visible: false
 (NOBRIDGE) LOG  🔍 verificationStep: liveness
 (NOBRIDGE) LOG  🔍 isDetecting: false
 (NOBRIDGE) LOG  🔍 cameraKeepAlive: true
 (NOBRIDGE) LOG  🔍 Final isActive result: false
 (NOBRIDGE) LOG  ⚠️ Modal being hidden during active detection - preventing cleanup
 (NOBRIDGE) LOG  ⏰ Starting countdown timer: 5
 (NOBRIDGE) LOG  Modal hidden - stopping all detection processes
 (NOBRIDGE) LOG  🛑 stopDetection called: {"hasInterval": false, "hasTimeout": false, "isDetecting": false, "stack": "    at anonymous (http://192.168.0.110:8081/node_modules/expo-router/entry.bundle//&platform=android&dev=true&hot=false&transform.engine=hermes&transform.bytecode=1&transform.routerRoot=app&unstable_transformProfile=hermes-stable:392962:25)
    at anonymous (http://192.168.0.110:8081/node_modules/expo-router/entry.bundle//&platform=android&dev=true&hot=false&transform.engine=hermes&transform.bytecode=1&transform.routerRoot=app&unstable_transformProfile=hermes-stable:391334:22)
    at commitHookEffectListMount (http://192.168.0.110:8081/node_modules/expo-router/entry.bundle//&platform=android&dev=true&hot=false&transform.engine=hermes&transform.bytecode=1&transform.routerRoot=app&unstable_transformProfile=hermes-stable:31461:35)", "timestamp": "2025-09-09T16:36:19.139Z"}
 (NOBRIDGE) LOG  🛑 Face detection stopped - isDetecting set to false
 (NOBRIDGE) LOG  👁️ Stopping liveness detection...
 (NOBRIDGE) LOG  👁️ Liveness detection stopped
 (NOBRIDGE) LOG  Modal hidden - resetting verification state (not successful)
 (NOBRIDGE) LOG  👁️ Face data effect triggered: {"faceDataTimestamp": 1757435776297, "hasFaceData": true, "isLivenessActive": false}
 (NOBRIDGE) LOG  👁️ Not processing face data: {"reason": "Liveness not active"}
 (NOBRIDGE) LOG  🔍 === CAMERA KEEP-ALIVE EFFECT TRIGGERED ===
 (NOBRIDGE) LOG  🔍 Verification step changed to: initializing
 (NOBRIDGE) LOG  🔍 Current camera keep-alive state: true
 (NOBRIDGE) LOG  🔍 Camera keep-alive effect completed
 (NOBRIDGE) LOG  Modal hidden - stopping all detection processes
 (NOBRIDGE) LOG  🛑 stopDetection called: {"hasInterval": false, "hasTimeout": false, "isDetecting": false, "stack": "    at anonymous (http://192.168.0.110:8081/node_modules/expo-router/entry.bundle//&platform=android&dev=true&hot=false&transform.engine=hermes&transform.bytecode=1&transform.routerRoot=app&unstable_transformProfile=hermes-stable:392962:25)
    at anonymous (http://192.168.0.110:8081/node_modules/expo-router/entry.bundle//&platform=android&dev=true&hot=false&transform.engine=hermes&transform.bytecode=1&transform.routerRoot=app&unstable_transformProfile=hermes-stable:391334:22)
    at commitHookEffectListMount (http://192.168.0.110:8081/node_modules/expo-router/entry.bundle//&platform=android&dev=true&hot=false&transform.engine=hermes&transform.bytecode=1&transform.routerRoot=app&unstable_transformProfile=hermes-stable:31461:35)", "timestamp": "2025-09-09T16:36:19.213Z"}
 (NOBRIDGE) LOG  🛑 Face detection stopped - isDetecting set to false
 (NOBRIDGE) LOG  👁️ Stopping liveness detection...
 (NOBRIDGE) LOG  👁️ Liveness detection stopped
 (NOBRIDGE) LOG  Modal hidden - resetting verification state (not successful)
 (NOBRIDGE) LOG  🚀 Starting periodic face detection with ML Kit...
 (NOBRIDGE) LOG  🧪 Testing ML Kit detector before starting detection...
 (NOBRIDGE) LOG  ✅ ML Kit detector is ready and has detectFaces method
 (NOBRIDGE) LOG  📊 Setting isDetecting to true and starting interval...
 (NOBRIDGE) LOG  📊 Face detection state updated: {"faceData": false, "faceDetected": false, "faceQuality": undefined, "isDetecting": true, "verificationStep": "detecting"}
 (NOBRIDGE) LOG  ⏰ Starting detection interval...
 (NOBRIDGE) LOG  ✅ Face detection interval started successfully
 (NOBRIDGE) LOG  📊 Face detection state: {"faceData": false, "faceDetected": false, "faceQuality": undefined, "isDetecting": true, "verificationStep": "detecting"}
 (NOBRIDGE) LOG  🔍 === CAMERA isActive CALCULATION ===
 (NOBRIDGE) LOG  🔍 visible: false
 (NOBRIDGE) LOG  🔍 verificationStep: detecting
 (NOBRIDGE) LOG  🔍 isDetecting: true
 (NOBRIDGE) LOG  🔍 cameraKeepAlive: true
 (NOBRIDGE) LOG  🔍 Final isActive result: false
 (NOBRIDGE) LOG  🔍 === isDetecting STATE CHANGED ===
 (NOBRIDGE) LOG  🔍 New value: true
 (NOBRIDGE) LOG  🔍 Has interval: true
 (NOBRIDGE) LOG  🔍 Has timeout: true
 (NOBRIDGE) LOG  🔍 Camera keep-alive: true
 (NOBRIDGE) LOG  🔍 Timestamp: 2025-09-09T16:36:19.298Z
 (NOBRIDGE) LOG  🔍 === FACE DETECTION STATE CHANGED ===
 (NOBRIDGE) LOG  🔍 Face data: true
 (NOBRIDGE) LOG  🔍 Face detected: true
 (NOBRIDGE) LOG  🔍 Face quality: true
 (NOBRIDGE) LOG  🔍 Is detecting: true
 (NOBRIDGE) LOG  🔍 Has interval: true
 (NOBRIDGE) LOG  🔍 Camera keep-alive: true
 (NOBRIDGE) LOG  🔍 Timestamp: 2025-09-09T16:36:19.316Z
 (NOBRIDGE) LOG  🔍 === CAMERA KEEP-ALIVE EFFECT TRIGGERED ===
 (NOBRIDGE) LOG  🔍 Verification step changed to: detecting
 (NOBRIDGE) LOG  🔍 Current camera keep-alive state: true
 (NOBRIDGE) LOG  🔍 Camera keep-alive effect completed
 (NOBRIDGE) LOG  Modal hidden - stopping all detection processes
 (NOBRIDGE) LOG  🛑 stopDetection called: {"hasInterval": true, "hasTimeout": true, "isDetecting": false, "stack": "    at anonymous (http://192.168.0.110:8081/node_modules/expo-router/entry.bundle//&platform=android&dev=true&hot=false&transform.engine=hermes&transform.bytecode=1&transform.routerRoot=app&unstable_transformProfile=hermes-stable:392962:25)
    at anonymous (http://192.168.0.110:8081/node_modules/expo-router/entry.bundle//&platform=android&dev=true&hot=false&transform.engine=hermes&transform.bytecode=1&transform.routerRoot=app&unstable_transformProfile=hermes-stable:391334:22)
    at commitHookEffectListMount (http://192.168.0.110:8081/node_modules/expo-router/entry.bundle//&platform=android&dev=true&hot=false&transform.engine=hermes&transform.bytecode=1&transform.routerRoot=app&unstable_transformProfile=hermes-stable:31461:35)", "timestamp": "2025-09-09T16:36:19.331Z"}
 (NOBRIDGE) LOG  Detection interval cleared
 (NOBRIDGE) LOG  Detection timeout cleared
 (NOBRIDGE) LOG  🛑 Face detection stopped - isDetecting set to false
 (NOBRIDGE) LOG  👁️ Stopping liveness detection...
 (NOBRIDGE) LOG  👁️ Liveness detection stopped
 (NOBRIDGE) LOG  Modal hidden - resetting verification state (not successful)
 (NOBRIDGE) LOG  🔍 === isDetecting STATE CHANGED ===
 (NOBRIDGE) LOG  🔍 New value: false
 (NOBRIDGE) LOG  🔍 Has interval: false
 (NOBRIDGE) LOG  🔍 Has timeout: false
 (NOBRIDGE) LOG  🔍 Camera keep-alive: true
 (NOBRIDGE) LOG  🔍 Timestamp: 2025-09-09T16:36:19.393Z
 (NOBRIDGE) LOG  🔍 === FACE DETECTION STATE CHANGED ===
 (NOBRIDGE) LOG  🔍 Face data: true
 (NOBRIDGE) LOG  🔍 Face detected: true
 (NOBRIDGE) LOG  🔍 Face quality: true
 (NOBRIDGE) LOG  🔍 Is detecting: false
 (NOBRIDGE) LOG  🔍 Has interval: false
 (NOBRIDGE) LOG  🔍 Camera keep-alive: true
 (NOBRIDGE) LOG  🔍 Timestamp: 2025-09-09T16:36:19.410Z
 (NOBRIDGE) LOG  🔍 === CAMERA KEEP-ALIVE EFFECT TRIGGERED ===
 (NOBRIDGE) LOG  🔍 Verification step changed to: initializing
 (NOBRIDGE) LOG  🔍 Current camera keep-alive state: true
 (NOBRIDGE) LOG  🔍 Camera keep-alive effect completed
 (NOBRIDGE) LOG  Modal hidden - stopping all detection processes
 (NOBRIDGE) LOG  🛑 stopDetection called: {"hasInterval": false, "hasTimeout": false, "isDetecting": false, "stack": "    at anonymous (http://192.168.0.110:8081/node_modules/expo-router/entry.bundle//&platform=android&dev=true&hot=false&transform.engine=hermes&transform.bytecode=1&transform.routerRoot=app&unstable_transformProfile=hermes-stable:392962:25)
    at anonymous (http://192.168.0.110:8081/node_modules/expo-router/entry.bundle//&platform=android&dev=true&hot=false&transform.engine=hermes&transform.bytecode=1&transform.routerRoot=app&unstable_transformProfile=hermes-stable:391334:22)
    at commitHookEffectListMount (http://192.168.0.110:8081/node_modules/expo-router/entry.bundle//&platform=android&dev=true&hot=false&transform.engine=hermes&transform.bytecode=1&transform.routerRoot=app&unstable_transformProfile=hermes-stable:31461:35)", "timestamp": "2025-09-09T16:36:19.423Z"}
 (NOBRIDGE) LOG  🛑 Face detection stopped - isDetecting set to false
 (NOBRIDGE) LOG  👁️ Stopping liveness detection...
 (NOBRIDGE) LOG  👁️ Liveness detection stopped
 (NOBRIDGE) LOG  Modal hidden - resetting verification state (not successful)
 (NOBRIDGE) LOG  Face detection state: {"faceData": true, "faceDetected": true, "faceQuality": true, "isDetecting": false, "verificationStep": "initializing"}
 (NOBRIDGE) LOG  Modal visible - starting verification process
 (NOBRIDGE) LOG  🛡️ Detection active flag set - preventing modal cleanup
 (NOBRIDGE) LOG  🚀 Starting periodic face detection with ML Kit...
 (NOBRIDGE) LOG  🧪 Testing ML Kit detector before starting detection...
 (NOBRIDGE) LOG  ✅ ML Kit detector is ready and has detectFaces method
 (NOBRIDGE) LOG  📊 Setting isDetecting to true and starting interval...
 (NOBRIDGE) LOG  📊 Face detection state updated: {"faceData": false, "faceDetected": false, "faceQuality": undefined, "isDetecting": true, "verificationStep": "detecting"}
 (NOBRIDGE) LOG  ⏰ Starting detection interval...
 (NOBRIDGE) LOG  ✅ Face detection interval started successfully
 (NOBRIDGE) LOG  📊 Face detection state: {"faceData": false, "faceDetected": false, "faceQuality": undefined, "isDetecting": true, "verificationStep": "detecting"}
 (NOBRIDGE) LOG  🔍 === CAMERA isActive CALCULATION ===
 (NOBRIDGE) LOG  🔍 visible: true
 (NOBRIDGE) LOG  🔍 verificationStep: detecting
 (NOBRIDGE) LOG  🔍 isDetecting: true
 (NOBRIDGE) LOG  🔍 cameraKeepAlive: true
 (NOBRIDGE) LOG  🔍 Final isActive result: true
 (NOBRIDGE) LOG  🔍 Camera should be active - checking persistence state...
 (NOBRIDGE) LOG  🔍 === isDetecting STATE CHANGED ===
 (NOBRIDGE) LOG  🔍 New value: true
 (NOBRIDGE) LOG  🔍 Has interval: true
 (NOBRIDGE) LOG  🔍 Has timeout: true
 (NOBRIDGE) LOG  🔍 Camera keep-alive: true
 (NOBRIDGE) LOG  🔍 Timestamp: 2025-09-09T16:36:21.754Z
 (NOBRIDGE) LOG  🔍 === FACE DETECTION STATE CHANGED ===
 (NOBRIDGE) LOG  🔍 Face data: true
 (NOBRIDGE) LOG  🔍 Face detected: true
 (NOBRIDGE) LOG  🔍 Face quality: true
 (NOBRIDGE) LOG  🔍 Is detecting: true
 (NOBRIDGE) LOG  🔍 Has interval: true
 (NOBRIDGE) LOG  🔍 Camera keep-alive: true
 (NOBRIDGE) LOG  🔍 Timestamp: 2025-09-09T16:36:21.775Z
 (NOBRIDGE) LOG  🔍 === CAMERA KEEP-ALIVE EFFECT TRIGGERED ===
 (NOBRIDGE) LOG  🔍 Verification step changed to: detecting
 (NOBRIDGE) LOG  🔍 Current camera keep-alive state: true
 (NOBRIDGE) LOG  🔍 Camera keep-alive effect completed
 (NOBRIDGE) LOG  Face detection state: {"faceData": true, "faceDetected": true, "faceQuality": true, "isDetecting": true, "verificationStep": "detecting"}
 (NOBRIDGE) LOG  Moving to liveness detection step - good quality face detected
 (NOBRIDGE) LOG  🛑 stopDetection called: {"hasInterval": true, "hasTimeout": true, "isDetecting": false, "stack": "    at anonymous (http://192.168.0.110:8081/node_modules/expo-router/entry.bundle//&platform=android&dev=true&hot=false&transform.engine=hermes&transform.bytecode=1&transform.routerRoot=app&unstable_transformProfile=hermes-stable:392962:25)
    at anonymous (http://192.168.0.110:8081/node_modules/expo-router/entry.bundle//&platform=android&dev=true&hot=false&transform.engine=hermes&transform.bytecode=1&transform.routerRoot=app&unstable_transformProfile=hermes-stable:391220:24)
    at commitHookEffectListMount (http://192.168.0.110:8081/node_modules/expo-router/entry.bundle//&platform=android&dev=true&hot=false&transform.engine=hermes&transform.bytecode=1&transform.routerRoot=app&unstable_transformProfile=hermes-stable:31461:35)", "timestamp": "2025-09-09T16:36:21.790Z"}
 (NOBRIDGE) LOG  Detection interval cleared
 (NOBRIDGE) LOG  Detection timeout cleared
 (NOBRIDGE) LOG  🛑 Face detection stopped - isDetecting set to false
 (NOBRIDGE) LOG  🔍 === CAMERA isActive CALCULATION ===
 (NOBRIDGE) LOG  🔍 visible: true
 (NOBRIDGE) LOG  🔍 verificationStep: liveness
 (NOBRIDGE) LOG  🔍 isDetecting: false
 (NOBRIDGE) LOG  🔍 cameraKeepAlive: true
 (NOBRIDGE) LOG  🔍 Final isActive result: true
 (NOBRIDGE) LOG  🔍 Camera should be active - checking persistence state...
 (NOBRIDGE) LOG  Camera onInitialized called
 (NOBRIDGE) LOG  Camera started - ensuring detection is running
 (NOBRIDGE) LOG  🔍 === isDetecting STATE CHANGED ===
 (NOBRIDGE) LOG  🔍 New value: false
 (NOBRIDGE) LOG  🔍 Has interval: false
 (NOBRIDGE) LOG  🔍 Has timeout: false
 (NOBRIDGE) LOG  🔍 Camera keep-alive: true
 (NOBRIDGE) LOG  🔍 Timestamp: 2025-09-09T16:36:21.952Z
 (NOBRIDGE) LOG  🔍 === FACE DETECTION STATE CHANGED ===
 (NOBRIDGE) LOG  🔍 Face data: true
 (NOBRIDGE) LOG  🔍 Face detected: true
 (NOBRIDGE) LOG  🔍 Face quality: true
 (NOBRIDGE) LOG  🔍 Is detecting: false
 (NOBRIDGE) LOG  🔍 Has interval: false
 (NOBRIDGE) LOG  🔍 Camera keep-alive: true
 (NOBRIDGE) LOG  🔍 Timestamp: 2025-09-09T16:36:21.999Z
 (NOBRIDGE) LOG  🔍 === CAMERA KEEP-ALIVE EFFECT TRIGGERED ===
 (NOBRIDGE) LOG  🔍 Verification step changed to: liveness
 (NOBRIDGE) LOG  🔍 Current camera keep-alive state: true
 (NOBRIDGE) LOG  🔍 Camera keep-alive effect completed
 (NOBRIDGE) LOG  ⏰ Starting countdown timer: 5
 (NOBRIDGE) LOG  Face detection state: {"faceData": true, "faceDetected": true, "faceQuality": true, "isDetecting": false, "verificationStep": "liveness"}
 (NOBRIDGE) LOG  ⚠️ Liveness timeout but face detected - proceeding to capture (ultra-forgiving)
 (NOBRIDGE) LOG  🔒 Keeping camera active during transition to prevent native view detachment
 (NOBRIDGE) LOG  🔍 Stabilizing camera for final capture...
 (NOBRIDGE) LOG  👁️ Starting liveness detection...
 (NOBRIDGE) LOG  👁️ Liveness detection started successfully
 (NOBRIDGE) LOG  🔍 === CAMERA isActive CALCULATION ===
 (NOBRIDGE) LOG  🔍 visible: true
 (NOBRIDGE) LOG  🔍 verificationStep: capturing
 (NOBRIDGE) LOG  🔍 isDetecting: false
 (NOBRIDGE) LOG  🔍 cameraKeepAlive: true
 (NOBRIDGE) LOG  🔍 Final isActive result: true
 (NOBRIDGE) LOG  🔍 Camera should be active - checking persistence state...
 (NOBRIDGE) LOG  Camera initialized - connecting reference to face detection hook
 (NOBRIDGE) LOG  🔍 === SETTING CAMERA REFERENCE ===
 (NOBRIDGE) LOG  🔍 Camera component exists: true
 (NOBRIDGE) LOG  🔍 Component type: object
 (NOBRIDGE) LOG  🔍 Has component: true
 (NOBRIDGE) LOG  🔍 Component methods: ["props", "context", "refs", "updater", "displayName", "isNativeViewMounted", "lastUIRotation", "rotationHelper", "onViewReady", "onAverageFpsChanged", "onInitialized", "onStarted", "onStopped", "onPreviewStarted", "onPreviewStopped", "onShutter", "onOutputOrientationChanged", "onPreviewOrientationChanged", "onError", "onCodeScanned", "ref", "lastFrameProcessor", "state", "_reactInternals", "_reactInternalInstance"]
 (NOBRIDGE) LOG  🔍 Has takePhoto method: true
 (NOBRIDGE) LOG  🔍 Camera reference stored in persistent ref
 (NOBRIDGE) LOG  ✅ Camera reference set successfully: {"cameraRefType": "object", "hasCameraRef": true, "hasTakePhotoMethod": true, "persistentRefState": "valid"}
 (NOBRIDGE) LOG  👁️ Face data effect triggered: {"faceDataTimestamp": 1757435776297, "hasFaceData": true, "isLivenessActive": true}
 (NOBRIDGE) LOG  👁️ Processing face data for liveness detection
 (NOBRIDGE) LOG  👁️ processFaceData called: {"faceDataDetails": {"leftEye": 0.9974813461303711, "rightEye": 0.9974306225776672, "timestamp": 1757435776297}, "hasFaceData": true, "isLivenessActive": true}
 (NOBRIDGE) LOG  👁️ Processing liveness data: {"average": "0.997", "eyeClosedThreshold": 0.98, "eyeOpenThreshold": 0.995, "historyLength": 1, "leftEye": "0.997", "rightEye": "0.997"}
 (NOBRIDGE) LOG  👁️ Analyzing blink pattern in history: {"historyLength": 1, "minRequired": 5}
 (NOBRIDGE) LOG  👁️ Liveness score calculation: {"blinkCount": 0, "blinkScore": 0, "historyLength": 1, "minRequired": 0.1, "movementScore": "0.000", "overallScore": "0.020", "timeScore": "0.100"}
 (NOBRIDGE) LOG  🔍 === CAMERA KEEP-ALIVE EFFECT TRIGGERED ===
 (NOBRIDGE) LOG  🔍 Verification step changed to: capturing
 (NOBRIDGE) LOG  🔍 Current camera keep-alive state: true
 (NOBRIDGE) LOG  🔍 Camera keep-alive effect completed
 (NOBRIDGE) LOG  Face detection state: {"faceData": true, "faceDetected": true, "faceQuality": true, "isDetecting": false, "verificationStep": "capturing"}
 (NOBRIDGE) LOG  🔍 === CAMERA isActive CALCULATION ===
 (NOBRIDGE) LOG  🔍 visible: true
 (NOBRIDGE) LOG  🔍 verificationStep: capturing
 (NOBRIDGE) LOG  🔍 isDetecting: false
 (NOBRIDGE) LOG  🔍 cameraKeepAlive: true
 (NOBRIDGE) LOG  🔍 Final isActive result: true
 (NOBRIDGE) LOG  🔍 Camera should be active - checking persistence state...
 (NOBRIDGE) LOG  🔍 Proactively monitoring camera state...
 (NOBRIDGE) LOG  🔍 === CAMERA STATE MONITORING ===
 (NOBRIDGE) LOG  🔍 Camera ref exists: true
 (NOBRIDGE) LOG  🔍 Persistent ref exists: true
 (NOBRIDGE) LOG  🔍 Camera ref state: valid
 (NOBRIDGE) LOG  🔍 Camera state monitoring: {"hasTakePhoto": true, "isActive": true}
 (NOBRIDGE) LOG  ✅ Camera state is healthy - proceeding with capture
 (NOBRIDGE) LOG  🔍 === COMPREHENSIVE CAMERA STATE VALIDATION ===
 (NOBRIDGE) LOG  🔍 Camera ref exists: true
 (NOBRIDGE) LOG  🔍 Camera ref type: object
 (NOBRIDGE) LOG  🔍 Camera methods available: ["props", "context", "refs", "updater", "displayName", "isNativeViewMounted", "lastUIRotation", "rotationHelper", "onViewReady", "onAverageFpsChanged", "onInitialized", "onStarted", "onStopped", "onPreviewStarted", "onPreviewStopped", "onShutter", "onOutputOrientationChanged", "onPreviewOrientationChanged", "onError", "onCodeScanned", "ref", "lastFrameProcessor", "state", "_reactInternals", "_reactInternalInstance"]
 (NOBRIDGE) LOG  🔍 Has takePhoto method: true
 (NOBRIDGE) LOG  🔍 Camera props: {"audio": false, "device": {"formats": [[Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object]], "hardwareLevel": "full", "hasFlash": false, "hasTorch": false, "id": "1", "isMultiCam": false, "maxExposure": 24, "maxZoom": 10, "minExposure": -24, "minFocusDistance": 0, "minZoom": 1, "name": "1 (FRONT) androidx.camera.camera2", "neutralZoom": 1, "physicalDevices": ["wide-angle-camera"], "position": "front", "sensorOrientation": "landscape-right", "supportsFocus": true, "supportsLowLightBoost": false, "supportsRawCapture": false}, "frameProcessor": {"frameProcessor": [Function withFrameRefCountingTs1], "type": "readonly"}, "isActive": true, "onError": [Function onError], "onInitialized": [Function onInitialized], "onStarted": [Function onStarted], "photo": true, "style": {"height": "100%", "width": "100%"}, "video": false}
 (NOBRIDGE) LOG  🔍 Camera state: {"averageFpsSamples": [], "isRecordingWithFlash": false}
 (NOBRIDGE) LOG  🔍 Camera display name: Camera
 (NOBRIDGE) LOG  ✅ Camera validation passed - proceeding with capture
 (NOBRIDGE) LOG  Capturing photo with validated face...
 (NOBRIDGE) LOG  🔍 Validating camera state before final capture...
 (NOBRIDGE) LOG  ✅ Camera validation successful on attempt 1
 (NOBRIDGE) LOG  📸 Final camera state validation before photo capture...
 (NOBRIDGE) LOG  capturePhoto called with: {"cameraRefCurrent": {"_reactInternalInstance": {}, "_reactInternals": {"_debugHookTypes": null, "_debugInfo": null, "_debugNeedsRemount": false, "_debugOwner": [FiberNode], "actualDuration": 0.2394779995083809, "actualStartTime": 62186238.60449, "alternate": [FiberNode], "child": [FiberNode], "childLanes": 0, "deletions": null, "dependencies": null, "elementType": [Function Camera], "flags": 2097157, "index": 0, "key": "1", "lanes": 0, "memoizedProps": [Object], "memoizedState": [Object], "mode": 3, "pendingProps": [Object], "ref": [Object], "refCleanup": null, "return": [FiberNode], "selfBaseDuration": 0.18557199835777283, "sibling": [FiberNode], "stateNode": [Circular], "subtreeFlags": 2097152, "tag": 1, "treeBaseDuration": 0.19932200014591217, "type": [Function Camera], "updateQueue": [Object]}, "context": {}, "displayName": "Camera", "isNativeViewMounted": true, "lastFrameProcessor": [Function withFrameRefCountingTs1], "lastUIRotation": 0, "onAverageFpsChanged": [Function bound onAverageFpsChanged], "onCodeScanned": [Function bound onCodeScanned], "onError": [Function bound onError], "onInitialized": [Function bound onInitialized], "onOutputOrientationChanged": [Function bound onOutputOrientationChanged], "onPreviewOrientationChanged": [Function bound onPreviewOrientationChanged], "onPreviewStarted": [Function bound onPreviewStarted], "onPreviewStopped": [Function bound onPreviewStopped], "onShutter": [Function bound onShutter], "onStarted": [Function bound onStarted], "onStopped": [Function bound onStopped], "onViewReady": [Function bound onViewReady], "props": {"audio": false, "device": [Object], "frameProcessor": [Object], "isActive": true, "onError": [Function onError], "onInitialized": [Function onInitialized], "onStarted": [Function onStarted], "photo": true, "style": [Object], "video": false}, "ref": {"current": [ReactFabricHostComponent]}, "refs": {}, "rotationHelper": {"outputOrientation": "portrait", "previewOrientation": "portrait"}, "state": {"averageFpsSamples": [Array], "isRecordingWithFlash": false}, "updater": {"enqueueForceUpdate": [Function enqueueForceUpdate], "enqueueReplaceState": [Function enqueueReplaceState], "enqueueSetState": [Function enqueueSetState], "isMounted": [Function isMounted]}}, "hasCameraRef": true, "hasTakePhotoMethod": true, "isInitialized": true}
 (NOBRIDGE) LOG  Capturing photo with validated face...
 (NOBRIDGE) LOG  🔍 Validating camera state before final capture...
 (NOBRIDGE) LOG  ✅ Camera validation successful on attempt 1
 (NOBRIDGE) LOG  📸 Final camera state validation before photo capture...
 (NOBRIDGE) LOG  🔍 === GET CAMERA INSTANCE ===
 (NOBRIDGE) LOG  🔍 Main ref exists: true
 (NOBRIDGE) LOG  🔍 Persistent ref exists: true
 (NOBRIDGE) LOG  ✅ getCameraInstance: returning main ref camera instance
 (NOBRIDGE) LOG  ✅ Photo capture successful: {"height": 1200, "isMirrored": true, "isRawPhoto": false, "orientation": "portrait", "path": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy6080523220460064426.jpg", "width": 1600}
 (NOBRIDGE) LOG  ✅ Photo capture successful: {"height": 1200, "timestamp": 1757435783948, "uri": "file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy6080523220460064426.jpg", "width": 1600}
 (NOBRIDGE) LOG  🔍 === CAMERA KEEP-ALIVE EFFECT TRIGGERED ===
 (NOBRIDGE) LOG  🔍 Verification step changed to: processing
 (NOBRIDGE) LOG  🔍 Current camera keep-alive state: true
 (NOBRIDGE) LOG  🔍 Camera keep-alive effect completed
 (NOBRIDGE) LOG  Face detection state: {"faceData": true, "faceDetected": true, "faceQuality": true, "isDetecting": false, "verificationStep": "processing"}
 (NOBRIDGE) WARN  AES encryption failed, falling back to Expo crypto: [TypeError: 0, _reactNativeAesCrypto.encrypt is not a function (it is undefined)]
 (NOBRIDGE) WARN  Value being stored in SecureStore is larger than 2048 bytes and it may not be stored successfully. In a future SDK version, this call may throw an error.
 (NOBRIDGE) LOG  Face profile cached for user 22
 (NOBRIDGE) LOG  Face profile stored successfully for user: 22
 (NOBRIDGE) LOG  🛡️ Detection active flag reset - allowing cleanup
 (NOBRIDGE) LOG  🔍 === CAMERA KEEP-ALIVE EFFECT TRIGGERED ===
 (NOBRIDGE) LOG  🔍 Verification step changed to: success
 (NOBRIDGE) LOG  🔍 Current camera keep-alive state: true
 (NOBRIDGE) LOG  🔒 Keeping camera active for multi-angle registration...
 (NOBRIDGE) LOG  🔍 Camera keep-alive effect completed
 (NOBRIDGE) LOG  Face detection state: {"faceData": true, "faceDetected": true, "faceQuality": true, "isDetecting": false, "verificationStep": "success"}
 (NOBRIDGE) LOG  Modal visible - verification already completed successfully, not restarting
 (NOBRIDGE) LOG  Modal visible for multi-angle registration - resetting state for next angle
 (NOBRIDGE) LOG  🔄 Resetting modal state for next angle registration...
 (NOBRIDGE) LOG  ✅ Modal state reset complete for next angle
 (NOBRIDGE) LOG  🔍 === CAMERA KEEP-ALIVE EFFECT TRIGGERED ===
 (NOBRIDGE) LOG  🔍 Verification step changed to: initializing
 (NOBRIDGE) LOG  🔍 Current camera keep-alive state: true
 (NOBRIDGE) LOG  🔍 Camera keep-alive effect completed
 (NOBRIDGE) LOG  Face detection state: {"faceData": true, "faceDetected": true, "faceQuality": true, "isDetecting": false, "verificationStep": "initializing"}
 (NOBRIDGE) LOG  Modal visible - starting verification process
 (NOBRIDGE) LOG  🛡️ Detection active flag set - preventing modal cleanup
 (NOBRIDGE) LOG  🚀 Starting verification process for next angle...
 (NOBRIDGE) LOG  ⚠️ Camera reference not available - starting verification anyway...
 (NOBRIDGE) LOG  🛡️ Detection active flag set - preventing modal cleanup
 (NOBRIDGE) LOG  🚀 Starting periodic face detection with ML Kit...
 (NOBRIDGE) LOG  🧪 Testing ML Kit detector before starting detection...
 (NOBRIDGE) LOG  ✅ ML Kit detector is ready and has detectFaces method
 (NOBRIDGE) LOG  📊 Setting isDetecting to true and starting interval...
 (NOBRIDGE) LOG  📊 Face detection state updated: {"faceData": false, "faceDetected": false, "faceQuality": undefined, "isDetecting": true, "verificationStep": "detecting"}
 (NOBRIDGE) LOG  ⏰ Starting detection interval...
 (NOBRIDGE) LOG  ✅ Face detection interval started successfully
 (NOBRIDGE) LOG  📊 Face detection state: {"faceData": false, "faceDetected": false, "faceQuality": undefined, "isDetecting": true, "verificationStep": "detecting"}
 (NOBRIDGE) LOG  🔍 === CAMERA isActive CALCULATION ===
 (NOBRIDGE) LOG  🔍 visible: true
 (NOBRIDGE) LOG  🔍 verificationStep: detecting
 (NOBRIDGE) LOG  🔍 isDetecting: true
 (NOBRIDGE) LOG  🔍 cameraKeepAlive: true
 (NOBRIDGE) LOG  🔍 Final isActive result: true
 (NOBRIDGE) LOG  🔍 Camera should be active - checking persistence state...
 (NOBRIDGE) LOG  🔍 === isDetecting STATE CHANGED ===
 (NOBRIDGE) LOG  🔍 New value: true
 (NOBRIDGE) LOG  🔍 Has interval: true
 (NOBRIDGE) LOG  🔍 Has timeout: true
 (NOBRIDGE) LOG  🔍 Camera keep-alive: true
 (NOBRIDGE) LOG  🔍 Timestamp: 2025-09-09T16:36:25.686Z
 (NOBRIDGE) LOG  🔍 === FACE DETECTION STATE CHANGED ===
 (NOBRIDGE) LOG  🔍 Face data: true
 (NOBRIDGE) LOG  🔍 Face detected: true
 (NOBRIDGE) LOG  🔍 Face quality: true
 (NOBRIDGE) LOG  🔍 Is detecting: true
 (NOBRIDGE) LOG  🔍 Has interval: true
 (NOBRIDGE) LOG  🔍 Camera keep-alive: true
 (NOBRIDGE) LOG  🔍 Timestamp: 2025-09-09T16:36:25.702Z
 (NOBRIDGE) LOG  🔍 === CAMERA KEEP-ALIVE EFFECT TRIGGERED ===
 (NOBRIDGE) LOG  🔍 Verification step changed to: detecting
 (NOBRIDGE) LOG  🔍 Current camera keep-alive state: true
 (NOBRIDGE) LOG  🔍 Camera keep-alive effect completed
 (NOBRIDGE) LOG  Face detection state: {"faceData": true, "faceDetected": true, "faceQuality": true, "isDetecting": true, "verificationStep": "detecting"}
 (NOBRIDGE) LOG  Moving to liveness detection step - good quality face detected
 (NOBRIDGE) LOG  🛑 stopDetection called: {"hasInterval": true, "hasTimeout": true, "isDetecting": false, "stack": "    at anonymous (http://192.168.0.110:8081/node_modules/expo-router/entry.bundle//&platform=android&dev=true&hot=false&transform.engine=hermes&transform.bytecode=1&transform.routerRoot=app&unstable_transformProfile=hermes-stable:392962:25)
    at anonymous (http://192.168.0.110:8081/node_modules/expo-router/entry.bundle//&platform=android&dev=true&hot=false&transform.engine=hermes&transform.bytecode=1&transform.routerRoot=app&unstable_transformProfile=hermes-stable:391220:24)
    at commitHookEffectListMount (http://192.168.0.110:8081/node_modules/expo-router/entry.bundle//&platform=android&dev=true&hot=false&transform.engine=hermes&transform.bytecode=1&transform.routerRoot=app&unstable_transformProfile=hermes-stable:31461:35)", "timestamp": "2025-09-09T16:36:25.717Z"}
 (NOBRIDGE) LOG  Detection interval cleared
 (NOBRIDGE) LOG  Detection timeout cleared
 (NOBRIDGE) LOG  🛑 Face detection stopped - isDetecting set to false
 (NOBRIDGE) LOG  🔍 === CAMERA isActive CALCULATION ===
 (NOBRIDGE) LOG  🔍 visible: true
 (NOBRIDGE) LOG  🔍 verificationStep: liveness
 (NOBRIDGE) LOG  🔍 isDetecting: false
 (NOBRIDGE) LOG  🔍 cameraKeepAlive: true
 (NOBRIDGE) LOG  🔍 Final isActive result: true
 (NOBRIDGE) LOG  🔍 Camera should be active - checking persistence state...
 (NOBRIDGE) LOG  Camera onInitialized called
 (NOBRIDGE) LOG  Camera started - ensuring detection is running
 (NOBRIDGE) LOG  🔍 === isDetecting STATE CHANGED ===
 (NOBRIDGE) LOG  🔍 New value: false
 (NOBRIDGE) LOG  🔍 Has interval: false
 (NOBRIDGE) LOG  🔍 Has timeout: false
 (NOBRIDGE) LOG  🔍 Camera keep-alive: true
 (NOBRIDGE) LOG  🔍 Timestamp: 2025-09-09T16:36:25.847Z
 (NOBRIDGE) LOG  🔍 === FACE DETECTION STATE CHANGED ===
 (NOBRIDGE) LOG  🔍 Face data: true
 (NOBRIDGE) LOG  🔍 Face detected: true
 (NOBRIDGE) LOG  🔍 Face quality: true
 (NOBRIDGE) LOG  🔍 Is detecting: false
 (NOBRIDGE) LOG  🔍 Has interval: false
 (NOBRIDGE) LOG  🔍 Camera keep-alive: true
 (NOBRIDGE) LOG  🔍 Timestamp: 2025-09-09T16:36:25.864Z
 (NOBRIDGE) LOG  🔍 === CAMERA KEEP-ALIVE EFFECT TRIGGERED ===
 (NOBRIDGE) LOG  🔍 Verification step changed to: liveness
 (NOBRIDGE) LOG  🔍 Current camera keep-alive state: true
 (NOBRIDGE) LOG  🔍 Camera keep-alive effect completed
 (NOBRIDGE) LOG  ⏰ Starting countdown timer: 5
 (NOBRIDGE) LOG  Face detection state: {"faceData": true, "faceDetected": true, "faceQuality": true, "isDetecting": false, "verificationStep": "liveness"}
(NOBRIDGE) LOG  🔍 === CAMERA isActive CALCULATION ===
 (NOBRIDGE) LOG  🔍 visible: true
 (NOBRIDGE) LOG  🔍 verificationStep: liveness
 (NOBRIDGE) LOG  🔍 isDetecting: false
 (NOBRIDGE) LOG  🔍 cameraKeepAlive: true
 (NOBRIDGE) LOG  🔍 Final isActive result: true
 (NOBRIDGE) LOG  🔍 Camera should be active - checking persistence state...
 (NOBRIDGE) LOG  👁️ Starting liveness detection...
 (NOBRIDGE) LOG  👁️ Liveness detection started successfully
 (NOBRIDGE) LOG  Camera initialized - connecting reference to face detection hook
 (NOBRIDGE) LOG  🔍 === SETTING CAMERA REFERENCE ===
 (NOBRIDGE) LOG  🔍 Camera component exists: true
 (NOBRIDGE) LOG  🔍 Component type: object
 (NOBRIDGE) LOG  🔍 Has component: true
 (NOBRIDGE) LOG  🔍 Component methods: ["props", "context", "refs", "updater", "displayName", "isNativeViewMounted", "lastUIRotation", "rotationHelper", "onViewReady", "onAverageFpsChanged", "onInitialized", "onStarted", "onStopped", "onPreviewStarted", "onPreviewStopped", "onShutter", "onOutputOrientationChanged", "onPreviewOrientationChanged", "onError", "onCodeScanned", "ref", "lastFrameProcessor", "state", "_reactInternals", "_reactInternalInstance"]
 (NOBRIDGE) LOG  🔍 Has takePhoto method: true
 (NOBRIDGE) LOG  🔍 Camera reference stored in persistent ref
 (NOBRIDGE) LOG  ✅ Camera reference set successfully: {"cameraRefType": "object", "hasCameraRef": true, "hasTakePhotoMethod": true, "persistentRefState": "valid"}
 (NOBRIDGE) LOG  Face registration successful for angle: 1 {"confidence": 1, "faceEncoding": "AADAfwAAwH8AAMB/AADAfwAAwH8AAMB/AADAfwAAwH8AAMB/AADAfwAAwH8AAMB/AADAfwAAwH8AAMB/AADAfwAAwH8AAMB/AADAfwAAwH/heiQ+mpm5PmZm1j7v7g4/8Fp/P51Xfz9Z5IS94nV/P/nzdj3HiH8/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAZmbWPu/uDj8AAEA/AADAfwAAwH8AAMB/AADAfwAAwH8AAAAAAAAAAAAAwH8AAMB/AADAfwAAwH8AAMB/AADAfwAAwH8AAMB/AADAfwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADcArY8AAAAAAAAAD+TDsm9+fN2PVnkhL0AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA", "isOffline": false, "livenessDetected": false, "success": true, "timestamp": 2025-09-09T16:36:24.271Z}
 (NOBRIDGE) LOG  ⏰ Starting countdown timer: 5
 (NOBRIDGE) LOG  Face detection state: {"faceData": true, "faceDetected": true, "faceQuality": true, "isDetecting": false, "verificationStep": "liveness"}
 (NOBRIDGE) LOG  🔍 === CAMERA isActive CALCULATION ===
 (NOBRIDGE) LOG  🔍 visible: false
 (NOBRIDGE) LOG  🔍 verificationStep: liveness
 (NOBRIDGE) LOG  🔍 isDetecting: false
 (NOBRIDGE) LOG  🔍 cameraKeepAlive: true
 (NOBRIDGE) LOG  🔍 Final isActive result: false
 (NOBRIDGE) LOG  🚀 Starting periodic face detection with ML Kit...
 (NOBRIDGE) LOG  🧪 Testing ML Kit detector before starting detection...
 (NOBRIDGE) LOG  ✅ ML Kit detector is ready and has detectFaces method
 (NOBRIDGE) LOG  📊 Setting isDetecting to true and starting interval...
 (NOBRIDGE) LOG  📊 Face detection state updated: {"faceData": false, "faceDetected": false, "faceQuality": undefined, "isDetecting": true, "verificationStep": "detecting"}
 (NOBRIDGE) LOG  ⏰ Starting detection interval...
 (NOBRIDGE) LOG  ✅ Face detection interval started successfully
 (NOBRIDGE) LOG  📊 Face detection state: {"faceData": false, "faceDetected": false, "faceQuality": undefined, "isDetecting": true, "verificationStep": "detecting"}
 (NOBRIDGE) LOG  ⚠️ Modal being hidden during active detection - preventing cleanup
 (NOBRIDGE) LOG  ⏰ Starting countdown timer: 5
 (NOBRIDGE) LOG  Modal hidden - stopping all detection processes
 (NOBRIDGE) LOG  🛑 stopDetection called: {"hasInterval": true, "hasTimeout": true, "isDetecting": false, "stack": "    at anonymous (http://192.168.0.110:8081/node_modules/expo-router/entry.bundle//&platform=android&dev=true&hot=false&transform.engine=hermes&transform.bytecode=1&transform.routerRoot=app&unstable_transformProfile=hermes-stable:392962:25)
    at anonymous (http://192.168.0.110:8081/node_modules/expo-router/entry.bundle//&platform=android&dev=true&hot=false&transform.engine=hermes&transform.bytecode=1&transform.routerRoot=app&unstable_transformProfile=hermes-stable:391334:22)
    at commitHookEffectListMount (http://192.168.0.110:8081/node_modules/expo-router/entry.bundle//&platform=android&dev=true&hot=false&transform.engine=hermes&transform.bytecode=1&transform.routerRoot=app&unstable_transformProfile=hermes-stable:31461:35)", "timestamp": "2025-09-09T16:36:26.628Z"}
 (NOBRIDGE) LOG  Detection interval cleared
 (NOBRIDGE) LOG  Detection timeout cleared
 (NOBRIDGE) LOG  🛑 Face detection stopped - isDetecting set to false
 (NOBRIDGE) LOG  👁️ Stopping liveness detection...
 (NOBRIDGE) LOG  👁️ Liveness detection stopped
 (NOBRIDGE) LOG  Modal hidden - resetting verification state (not successful)
 (NOBRIDGE) LOG  👁️ Face data effect triggered: {"faceDataTimestamp": 1757435776297, "hasFaceData": true, "isLivenessActive": false}
 (NOBRIDGE) LOG  👁️ Not processing face data: {"reason": "Liveness not active"}
 (NOBRIDGE) LOG  🔍 === CAMERA KEEP-ALIVE EFFECT TRIGGERED ===
 (NOBRIDGE) LOG  🔍 Verification step changed to: initializing
 (NOBRIDGE) LOG  🔍 Current camera keep-alive state: true
 (NOBRIDGE) LOG  🔍 Camera keep-alive effect completed
 (NOBRIDGE) LOG  Modal hidden - stopping all detection processes
 (NOBRIDGE) LOG  🛑 stopDetection called: {"hasInterval": false, "hasTimeout": false, "isDetecting": false, "stack": "    at anonymous (http://192.168.0.110:8081/node_modules/expo-router/entry.bundle//&platform=android&dev=true&hot=false&transform.engine=hermes&transform.bytecode=1&transform.routerRoot=app&unstable_transformProfile=hermes-stable:392962:25)
    at anonymous (http://192.168.0.110:8081/node_modules/expo-router/entry.bundle//&platform=android&dev=true&hot=false&transform.engine=hermes&transform.bytecode=1&transform.routerRoot=app&unstable_transformProfile=hermes-stable:391334:22)
    at commitHookEffectListMount (http://192.168.0.110:8081/node_modules/expo-router/entry.bundle//&platform=android&dev=true&hot=false&transform.engine=hermes&transform.bytecode=1&transform.routerRoot=app&unstable_transformProfile=hermes-stable:31461:35)", "timestamp": "2025-09-09T16:36:26.707Z"}
 (NOBRIDGE) LOG  🛑 Face detection stopped - isDetecting set to false
 (NOBRIDGE) LOG  👁️ Stopping liveness detection...
 (NOBRIDGE) LOG  👁️ Liveness detection stopped
 (NOBRIDGE) LOG  Modal hidden - resetting verification state (not successful)
 (NOBRIDGE) LOG  Face detection state: {"faceData": true, "faceDetected": true, "faceQuality": true, "isDetecting": false, "verificationStep": "initializing"}
 (NOBRIDGE) LOG  Modal visible - starting verification process
 (NOBRIDGE) LOG  🛡️ Detection active flag set - preventing modal cleanup
 (NOBRIDGE) LOG  🚀 Starting periodic face detection with ML Kit...
 (NOBRIDGE) LOG  🧪 Testing ML Kit detector before starting detection...
 (NOBRIDGE) LOG  ✅ ML Kit detector is ready and has detectFaces method
 (NOBRIDGE) LOG  📊 Setting isDetecting to true and starting interval...
 (NOBRIDGE) LOG  📊 Face detection state updated: {"faceData": false, "faceDetected": false, "faceQuality": undefined, "isDetecting": true, "verificationStep": "detecting"}
 (NOBRIDGE) LOG  ⏰ Starting detection interval...
 (NOBRIDGE) LOG  ✅ Face detection interval started successfully
 (NOBRIDGE) LOG  📊 Face detection state: {"faceData": false, "faceDetected": false, "faceQuality": undefined, "isDetecting": true, "verificationStep": "detecting"}
 (NOBRIDGE) LOG  🔍 === CAMERA isActive CALCULATION ===
 (NOBRIDGE) LOG  🔍 visible: true
 (NOBRIDGE) LOG  🔍 verificationStep: detecting
 (NOBRIDGE) LOG  🔍 isDetecting: true
 (NOBRIDGE) LOG  🔍 cameraKeepAlive: true
 (NOBRIDGE) LOG  🔍 Final isActive result: true
 (NOBRIDGE) LOG  🔍 Camera should be active - checking persistence state...
 (NOBRIDGE) LOG  🔍 === isDetecting STATE CHANGED ===
 (NOBRIDGE) LOG  🔍 New value: true
 (NOBRIDGE) LOG  🔍 Has interval: true
 (NOBRIDGE) LOG  🔍 Has timeout: true
 (NOBRIDGE) LOG  🔍 Camera keep-alive: true
 (NOBRIDGE) LOG  🔍 Timestamp: 2025-09-09T16:36:28.825Z
 (NOBRIDGE) LOG  🔍 === FACE DETECTION STATE CHANGED ===
 (NOBRIDGE) LOG  🔍 Face data: true
 (NOBRIDGE) LOG  🔍 Face detected: true
 (NOBRIDGE) LOG  🔍 Face quality: true
 (NOBRIDGE) LOG  🔍 Is detecting: true
 (NOBRIDGE) LOG  🔍 Has interval: true
 (NOBRIDGE) LOG  🔍 Camera keep-alive: true
 (NOBRIDGE) LOG  🔍 Timestamp: 2025-09-09T16:36:28.843Z
 (NOBRIDGE) LOG  🔍 === CAMERA KEEP-ALIVE EFFECT TRIGGERED ===
 (NOBRIDGE) LOG  🔍 Verification step changed to: detecting
 (NOBRIDGE) LOG  🔍 Current camera keep-alive state: true
 (NOBRIDGE) LOG  🔍 Camera keep-alive effect completed
 (NOBRIDGE) LOG  Face detection state: {"faceData": true, "faceDetected": true, "faceQuality": true, "isDetecting": true, "verificationStep": "detecting"}
 (NOBRIDGE) LOG  Moving to liveness detection step - good quality face detected
 (NOBRIDGE) LOG  🛑 stopDetection called: {"hasInterval": true, "hasTimeout": true, "isDetecting": false, "stack": "    at anonymous (http://192.168.0.110:8081/node_modules/expo-router/entry.bundle//&platform=android&dev=true&hot=false&transform.engine=hermes&transform.bytecode=1&transform.routerRoot=app&unstable_transformProfile=hermes-stable:392962:25)
    at anonymous (http://192.168.0.110:8081/node_modules/expo-router/entry.bundle//&platform=android&dev=true&hot=false&transform.engine=hermes&transform.bytecode=1&transform.routerRoot=app&unstable_transformProfile=hermes-stable:391220:24)
    at commitHookEffectListMount (http://192.168.0.110:8081/node_modules/expo-router/entry.bundle//&platform=android&dev=true&hot=false&transform.engine=hermes&transform.bytecode=1&transform.routerRoot=app&unstable_transformProfile=hermes-stable:31461:35)", "timestamp": "2025-09-09T16:36:28.863Z"}
 (NOBRIDGE) LOG  Detection interval cleared
 (NOBRIDGE) LOG  Detection timeout cleared
 (NOBRIDGE) LOG  🛑 Face detection stopped - isDetecting set to false
 (NOBRIDGE) LOG  🔍 === CAMERA isActive CALCULATION ===
 (NOBRIDGE) LOG  🔍 visible: true
 (NOBRIDGE) LOG  🔍 verificationStep: liveness
 (NOBRIDGE) LOG  🔍 isDetecting: false
 (NOBRIDGE) LOG  🔍 cameraKeepAlive: true
 (NOBRIDGE) LOG  🔍 Final isActive result: true
 (NOBRIDGE) LOG  🔍 Camera should be active - checking persistence state...
 (NOBRIDGE) LOG  Camera onInitialized called
 (NOBRIDGE) LOG  Camera started - ensuring detection is running
 (NOBRIDGE) LOG  🔍 === isDetecting STATE CHANGED ===
 (NOBRIDGE) LOG  🔍 New value: false
 (NOBRIDGE) LOG  🔍 Has interval: false
 (NOBRIDGE) LOG  🔍 Has timeout: false
 (NOBRIDGE) LOG  🔍 Camera keep-alive: true
 (NOBRIDGE) LOG  🔍 Timestamp: 2025-09-09T16:36:29.003Z
 (NOBRIDGE) LOG  🔍 === FACE DETECTION STATE CHANGED ===
 (NOBRIDGE) LOG  🔍 Face data: true
 (NOBRIDGE) LOG  🔍 Face detected: true
 (NOBRIDGE) LOG  🔍 Face quality: true
 (NOBRIDGE) LOG  🔍 Is detecting: false
 (NOBRIDGE) LOG  🔍 Has interval: false
 (NOBRIDGE) LOG  🔍 Camera keep-alive: true
 (NOBRIDGE) LOG  🔍 Timestamp: 2025-09-09T16:36:29.020Z
 (NOBRIDGE) LOG  🔍 === CAMERA KEEP-ALIVE EFFECT TRIGGERED ===
 (NOBRIDGE) LOG  🔍 Verification step changed to: liveness
 (NOBRIDGE) LOG  🔍 Current camera keep-alive state: true
 (NOBRIDGE) LOG  🔍 Camera keep-alive effect completed
 (NOBRIDGE) LOG  ⏰ Starting countdown timer: 5
 (NOBRIDGE) LOG  Face detection state: {"faceData": true, "faceDetected": true, "faceQuality": true, "isDetecting": false, "verificationStep": "liveness"}
 (NOBRIDGE) LOG  ⚠️ Liveness timeout but face detected - proceeding to capture (ultra-forgiving)
 (NOBRIDGE) LOG  🔒 Keeping camera active during transition to prevent native view detachment
 (NOBRIDGE) LOG  🔍 Stabilizing camera for final capture...
 (NOBRIDGE) LOG  🔍 === CAMERA isActive CALCULATION ===
 (NOBRIDGE) LOG  🔍 visible: true
 (NOBRIDGE) LOG  🔍 verificationStep: capturing
 (NOBRIDGE) LOG  🔍 isDetecting: false
 (NOBRIDGE) LOG  🔍 cameraKeepAlive: true
 (NOBRIDGE) LOG  🔍 Final isActive result: true
 (NOBRIDGE) LOG  🔍 Camera should be active - checking persistence state...
 (NOBRIDGE) LOG  👁️ Starting liveness detection...
 (NOBRIDGE) LOG  👁️ Liveness detection started successfully
 (NOBRIDGE) LOG  🔍 === CAMERA KEEP-ALIVE EFFECT TRIGGERED ===
 (NOBRIDGE) LOG  🔍 Verification step changed to: capturing
 (NOBRIDGE) LOG  🔍 Current camera keep-alive state: true
 (NOBRIDGE) LOG  🔍 Camera keep-alive effect completed
 (NOBRIDGE) LOG  Face detection state: {"faceData": true, "faceDetected": true, "faceQuality": true, "isDetecting": false, "verificationStep": "capturing"}
 (NOBRIDGE) LOG  🔍 === CAMERA isActive CALCULATION ===
 (NOBRIDGE) LOG  🔍 visible: true
 (NOBRIDGE) LOG  🔍 verificationStep: capturing
 (NOBRIDGE) LOG  🔍 isDetecting: false
 (NOBRIDGE) LOG  🔍 cameraKeepAlive: true
 (NOBRIDGE) LOG  🔍 Final isActive result: true
 (NOBRIDGE) LOG  🔍 Camera should be active - checking persistence state...
 (NOBRIDGE) LOG  Camera initialized - connecting reference to face detection hook
 (NOBRIDGE) LOG  🔍 === SETTING CAMERA REFERENCE ===
 (NOBRIDGE) LOG  🔍 Camera component exists: true
 (NOBRIDGE) LOG  🔍 Component type: object
 (NOBRIDGE) LOG  🔍 Has component: true
 (NOBRIDGE) LOG  🔍 Component methods: ["props", "context", "refs", "updater", "displayName", "isNativeViewMounted", "lastUIRotation", "rotationHelper", "onViewReady", "onAverageFpsChanged", "onInitialized", "onStarted", "onStopped", "onPreviewStarted", "onPreviewStopped", "onShutter", "onOutputOrientationChanged", "onPreviewOrientationChanged", "onError", "onCodeScanned", "ref", "lastFrameProcessor", "state", "_reactInternals", "_reactInternalInstance"]
 (NOBRIDGE) LOG  🔍 Has takePhoto method: true
 (NOBRIDGE) LOG  🔍 Camera reference stored in persistent ref
 (NOBRIDGE) LOG  ✅ Camera reference set successfully: {"cameraRefType": "object", "hasCameraRef": true, "hasTakePhotoMethod": true, "persistentRefState": "valid"}
 (NOBRIDGE) LOG  👁️ Face data effect triggered: {"faceDataTimestamp": 1757435776297, "hasFaceData": true, "isLivenessActive": true}
 (NOBRIDGE) LOG  👁️ Processing face data for liveness detection
 (NOBRIDGE) LOG  👁️ processFaceData called: {"faceDataDetails": {"leftEye": 0.9974813461303711, "rightEye": 0.9974306225776672, "timestamp": 1757435776297}, "hasFaceData": true, "isLivenessActive": true}
 (NOBRIDGE) LOG  👁️ Processing liveness data: {"average": "0.997", "eyeClosedThreshold": 0.98, "eyeOpenThreshold": 0.995, "historyLength": 1, "leftEye": "0.997", "rightEye": "0.997"}
 (NOBRIDGE) LOG  👁️ Analyzing blink pattern in history: {"historyLength": 1, "minRequired": 5}
 (NOBRIDGE) LOG  👁️ Liveness score calculation: {"blinkCount": 0, "blinkScore": 0, "historyLength": 1, "minRequired": 0.1, "movementScore": "0.000", "overallScore": "0.020", "timeScore": "0.100"}
 (NOBRIDGE) LOG  🔍 === CAMERA isActive CALCULATION ===
 (NOBRIDGE) LOG  🔍 visible: true
 (NOBRIDGE) LOG  🔍 verificationStep: capturing
 (NOBRIDGE) LOG  🔍 isDetecting: false
 (NOBRIDGE) LOG  🔍 cameraKeepAlive: true
 (NOBRIDGE) LOG  🔍 Final isActive result: true
 (NOBRIDGE) LOG  🔍 Camera should be active - checking persistence state...
 (NOBRIDGE) LOG  🔍 Proactively monitoring camera state...
 (NOBRIDGE) LOG  🔍 === CAMERA STATE MONITORING ===
 (NOBRIDGE) LOG  🔍 Camera ref exists: true
 (NOBRIDGE) LOG  🔍 Persistent ref exists: true
 (NOBRIDGE) LOG  🔍 Camera ref state: valid
 (NOBRIDGE) LOG  🔍 Camera state monitoring: {"hasTakePhoto": true, "isActive": true}
 (NOBRIDGE) LOG  ✅ Camera state is healthy - proceeding with capture
 (NOBRIDGE) LOG  🔍 === COMPREHENSIVE CAMERA STATE VALIDATION ===
 (NOBRIDGE) LOG  🔍 Camera ref exists: true
 (NOBRIDGE) LOG  🔍 Camera ref type: object
 (NOBRIDGE) LOG  🔍 Camera methods available: ["props", "context", "refs", "updater", "displayName", "isNativeViewMounted", "lastUIRotation", "rotationHelper", "onViewReady", "onAverageFpsChanged", "onInitialized", "onStarted", "onStopped", "onPreviewStarted", "onPreviewStopped", "onShutter", "onOutputOrientationChanged", "onPreviewOrientationChanged", "onError", "onCodeScanned", "ref", "lastFrameProcessor", "state", "_reactInternals", "_reactInternalInstance"]
 (NOBRIDGE) LOG  🔍 Has takePhoto method: true
 (NOBRIDGE) LOG  🔍 Camera props: {"audio": false, "device": {"formats": [[Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object]], "hardwareLevel": "full", "hasFlash": false, "hasTorch": false, "id": "1", "isMultiCam": false, "maxExposure": 24, "maxZoom": 10, "minExposure": -24, "minFocusDistance": 0, "minZoom": 1, "name": "1 (FRONT) androidx.camera.camera2", "neutralZoom": 1, "physicalDevices": ["wide-angle-camera"], "position": "front", "sensorOrientation": "landscape-right", "supportsFocus": true, "supportsLowLightBoost": false, "supportsRawCapture": false}, "frameProcessor": {"frameProcessor": [Function withFrameRefCountingTs1], "type": "readonly"}, "isActive": true, "onError": [Function onError], "onInitialized": [Function onInitialized], "onStarted": [Function onStarted], "photo": true, "style": {"height": "100%", "width": "100%"}, "video": false}
 (NOBRIDGE) LOG  🔍 Camera state: {"averageFpsSamples": [], "isRecordingWithFlash": false}
 (NOBRIDGE) LOG  🔍 Camera display name: Camera
 (NOBRIDGE) LOG  ✅ Camera validation passed - proceeding with capture
 (NOBRIDGE) LOG  Capturing photo with validated face...
 (NOBRIDGE) LOG  🔍 Validating camera state before final capture...
 (NOBRIDGE) LOG  ✅ Camera validation successful on attempt 1
 (NOBRIDGE) LOG  📸 Final camera state validation before photo capture...
 (NOBRIDGE) LOG  capturePhoto called with: {"cameraRefCurrent": {"_reactInternalInstance": {}, "_reactInternals": {"_debugHookTypes": null, "_debugInfo": null, "_debugNeedsRemount": false, "_debugOwner": [FiberNode], "actualDuration": 0.2970829904079437, "actualStartTime": 62193470.125731, "alternate": [FiberNode], "child": [FiberNode], "childLanes": 0, "deletions": null, "dependencies": null, "elementType": [Function Camera], "flags": 2097157, "index": 0, "key": "2", "lanes": 0, "memoizedProps": [Object], "memoizedState": [Object], "mode": 3, "pendingProps": [Object], "ref": [Object], "refCleanup": null, "return": [FiberNode], "selfBaseDuration": 0.2409369945526123, "sibling": [FiberNode], "stateNode": [Circular], "subtreeFlags": 2097152, "tag": 1, "treeBaseDuration": 0.25380099564790726, "type": [Function Camera], "updateQueue": [Object]}, "context": {}, "displayName": "Camera", "isNativeViewMounted": true, "lastFrameProcessor": [Function withFrameRefCountingTs1], "lastUIRotation": 0, "onAverageFpsChanged": [Function bound onAverageFpsChanged], "onCodeScanned": [Function bound onCodeScanned], "onError": [Function bound onError], "onInitialized": [Function bound onInitialized], "onOutputOrientationChanged": [Function bound onOutputOrientationChanged], "onPreviewOrientationChanged": [Function bound onPreviewOrientationChanged], "onPreviewStarted": [Function bound onPreviewStarted], "onPreviewStopped": [Function bound onPreviewStopped], "onShutter": [Function bound onShutter], "onStarted": [Function bound onStarted], "onStopped": [Function bound onStopped], "onViewReady": [Function bound onViewReady], "props": {"audio": false, "device": [Object], "frameProcessor": [Object], "isActive": true, "onError": [Function onError], "onInitialized": [Function onInitialized], "onStarted": [Function onStarted], "photo": true, "style": [Object], "video": false}, "ref": {"current": [ReactFabricHostComponent]}, "refs": {}, "rotationHelper": {"outputOrientation": "portrait", "previewOrientation": "portrait"}, "state": {"averageFpsSamples": [Array], "isRecordingWithFlash": false}, "updater": {"enqueueForceUpdate": [Function enqueueForceUpdate], "enqueueReplaceState": [Function enqueueReplaceState], "enqueueSetState": [Function enqueueSetState], "isMounted": [Function isMounted]}}, "hasCameraRef": true, "hasTakePhotoMethod": true, "isInitialized": true}
 (NOBRIDGE) LOG  Capturing photo with validated face...
 (NOBRIDGE) LOG  🔍 Validating camera state before final capture...
 (NOBRIDGE) LOG  ✅ Camera validation successful on attempt 1
 (NOBRIDGE) LOG  📸 Final camera state validation before photo capture...
 (NOBRIDGE) LOG  🔍 === GET CAMERA INSTANCE ===
 (NOBRIDGE) LOG  🔍 Main ref exists: true
 (NOBRIDGE) LOG  🔍 Persistent ref exists: true
 (NOBRIDGE) LOG  ✅ getCameraInstance: returning main ref camera instance
 (NOBRIDGE) LOG  ✅ Photo capture successful: {"height": 1200, "isMirrored": true, "isRawPhoto": false, "orientation": "portrait", "path": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy1866462665384719239.jpg", "width": 1600}
 (NOBRIDGE) LOG  ✅ Photo capture successful: {"height": 1200, "timestamp": 1757435791014, "uri": "file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy1866462665384719239.jpg", "width": 1600}
 (NOBRIDGE) LOG  🔍 === CAMERA KEEP-ALIVE EFFECT TRIGGERED ===
 (NOBRIDGE) LOG  🔍 Verification step changed to: processing
 (NOBRIDGE) LOG  🔍 Current camera keep-alive state: true
 (NOBRIDGE) LOG  🔍 Camera keep-alive effect completed
 (NOBRIDGE) LOG  Face detection state: {"faceData": true, "faceDetected": true, "faceQuality": true, "isDetecting": false, "verificationStep": "processing"}
 (NOBRIDGE) WARN  AES encryption failed, falling back to Expo crypto: [TypeError: 0, _reactNativeAesCrypto.encrypt is not a function (it is undefined)]
 (NOBRIDGE) WARN  Value being stored in SecureStore is larger than 2048 bytes and it may not be stored successfully. In a future SDK version, this call may throw an error.
 (NOBRIDGE) LOG  Face profile cached for user 22
 (NOBRIDGE) LOG  Face profile stored successfully for user: 22
 (NOBRIDGE) LOG  🛡️ Detection active flag reset - allowing cleanup
 (NOBRIDGE) LOG  🔍 === CAMERA KEEP-ALIVE EFFECT TRIGGERED ===
 (NOBRIDGE) LOG  🔍 Verification step changed to: success
 (NOBRIDGE) LOG  🔍 Current camera keep-alive state: true
 (NOBRIDGE) LOG  🔒 Keeping camera active for multi-angle registration...
 (NOBRIDGE) LOG  🔍 Camera keep-alive effect completed
 (NOBRIDGE) LOG  Face detection state: {"faceData": true, "faceDetected": true, "faceQuality": true, "isDetecting": false, "verificationStep": "success"}
 (NOBRIDGE) LOG  Modal visible - verification already completed successfully, not restarting
 (NOBRIDGE) LOG  Modal visible for multi-angle registration - resetting state for next angle
 (NOBRIDGE) LOG  🔄 Resetting modal state for next angle registration...
 (NOBRIDGE) LOG  ✅ Modal state reset complete for next angle
 (NOBRIDGE) LOG  🔍 === CAMERA KEEP-ALIVE EFFECT TRIGGERED ===
 (NOBRIDGE) LOG  🔍 Verification step changed to: initializing
 (NOBRIDGE) LOG  🔍 Current camera keep-alive state: true
 (NOBRIDGE) LOG  🔍 Camera keep-alive effect completed
 (NOBRIDGE) LOG  Face detection state: {"faceData": true, "faceDetected": true, "faceQuality": true, "isDetecting": false, "verificationStep": "initializing"}
 (NOBRIDGE) LOG  Modal visible - starting verification process
 (NOBRIDGE) LOG  🛡️ Detection active flag set - preventing modal cleanup
 (NOBRIDGE) LOG  🚀 Starting verification process for next angle...
 (NOBRIDGE) LOG  ⚠️ Camera reference not available - starting verification anyway...
 (NOBRIDGE) LOG  🛡️ Detection active flag set - preventing modal cleanup
 (NOBRIDGE) LOG  🚀 Starting periodic face detection with ML Kit...
 (NOBRIDGE) LOG  🧪 Testing ML Kit detector before starting detection...
 (NOBRIDGE) LOG  ✅ ML Kit detector is ready and has detectFaces method
 (NOBRIDGE) LOG  📊 Setting isDetecting to true and starting interval...
 (NOBRIDGE) LOG  📊 Face detection state updated: {"faceData": false, "faceDetected": false, "faceQuality": undefined, "isDetecting": true, "verificationStep": "detecting"}
 (NOBRIDGE) LOG  ⏰ Starting detection interval...
 (NOBRIDGE) LOG  ✅ Face detection interval started successfully
 (NOBRIDGE) LOG  📊 Face detection state: {"faceData": false, "faceDetected": false, "faceQuality": undefined, "isDetecting": true, "verificationStep": "detecting"}
 (NOBRIDGE) LOG  🔍 === CAMERA isActive CALCULATION ===
 (NOBRIDGE) LOG  🔍 visible: true
 (NOBRIDGE) LOG  🔍 verificationStep: detecting
 (NOBRIDGE) LOG  🔍 isDetecting: true
 (NOBRIDGE) LOG  🔍 cameraKeepAlive: true
 (NOBRIDGE) LOG  🔍 Final isActive result: true
 (NOBRIDGE) LOG  🔍 Camera should be active - checking persistence state...
 (NOBRIDGE) LOG  🔍 === isDetecting STATE CHANGED ===
 (NOBRIDGE) LOG  🔍 New value: true
 (NOBRIDGE) LOG  🔍 Has interval: true
 (NOBRIDGE) LOG  🔍 Has timeout: true
 (NOBRIDGE) LOG  🔍 Camera keep-alive: true
 (NOBRIDGE) LOG  🔍 Timestamp: 2025-09-09T16:36:32.749Z
 (NOBRIDGE) LOG  🔍 === FACE DETECTION STATE CHANGED ===
 (NOBRIDGE) LOG  🔍 Face data: true
 (NOBRIDGE) LOG  🔍 Face detected: true
 (NOBRIDGE) LOG  🔍 Face quality: true
 (NOBRIDGE) LOG  🔍 Is detecting: true
 (NOBRIDGE) LOG  🔍 Has interval: true
 (NOBRIDGE) LOG  🔍 Camera keep-alive: true
 (NOBRIDGE) LOG  🔍 Timestamp: 2025-09-09T16:36:32.766Z
 (NOBRIDGE) LOG  🔍 === CAMERA KEEP-ALIVE EFFECT TRIGGERED ===
 (NOBRIDGE) LOG  🔍 Verification step changed to: detecting
 (NOBRIDGE) LOG  🔍 Current camera keep-alive state: true
 (NOBRIDGE) LOG  🔍 Camera keep-alive effect completed
 (NOBRIDGE) LOG  Face detection state: {"faceData": true, "faceDetected": true, "faceQuality": true, "isDetecting": true, "verificationStep": "detecting"}
 (NOBRIDGE) LOG  Moving to liveness detection step - good quality face detected
 (NOBRIDGE) LOG  🛑 stopDetection called: {"hasInterval": true, "hasTimeout": true, "isDetecting": false, "stack": "    at anonymous (http://192.168.0.110:8081/node_modules/expo-router/entry.bundle//&platform=android&dev=true&hot=false&transform.engine=hermes&transform.bytecode=1&transform.routerRoot=app&unstable_transformProfile=hermes-stable:392962:25)
    at anonymous (http://192.168.0.110:8081/node_modules/expo-router/entry.bundle//&platform=android&dev=true&hot=false&transform.engine=hermes&transform.bytecode=1&transform.routerRoot=app&unstable_transformProfile=hermes-stable:391220:24)
    at commitHookEffectListMount (http://192.168.0.110:8081/node_modules/expo-router/entry.bundle//&platform=android&dev=true&hot=false&transform.engine=hermes&transform.bytecode=1&transform.routerRoot=app&unstable_transformProfile=hermes-stable:31461:35)", "timestamp": "2025-09-09T16:36:32.780Z"}
 (NOBRIDGE) LOG  Detection interval cleared
 (NOBRIDGE) LOG  Detection timeout cleared
 (NOBRIDGE) LOG  🛑 Face detection stopped - isDetecting set to false
 (NOBRIDGE) LOG  🔍 === CAMERA isActive CALCULATION ===
 (NOBRIDGE) LOG  🔍 visible: true
 (NOBRIDGE) LOG  🔍 verificationStep: liveness
 (NOBRIDGE) LOG  🔍 isDetecting: false
 (NOBRIDGE) LOG  🔍 cameraKeepAlive: true
 (NOBRIDGE) LOG  🔍 Final isActive result: true
 (NOBRIDGE) LOG  🔍 Camera should be active - checking persistence state...
 (NOBRIDGE) LOG  Camera onInitialized called
 (NOBRIDGE) LOG  Camera started - ensuring detection is running
 (NOBRIDGE) LOG  🔍 === isDetecting STATE CHANGED ===
 (NOBRIDGE) LOG  🔍 New value: false
 (NOBRIDGE) LOG  🔍 Has interval: false
 (NOBRIDGE) LOG  🔍 Has timeout: false
 (NOBRIDGE) LOG  🔍 Camera keep-alive: true
 (NOBRIDGE) LOG  🔍 Timestamp: 2025-09-09T16:36:32.899Z
 (NOBRIDGE) LOG  🔍 === FACE DETECTION STATE CHANGED ===
 (NOBRIDGE) LOG  🔍 Face data: true
 (NOBRIDGE) LOG  🔍 Face detected: true
 (NOBRIDGE) LOG  🔍 Face quality: true
 (NOBRIDGE) LOG  🔍 Is detecting: false
 (NOBRIDGE) LOG  🔍 Has interval: false
 (NOBRIDGE) LOG  🔍 Camera keep-alive: true
 (NOBRIDGE) LOG  🔍 Timestamp: 2025-09-09T16:36:32.916Z
 (NOBRIDGE) LOG  🔍 === CAMERA KEEP-ALIVE EFFECT TRIGGERED ===
 (NOBRIDGE) LOG  🔍 Verification step changed to: liveness
 (NOBRIDGE) LOG  🔍 Current camera keep-alive state: true
 (NOBRIDGE) LOG  🔍 Camera keep-alive effect completed
 (NOBRIDGE) LOG  ⏰ Starting countdown timer: 5
 (NOBRIDGE) LOG  Face detection state: {"faceData": true, "faceDetected": true, "faceQuality": true, "isDetecting": false, "verificationStep": "liveness"}
 (NOBRIDGE) LOG  👁️ Starting liveness detection...
 (NOBRIDGE) LOG  👁️ Liveness detection started successfully
 (NOBRIDGE) LOG  🔍 === CAMERA isActive CALCULATION ===
 (NOBRIDGE) LOG  🔍 visible: true
 (NOBRIDGE) LOG  🔍 verificationStep: liveness
 (NOBRIDGE) LOG  🔍 isDetecting: false
 (NOBRIDGE) LOG  🔍 cameraKeepAlive: true
 (NOBRIDGE) LOG  🔍 Final isActive result: true
 (NOBRIDGE) LOG  🔍 Camera should be active - checking persistence state...
 (NOBRIDGE) LOG  ⏰ Starting countdown timer: 5
 (NOBRIDGE) LOG  Camera initialized - connecting reference to face detection hook
 (NOBRIDGE) LOG  🔍 === SETTING CAMERA REFERENCE ===
 (NOBRIDGE) LOG  🔍 Camera component exists: true
 (NOBRIDGE) LOG  🔍 Component type: object
 (NOBRIDGE) LOG  🔍 Has component: true
 (NOBRIDGE) LOG  🔍 Component methods: ["props", "context", "refs", "updater", "displayName", "isNativeViewMounted", "lastUIRotation", "rotationHelper", "onViewReady", "onAverageFpsChanged", "onInitialized", "onStarted", "onStopped", "onPreviewStarted", "onPreviewStopped", "onShutter", "onOutputOrientationChanged", "onPreviewOrientationChanged", "onError", "onCodeScanned", "ref", "lastFrameProcessor", "state", "_reactInternals", "_reactInternalInstance"]
 (NOBRIDGE) LOG  🔍 Has takePhoto method: true
 (NOBRIDGE) LOG  🔍 Camera reference stored in persistent ref
 (NOBRIDGE) LOG  ✅ Camera reference set successfully: {"cameraRefType": "object", "hasCameraRef": true, "hasTakePhotoMethod": true, "persistentRefState": "valid"}
 (NOBRIDGE) LOG  Face registration successful for angle: 2 {"confidence": 1, "faceEncoding": "AADAfwAAwH8AAMB/AADAfwAAwH8AAMB/AADAfwAAwH8AAMB/AADAfwAAwH8AAMB/AADAfwAAwH8AAMB/AADAfwAAwH8AAMB/AADAfwAAwH/heiQ+mpm5PmZm1j7v7g4/8Fp/P51Xfz9Z5IS94nV/P/nzdj3HiH8/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAZmbWPu/uDj8AAEA/AADAfwAAwH8AAMB/AADAfwAAwH8AAAAAAAAAAAAAwH8AAMB/AADAfwAAwH8AAMB/AADAfwAAwH8AAMB/AADAfwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADcArY8AAAAAAAAAD+TDsm9+fN2PVnkhL0AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA", "isOffline": false, "livenessDetected": false, "success": true, "timestamp": 2025-09-09T16:36:31.336Z}
 (NOBRIDGE) LOG  🧹 === CLEANING UP FACE DETECTION ON UNMOUNT ===
 (NOBRIDGE) LOG  🧹 Cleaning up main camera ref
 (NOBRIDGE) LOG  🧹 Cleaning up persistent camera ref
 (NOBRIDGE) LOG  ✅ Face detection cleanup completed
 (NOBRIDGE) LOG  🛡️ Preventing cleanup during active detection
 (NOBRIDGE) ERROR  Error starting verification process: [Error: Failed to start face detection]
 (NOBRIDGE) LOG  ✅ User face_registered status updated successfully
 (NOBRIDGE) LOG  🔍 === isDetecting STATE CHANGED ===
 (NOBRIDGE) LOG  🔍 New value: false
 (NOBRIDGE) LOG  🔍 Has interval: false
 (NOBRIDGE) LOG  🔍 Has timeout: false
 (NOBRIDGE) LOG  🔍 Camera keep-alive: false
 (NOBRIDGE) LOG  🔍 Timestamp: 2025-09-09T16:36:34.046Z
 (NOBRIDGE) LOG  🔍 === FACE DETECTION STATE CHANGED ===
 (NOBRIDGE) LOG  🔍 Face data: false
 (NOBRIDGE) LOG  🔍 Face detected: false
 (NOBRIDGE) LOG  🔍 Face quality: false
 (NOBRIDGE) LOG  🔍 Is detecting: false
 (NOBRIDGE) LOG  🔍 Has interval: false
 (NOBRIDGE) LOG  🔍 Camera keep-alive: false
 (NOBRIDGE) LOG  🔍 Timestamp: 2025-09-09T16:36:34.062Z
 (NOBRIDGE) LOG  👁️ Face data effect triggered: {"faceDataTimestamp": undefined, "hasFaceData": false, "isLivenessActive": false}
 (NOBRIDGE) LOG  👁️ Not processing face data: {"reason": "No face data"}
 (NOBRIDGE) LOG  🔍 === CAMERA KEEP-ALIVE EFFECT TRIGGERED ===
 (NOBRIDGE) LOG  🔍 Verification step changed to: initializing
 (NOBRIDGE) LOG  🔍 Current camera keep-alive state: false
 (NOBRIDGE) LOG  🔍 Camera keep-alive effect completed
 (NOBRIDGE) LOG  Modal hidden - stopping all detection processes
 (NOBRIDGE) LOG  🛑 stopDetection called: {"hasInterval": false, "hasTimeout": false, "isDetecting": false, "stack": "    at anonymous (http://192.168.0.110:8081/node_modules/expo-router/entry.bundle//&platform=android&dev=true&hot=false&transform.engine=hermes&transform.bytecode=1&transform.routerRoot=app&unstable_transformProfile=hermes-stable:392962:25)
    at anonymous (http://192.168.0.110:8081/node_modules/expo-router/entry.bundle//&platform=android&dev=true&hot=false&transform.engine=hermes&transform.bytecode=1&transform.routerRoot=app&unstable_transformProfile=hermes-stable:391334:22)
    at commitHookEffectListMount (http://192.168.0.110:8081/node_modules/expo-router/entry.bundle//&platform=android&dev=true&hot=false&transform.engine=hermes&transform.bytecode=1&transform.routerRoot=app&unstable_transformProfile=hermes-stable:31461:35)", "timestamp": "2025-09-09T16:36:34.079Z"}
 (NOBRIDGE) LOG  🛑 Face detection stopped - isDetecting set to false
 (NOBRIDGE) LOG  👁️ Stopping liveness detection...
 (NOBRIDGE) LOG  👁️ Liveness detection stopped
 (NOBRIDGE) LOG  Modal hidden - resetting verification state (not successful)
 (NOBRIDGE) WARN  ⚠️ Failed to connect camera reference after timeout
 (NOBRIDGE) LOG  Face detection state: {"faceData": false, "faceDetected": false, "faceQuality": undefined, "isDetecting": false, "verificationStep": "initializing"}
 (NOBRIDGE) LOG  Modal visible - starting verification process
 (NOBRIDGE) LOG  🛡️ Detection active flag set - preventing modal cleanup
 (NOBRIDGE) LOG  Requesting camera permissions...
 (NOBRIDGE) LOG  App state changed: active -> background
 (NOBRIDGE) LOG  App went to background, keeping token refresh timer active
 (NOBRIDGE) LOG  Face detection app state changed: active -> background
 (NOBRIDGE) LOG  Liveness detection app state changed: active -> background
 (NOBRIDGE) LOG  App went to background, pausing liveness detection
 (NOBRIDGE) LOG  App state changed: background -> active
 (NOBRIDGE) LOG  App has come to the foreground!
 (NOBRIDGE) LOG  Face detection app state changed: background -> active
 (NOBRIDGE) LOG  Liveness detection app state changed: background -> active
 (NOBRIDGE) LOG  Initializing ML Kit Face Detection...
 (NOBRIDGE) LOG  ML Kit detector available, checking methods: ["status", "error", "options"]
 (NOBRIDGE) LOG  ML Kit Face Detection initialized successfully with config: {"classificationMode": true, "contourMode": true, "isTrackingEnabled": true, "landmarkMode": true, "minFaceSize": 0.1, "performanceMode": "fast"}
 (NOBRIDGE) LOG  Testing ML Kit detector...
 (NOBRIDGE) LOG  ML Kit detector test completed successfully
 (NOBRIDGE) LOG  Initializing camera with performance mode: fast
 (NOBRIDGE) LOG  🚀 Starting periodic face detection with ML Kit...
 (NOBRIDGE) LOG  🧪 Testing ML Kit detector before starting detection...
 (NOBRIDGE) LOG  ✅ ML Kit detector is ready and has detectFaces method
 (NOBRIDGE) LOG  📊 Setting isDetecting to true and starting interval...
 (NOBRIDGE) LOG  📊 Face detection state updated: {"faceData": false, "faceDetected": false, "faceQuality": undefined, "isDetecting": true, "verificationStep": "detecting"}
 (NOBRIDGE) LOG  ⏰ Starting detection interval...
 (NOBRIDGE) LOG  ✅ Face detection interval started successfully
 (NOBRIDGE) LOG  📊 Face detection state: {"faceData": false, "faceDetected": false, "faceQuality": undefined, "isDetecting": true, "verificationStep": "detecting"}
(NOBRIDGE) LOG  🔍 === CAMERA isActive CALCULATION ===
 (NOBRIDGE) LOG  🔍 visible: true
 (NOBRIDGE) LOG  🔍 verificationStep: detecting
 (NOBRIDGE) LOG  🔍 isDetecting: true
 (NOBRIDGE) LOG  🔍 cameraKeepAlive: false
 (NOBRIDGE) LOG  🔍 Final isActive result: true
 (NOBRIDGE) LOG  🔍 Camera should be active - checking persistence state...
 (NOBRIDGE) LOG  🔄 Detection interval triggered - calling processPeriodicFaceDetection...
 (NOBRIDGE) LOG  === MAIN FACE DETECTION PROCESS STARTED ===
 (NOBRIDGE) LOG  🔄 processPeriodicFaceDetection called: {"hasCamera": false, "hasMLKit": true, "isDetecting": false, "isMounted": true, "timestamp": "2025-09-09T16:36:44.524Z"}
 (NOBRIDGE) LOG  🔍 === GET CAMERA INSTANCE ===
 (NOBRIDGE) LOG  🔍 Main ref exists: false
 (NOBRIDGE) LOG  🔍 Persistent ref exists: false
 (NOBRIDGE) WARN  ❌ getCameraInstance: no camera available
 (NOBRIDGE) LOG  ❌ Skipping face detection - conditions not met: {"hasCamera": false, "hasMLKit": true, "isDetecting": false, "isMounted": true}
 (NOBRIDGE) LOG  🔍 Camera ref missing - detection will retry when camera is connected
 (NOBRIDGE) LOG  🔍 === isDetecting STATE CHANGED ===
 (NOBRIDGE) LOG  🔍 New value: true
 (NOBRIDGE) LOG  🔍 Has interval: true
 (NOBRIDGE) LOG  🔍 Has timeout: true
 (NOBRIDGE) LOG  🔍 Camera keep-alive: false
 (NOBRIDGE) LOG  🔍 Timestamp: 2025-09-09T16:36:44.548Z
 (NOBRIDGE) LOG  🔍 === FACE DETECTION STATE CHANGED ===
 (NOBRIDGE) LOG  🔍 Face data: false
 (NOBRIDGE) LOG  🔍 Face detected: false
 (NOBRIDGE) LOG  🔍 Face quality: false
 (NOBRIDGE) LOG  🔍 Is detecting: true
 (NOBRIDGE) LOG  🔍 Has interval: true
 (NOBRIDGE) LOG  🔍 Camera keep-alive: false
 (NOBRIDGE) LOG  🔍 Timestamp: 2025-09-09T16:36:44.567Z
 (NOBRIDGE) LOG  🔍 === CAMERA KEEP-ALIVE EFFECT TRIGGERED ===
 (NOBRIDGE) LOG  🔍 Verification step changed to: detecting
 (NOBRIDGE) LOG  🔍 Current camera keep-alive state: false
 (NOBRIDGE) LOG  🔍 Camera keep-alive effect completed
 (NOBRIDGE) LOG  Face detection state: {"faceData": false, "faceDetected": false, "faceQuality": undefined, "isDetecting": true, "verificationStep": "detecting"}
 (NOBRIDGE) LOG  Camera onInitialized called
 (NOBRIDGE) LOG  🔄 Detection interval triggered - calling processPeriodicFaceDetection...
 (NOBRIDGE) LOG  === MAIN FACE DETECTION PROCESS STARTED ===
 (NOBRIDGE) LOG  🔄 processPeriodicFaceDetection called: {"hasCamera": false, "hasMLKit": true, "isDetecting": false, "isMounted": true, "timestamp": "2025-09-09T16:36:44.591Z"}
 (NOBRIDGE) LOG  🔍 === GET CAMERA INSTANCE ===
 (NOBRIDGE) LOG  🔍 Main ref exists: false
 (NOBRIDGE) LOG  🔍 Persistent ref exists: false
 (NOBRIDGE) WARN  ❌ getCameraInstance: no camera available
 (NOBRIDGE) LOG  ❌ Skipping face detection - conditions not met: {"hasCamera": false, "hasMLKit": true, "isDetecting": false, "isMounted": true}
 (NOBRIDGE) LOG  🔍 Camera ref missing - detection will retry when camera is connected
 (NOBRIDGE) LOG  Camera started - ensuring detection is running
 (NOBRIDGE) LOG  Camera initialized - connecting reference to face detection hook
 (NOBRIDGE) LOG  🔍 === SETTING CAMERA REFERENCE ===
 (NOBRIDGE) LOG  🔍 Camera component exists: true
 (NOBRIDGE) LOG  🔍 Component type: object
 (NOBRIDGE) LOG  🔍 Has component: true
 (NOBRIDGE) LOG  🔍 Component methods: ["props", "context", "refs", "updater", "displayName", "isNativeViewMounted", "lastUIRotation", "rotationHelper", "onViewReady", "onAverageFpsChanged", "onInitialized", "onStarted", "onStopped", "onPreviewStarted", "onPreviewStopped", "onShutter", "onOutputOrientationChanged", "onPreviewOrientationChanged", "onError", "onCodeScanned", "ref", "lastFrameProcessor", "state", "_reactInternals", "_reactInternalInstance"]
 (NOBRIDGE) LOG  🔍 Has takePhoto method: true
 (NOBRIDGE) LOG  🔍 Camera reference stored in persistent ref
 (NOBRIDGE) LOG  ✅ Camera reference set successfully: {"cameraRefType": "object", "hasCameraRef": true, "hasTakePhotoMethod": true, "persistentRefState": "valid"}
 (NOBRIDGE) LOG  🔄 Camera connected during active detection - detection will now proceed
 (NOBRIDGE) LOG  🔄 Detection interval triggered - calling processPeriodicFaceDetection...
 (NOBRIDGE) LOG  === MAIN FACE DETECTION PROCESS STARTED ===
 (NOBRIDGE) LOG  🔄 processPeriodicFaceDetection called: {"hasCamera": true, "hasMLKit": true, "isDetecting": false, "isMounted": true, "timestamp": "2025-09-09T16:36:44.899Z"}
 (NOBRIDGE) LOG  🔍 === GET CAMERA INSTANCE ===
 (NOBRIDGE) LOG  🔍 Main ref exists: true
 (NOBRIDGE) LOG  🔍 Persistent ref exists: true
 (NOBRIDGE) LOG  ✅ getCameraInstance: returning main ref camera instance
 (NOBRIDGE) LOG  ✅ Starting periodic face detection with enhanced photo processing...
 (NOBRIDGE) LOG  ✅ Camera is active and ready for photo capture
 (NOBRIDGE) LOG  📸 Attempting to capture photo for face detection...
 (NOBRIDGE) LOG  🔍 Camera state before photo capture: {"cameraMethods": ["props", "context", "refs", "updater", "displayName", "isNativeViewMounted", "lastUIRotation", "rotationHelper", "onViewReady", "onAverageFpsChanged", "onInitialized", "onStarted", "onStopped", "onPreviewStarted", "onPreviewStopped", "onShutter", "onOutputOrientationChanged", "onPreviewOrientationChanged", "onError", "onCodeScanned", "ref", "lastFrameProcessor", "state", "_reactInternals", "_reactInternalInstance"], "cameraRefExists": true, "hasTakePhoto": true, "isActive": true}
 (NOBRIDGE) LOG  ⚙️ Optimizing camera settings for ML Kit...
 (NOBRIDGE) LOG  🔄 Detection interval triggered - calling processPeriodicFaceDetection...
 (NOBRIDGE) LOG  === MAIN FACE DETECTION PROCESS STARTED ===
 (NOBRIDGE) LOG  🔄 processPeriodicFaceDetection called: {"hasCamera": true, "hasMLKit": true, "isDetecting": false, "isMounted": true, "timestamp": "2025-09-09T16:36:45.216Z"}
 (NOBRIDGE) LOG  🔍 === GET CAMERA INSTANCE ===
 (NOBRIDGE) LOG  🔍 Main ref exists: true
 (NOBRIDGE) LOG  🔍 Persistent ref exists: true
 (NOBRIDGE) LOG  ✅ getCameraInstance: returning main ref camera instance
 (NOBRIDGE) LOG  ✅ Starting periodic face detection with enhanced photo processing...
 (NOBRIDGE) LOG  ✅ Camera is active and ready for photo capture
 (NOBRIDGE) LOG  📸 Attempting to capture photo for face detection...
 (NOBRIDGE) LOG  🔍 Camera state before photo capture: {"cameraMethods": ["props", "context", "refs", "updater", "displayName", "isNativeViewMounted", "lastUIRotation", "rotationHelper", "onViewReady", "onAverageFpsChanged", "onInitialized", "onStarted", "onStopped", "onPreviewStarted", "onPreviewStopped", "onShutter", "onOutputOrientationChanged", "onPreviewOrientationChanged", "onError", "onCodeScanned", "ref", "lastFrameProcessor", "state", "_reactInternals", "_reactInternalInstance"], "cameraRefExists": true, "hasTakePhoto": true, "isActive": true}
 (NOBRIDGE) LOG  ⚙️ Optimizing camera settings for ML Kit...
 (NOBRIDGE) LOG  🔄 Detection interval triggered - calling processPeriodicFaceDetection...
 (NOBRIDGE) LOG  === MAIN FACE DETECTION PROCESS STARTED ===
 (NOBRIDGE) LOG  🔄 processPeriodicFaceDetection called: {"hasCamera": true, "hasMLKit": true, "isDetecting": false, "isMounted": true, "timestamp": "2025-09-09T16:36:45.533Z"}
 (NOBRIDGE) LOG  🔍 === GET CAMERA INSTANCE ===
 (NOBRIDGE) LOG  🔍 Main ref exists: true
 (NOBRIDGE) LOG  🔍 Persistent ref exists: true
 (NOBRIDGE) LOG  ✅ getCameraInstance: returning main ref camera instance
 (NOBRIDGE) LOG  ✅ Starting periodic face detection with enhanced photo processing...
 (NOBRIDGE) LOG  ✅ Camera is active and ready for photo capture
 (NOBRIDGE) LOG  ✅ Photo captured successfully: {"height": 1200, "path": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy5013644073381371401.jpg", "width": 1600}
 (NOBRIDGE) LOG  📁 Photo URI generated: file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy5013644073381371401.jpg
 (NOBRIDGE) LOG  Processing photo for ML Kit compatibility...
 (NOBRIDGE) LOG  Waiting for photo file to be fully written...
 (NOBRIDGE) LOG  📸 Attempting to capture photo for face detection...
 (NOBRIDGE) LOG  🔍 Camera state before photo capture: {"cameraMethods": ["props", "context", "refs", "updater", "displayName", "isNativeViewMounted", "lastUIRotation", "rotationHelper", "onViewReady", "onAverageFpsChanged", "onInitialized", "onStarted", "onStopped", "onPreviewStarted", "onPreviewStopped", "onShutter", "onOutputOrientationChanged", "onPreviewOrientationChanged", "onError", "onCodeScanned", "ref", "lastFrameProcessor", "state", "_reactInternals", "_reactInternalInstance"], "cameraRefExists": true, "hasTakePhoto": true, "isActive": true}
 (NOBRIDGE) LOG  ⚙️ Optimizing camera settings for ML Kit...
 (NOBRIDGE) LOG  ✅ Photo captured successfully: {"height": 1200, "path": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy336907856318502820.jpg", "width": 1600}
 (NOBRIDGE) LOG  📁 Photo URI generated: file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy336907856318502820.jpg
 (NOBRIDGE) LOG  Processing photo for ML Kit compatibility...
 (NOBRIDGE) LOG  Waiting for photo file to be fully written...
 (NOBRIDGE) LOG  🔄 Detection interval triggered - calling processPeriodicFaceDetection...
 (NOBRIDGE) LOG  === MAIN FACE DETECTION PROCESS STARTED ===
 (NOBRIDGE) LOG  🔄 processPeriodicFaceDetection called: {"hasCamera": true, "hasMLKit": true, "isDetecting": false, "isMounted": true, "timestamp": "2025-09-09T16:36:45.849Z"}
 (NOBRIDGE) LOG  🔍 === GET CAMERA INSTANCE ===
 (NOBRIDGE) LOG  🔍 Main ref exists: true
 (NOBRIDGE) LOG  🔍 Persistent ref exists: true
 (NOBRIDGE) LOG  ✅ getCameraInstance: returning main ref camera instance
 (NOBRIDGE) LOG  ✅ Starting periodic face detection with enhanced photo processing...
 (NOBRIDGE) LOG  ✅ Camera is active and ready for photo capture
 (NOBRIDGE) LOG  📸 Attempting to capture photo for face detection...
 (NOBRIDGE) LOG  🔍 Camera state before photo capture: {"cameraMethods": ["props", "context", "refs", "updater", "displayName", "isNativeViewMounted", "lastUIRotation", "rotationHelper", "onViewReady", "onAverageFpsChanged", "onInitialized", "onStarted", "onStopped", "onPreviewStarted", "onPreviewStopped", "onShutter", "onOutputOrientationChanged", "onPreviewOrientationChanged", "onError", "onCodeScanned", "ref", "lastFrameProcessor", "state", "_reactInternals", "_reactInternalInstance"], "cameraRefExists": true, "hasTakePhoto": true, "isActive": true}
 (NOBRIDGE) LOG  ⚙️ Optimizing camera settings for ML Kit...
 (NOBRIDGE) LOG  ✅ Photo captured successfully: {"height": 1200, "path": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy3250564694241199087.jpg", "width": 1600}
 (NOBRIDGE) LOG  📁 Photo URI generated: file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy3250564694241199087.jpg
 (NOBRIDGE) LOG  Processing photo for ML Kit compatibility...
 (NOBRIDGE) LOG  Waiting for photo file to be fully written...
 (NOBRIDGE) LOG  Photo file verification: {"exists": true, "fileSize": 419598, "path": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy5013644073381371401.jpg"}
 (NOBRIDGE) LOG  Photo file verified successfully: {"path": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy5013644073381371401.jpg", "size": 419598, "uri": "file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy5013644073381371401.jpg"}
 (NOBRIDGE) LOG  Applying ML Kit photo processing...
 (NOBRIDGE) LOG  🔄 Detection interval triggered - calling processPeriodicFaceDetection...
 (NOBRIDGE) LOG  === MAIN FACE DETECTION PROCESS STARTED ===
 (NOBRIDGE) LOG  🔄 processPeriodicFaceDetection called: {"hasCamera": true, "hasMLKit": true, "isDetecting": false, "isMounted": true, "timestamp": "2025-09-09T16:36:46.170Z"}
 (NOBRIDGE) LOG  🔍 === GET CAMERA INSTANCE ===
 (NOBRIDGE) LOG  🔍 Main ref exists: true
 (NOBRIDGE) LOG  🔍 Persistent ref exists: true
 (NOBRIDGE) LOG  ✅ getCameraInstance: returning main ref camera instance
 (NOBRIDGE) LOG  ✅ Starting periodic face detection with enhanced photo processing...
 (NOBRIDGE) LOG  ✅ Camera is active and ready for photo capture
 (NOBRIDGE) LOG  Photo file read successfully, content length: 559464
 (NOBRIDGE) LOG  ✅ Photo has valid image format header
 (NOBRIDGE) LOG  Additional delay for file system sync...
 (NOBRIDGE) LOG  Photo file verification: {"exists": true, "fileSize": 433701, "path": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy336907856318502820.jpg"}
 (NOBRIDGE) LOG  Photo file verified successfully: {"path": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy336907856318502820.jpg", "size": 433701, "uri": "file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy336907856318502820.jpg"}
 (NOBRIDGE) LOG  Applying ML Kit photo processing...
 (NOBRIDGE) LOG  Photo file read successfully, content length: 578268
 (NOBRIDGE) LOG  ✅ Photo has valid image format header
 (NOBRIDGE) LOG  Additional delay for file system sync...
 (NOBRIDGE) LOG  📸 Attempting to capture photo for face detection...
 (NOBRIDGE) LOG  🔍 Camera state before photo capture: {"cameraMethods": ["props", "context", "refs", "updater", "displayName", "isNativeViewMounted", "lastUIRotation", "rotationHelper", "onViewReady", "onAverageFpsChanged", "onInitialized", "onStarted", "onStopped", "onPreviewStarted", "onPreviewStopped", "onShutter", "onOutputOrientationChanged", "onPreviewOrientationChanged", "onError", "onCodeScanned", "ref", "lastFrameProcessor", "state", "_reactInternals", "_reactInternalInstance"], "cameraRefExists": true, "hasTakePhoto": true, "isActive": true}
 (NOBRIDGE) LOG  ⚙️ Optimizing camera settings for ML Kit...
 (NOBRIDGE) LOG  🔄 Detection interval triggered - calling processPeriodicFaceDetection...
 (NOBRIDGE) LOG  === MAIN FACE DETECTION PROCESS STARTED ===
 (NOBRIDGE) LOG  🔄 processPeriodicFaceDetection called: {"hasCamera": true, "hasMLKit": true, "isDetecting": false, "isMounted": true, "timestamp": "2025-09-09T16:36:46.483Z"}
 (NOBRIDGE) LOG  🔍 === GET CAMERA INSTANCE ===
 (NOBRIDGE) LOG  🔍 Main ref exists: true
 (NOBRIDGE) LOG  🔍 Persistent ref exists: true
 (NOBRIDGE) LOG  ✅ getCameraInstance: returning main ref camera instance
 (NOBRIDGE) LOG  ✅ Starting periodic face detection with enhanced photo processing...
 (NOBRIDGE) LOG  ✅ Camera is active and ready for photo capture
 (NOBRIDGE) LOG  🤖 Sending photo to ML Kit for face detection...
 (NOBRIDGE) LOG  🔍 ML Kit detector state before detection: {"availableMethods": ["status", "error", "options"], "detectorType": "object", "isInitialized": true, "photoPath": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy5013644073381371401.jpg", "photoUri": "file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy5013644073381371401.jpg"}
 (NOBRIDGE) LOG  ✅ Photo captured successfully: {"height": 1200, "path": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy7181634791366647918.jpg", "width": 1600}
 (NOBRIDGE) LOG  📁 Photo URI generated: file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy7181634791366647918.jpg
 (NOBRIDGE) LOG  Processing photo for ML Kit compatibility...
 (NOBRIDGE) LOG  Waiting for photo file to be fully written...
 (NOBRIDGE) LOG  Photo file verification: {"exists": true, "fileSize": 438184, "path": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy3250564694241199087.jpg"}
 (NOBRIDGE) LOG  Photo file verified successfully: {"path": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy3250564694241199087.jpg", "size": 438184, "uri": "file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy3250564694241199087.jpg"}
 (NOBRIDGE) LOG  Applying ML Kit photo processing...
 (NOBRIDGE) LOG  Photo file read successfully, content length: 584248
 (NOBRIDGE) LOG  ✅ Photo has valid image format header
 (NOBRIDGE) LOG  Additional delay for file system sync...
 (NOBRIDGE) LOG  🤖 Sending photo to ML Kit for face detection...
 (NOBRIDGE) LOG  🔍 ML Kit detector state before detection: {"availableMethods": ["status", "error", "options"], "detectorType": "object", "isInitialized": true, "photoPath": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy336907856318502820.jpg", "photoUri": "file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy336907856318502820.jpg"}
 (NOBRIDGE) LOG  📸 Attempting to capture photo for face detection...
 (NOBRIDGE) LOG  🔍 Camera state before photo capture: {"cameraMethods": ["props", "context", "refs", "updater", "displayName", "isNativeViewMounted", "lastUIRotation", "rotationHelper", "onViewReady", "onAverageFpsChanged", "onInitialized", "onStarted", "onStopped", "onPreviewStarted", "onPreviewStopped", "onShutter", "onOutputOrientationChanged", "onPreviewOrientationChanged", "onError", "onCodeScanned", "ref", "lastFrameProcessor", "state", "_reactInternals", "_reactInternalInstance"], "cameraRefExists": true, "hasTakePhoto": true, "isActive": true}
 (NOBRIDGE) LOG  ⚙️ Optimizing camera settings for ML Kit...
 (NOBRIDGE) LOG  ✅ ML Kit detection completed successfully: {"faceCount": 1, "faces": [{"contours": [Array], "frame": [Object], "headEulerAngleX": -7.078841209411621, "headEulerAngleY": -2.1531803607940674, "headEulerAngleZ": -3.1778006553649902, "landmarks": [Array], "leftEyeOpenProbability": 0.9970390796661377, "rightEyeOpenProbability": 0.998600959777832, "smilingProbability": 0.025413721799850464, "trackingID": 0}], "rawResult": {"faces": [[Object]], "imagePath": "file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy5013644073381371401.jpg"}, "success": true}
 (NOBRIDGE) LOG  🎉 SUCCESS: Face detection completed with 1 face(s)
 (NOBRIDGE) LOG  🎯 Processing detected faces...
 (NOBRIDGE) LOG  👤 Detected face details: {"headAngles": {"x": -7.078841209411621, "y": -2.1531803607940674, "z": -3.1778006553649902}, "leftEyeOpen": 0.9970390796661377, "rightEyeOpen": 0.998600959777832, "smiling": 0.025413721799850464, "trackingID": 0}
 (NOBRIDGE) LOG  🔄 Converted face data: {"attributes": {"age": undefined, "emotions": {"angry": 0, "happy": 0.025413721799850464, "neutral": 0.9745862782001495, "sad": 0, "surprised": 0}, "gender": undefined, "headEulerAngles": {"x": -7.078841209411621, "y": -2.1531803607940674, "z": -3.1778006553649902}, "smiling": 0.025413721799850464}, "bounds": {"height": 668, "width": 668, "x": 248, "y": 447}, "contours": [], "faceId": "0", "landmarks": [{"position": [Object], "type": "0"}, {"position": [Object], "type": "1"}, {"position": [Object], "type": "3"}, {"position": [Object], "type": "4"}, {"position": [Object], "type": "5"}, {"position": [Object], "type": "6"}, {"position": [Object], "type": "7"}, {"position": [Object], "type": "9"}, {"position": [Object], "type": "10"}, {"position": [Object], "type": "11"}], "leftEyeOpenProbability": 0.9970390796661377, "rightEyeOpenProbability": 0.998600959777832, "rollAngle": -3.1778006553649902, "timestamp": 1757435806806, "trackingId": "0", "yawAngle": -2.1531803607940674}
 (NOBRIDGE) LOG  Face quality calculation: {"bounds": {"height": 668, "width": 668, "x": 248, "y": 447}, "faceArea": 446224, "faceRatio": 0.23240833333333333, "maxFaceSize": 0.6, "minFaceSize": 0.05, "screenArea": 1920000}
 (NOBRIDGE) LOG  Quality scores: {"angleQuality": 0.9470366557439168, "lightingQuality": 1, "overall": 0.9192943300565084, "sizeQuality": 0.8379583333333334, "threshold": 0.4}
 (NOBRIDGE) LOG  ✅ Face detection state updated successfully
 (NOBRIDGE) LOG  📊 Face quality score: 0.9192943300565084
 (NOBRIDGE) LOG  🔄 Detection interval cleared - face found
 (NOBRIDGE) LOG  ⏰ Detection timeout cleared - face found
 (NOBRIDGE) LOG  🎉 Face detection completed successfully - stopping all timers
 (NOBRIDGE) LOG  ⏱️ Face detection process completed in 1919.58ms
 (NOBRIDGE) LOG  === MAIN FACE DETECTION PROCESS COMPLETED ===
 (NOBRIDGE) LOG  🔍 === CAMERA isActive CALCULATION ===
 (NOBRIDGE) LOG  🔍 visible: true
 (NOBRIDGE) LOG  🔍 verificationStep: detecting
 (NOBRIDGE) LOG  🔍 isDetecting: false
 (NOBRIDGE) LOG  🔍 cameraKeepAlive: false
 (NOBRIDGE) LOG  🔍 Final isActive result: true
 (NOBRIDGE) LOG  🔍 Camera should be active - checking persistence state...
 (NOBRIDGE) LOG  ✅ Photo captured successfully: {"height": 1200, "path": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy8994563060486327392.jpg", "width": 1600}
 (NOBRIDGE) LOG  📁 Photo URI generated: file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy8994563060486327392.jpg
 (NOBRIDGE) LOG  Processing photo for ML Kit compatibility...
 (NOBRIDGE) LOG  Waiting for photo file to be fully written...
 (NOBRIDGE) LOG  🔍 === isDetecting STATE CHANGED ===
 (NOBRIDGE) LOG  🔍 New value: false
 (NOBRIDGE) LOG  🔍 Has interval: false
 (NOBRIDGE) LOG  🔍 Has timeout: false
 (NOBRIDGE) LOG  🔍 Camera keep-alive: false
 (NOBRIDGE) LOG  🔍 Timestamp: 2025-09-09T16:36:46.902Z
 (NOBRIDGE) LOG  🔍 === FACE DETECTION STATE CHANGED ===
 (NOBRIDGE) LOG  🔍 Face data: true
 (NOBRIDGE) LOG  🔍 Face detected: true
 (NOBRIDGE) LOG  🔍 Face quality: true
 (NOBRIDGE) LOG  🔍 Is detecting: false
 (NOBRIDGE) LOG  🔍 Has interval: false
 (NOBRIDGE) LOG  🔍 Camera keep-alive: false
 (NOBRIDGE) LOG  🔍 Timestamp: 2025-09-09T16:36:46.918Z
 (NOBRIDGE) LOG  👁️ Face data effect triggered: {"faceDataTimestamp": 1757435806806, "hasFaceData": true, "isLivenessActive": false}
 (NOBRIDGE) LOG  👁️ Not processing face data: {"reason": "Liveness not active"}
 (NOBRIDGE) LOG  Face detection state: {"faceData": true, "faceDetected": true, "faceQuality": true, "isDetecting": false, "verificationStep": "detecting"}
 (NOBRIDGE) LOG  Moving to liveness detection step - good quality face detected
 (NOBRIDGE) LOG  🛑 stopDetection called: {"hasInterval": false, "hasTimeout": false, "isDetecting": false, "stack": "    at anonymous (http://192.168.0.110:8081/node_modules/expo-router/entry.bundle//&platform=android&dev=true&hot=false&transform.engine=hermes&transform.bytecode=1&transform.routerRoot=app&unstable_transformProfile=hermes-stable:392962:25)
    at anonymous (http://192.168.0.110:8081/node_modules/expo-router/entry.bundle//&platform=android&dev=true&hot=false&transform.engine=hermes&transform.bytecode=1&transform.routerRoot=app&unstable_transformProfile=hermes-stable:391220:24)
    at commitHookEffectListMount (http://192.168.0.110:8081/node_modules/expo-router/entry.bundle//&platform=android&dev=true&hot=false&transform.engine=hermes&transform.bytecode=1&transform.routerRoot=app&unstable_transformProfile=hermes-stable:31461:35)", "timestamp": "2025-09-09T16:36:46.930Z"}
 (NOBRIDGE) LOG  🛑 Face detection stopped - isDetecting set to false
 (NOBRIDGE) LOG  🔍 === CAMERA isActive CALCULATION ===
 (NOBRIDGE) LOG  🔍 visible: true
 (NOBRIDGE) LOG  🔍 verificationStep: liveness
 (NOBRIDGE) LOG  🔍 isDetecting: false
 (NOBRIDGE) LOG  🔍 cameraKeepAlive: false
 (NOBRIDGE) LOG  🔍 Final isActive result: true
 (NOBRIDGE) LOG  🔍 Camera should be active - checking persistence state...
 (NOBRIDGE) LOG  🤖 Sending photo to ML Kit for face detection...
 (NOBRIDGE) LOG  🔍 ML Kit detector state before detection: {"availableMethods": ["status", "error", "options"], "detectorType": "object", "isInitialized": true, "photoPath": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy3250564694241199087.jpg", "photoUri": "file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy3250564694241199087.jpg"}
 (NOBRIDGE) LOG  ✅ ML Kit detection completed successfully: {"faceCount": 1, "faces": [{"contours": [Array], "frame": [Object], "headEulerAngleX": -6.872195243835449, "headEulerAngleY": -1.765267252922058, "headEulerAngleZ": -3.321676015853882, "landmarks": [Array], "leftEyeOpenProbability": 0.9965924024581909, "rightEyeOpenProbability": 0.998312771320343, "smilingProbability": 0.026149364188313484, "trackingID": 0}], "rawResult": {"faces": [[Object]], "imagePath": "file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy336907856318502820.jpg"}, "success": true}
 (NOBRIDGE) LOG  🎉 SUCCESS: Face detection completed with 1 face(s)
 (NOBRIDGE) LOG  🎯 Processing detected faces...
 (NOBRIDGE) LOG  👤 Detected face details: {"headAngles": {"x": -6.872195243835449, "y": -1.765267252922058, "z": -3.321676015853882}, "leftEyeOpen": 0.9965924024581909, "rightEyeOpen": 0.998312771320343, "smiling": 0.026149364188313484, "trackingID": 0}
 (NOBRIDGE) LOG  🔄 Converted face data: {"attributes": {"age": undefined, "emotions": {"angry": 0, "happy": 0.026149364188313484, "neutral": 0.9738506358116865, "sad": 0, "surprised": 0}, "gender": undefined, "headEulerAngles": {"x": -6.872195243835449, "y": -1.765267252922058, "z": -3.321676015853882}, "smiling": 0.026149364188313484}, "bounds": {"height": 661, "width": 661, "x": 264, "y": 455}, "contours": [], "faceId": "0", "landmarks": [{"position": [Object], "type": "0"}, {"position": [Object], "type": "1"}, {"position": [Object], "type": "3"}, {"position": [Object], "type": "4"}, {"position": [Object], "type": "5"}, {"position": [Object], "type": "6"}, {"position": [Object], "type": "7"}, {"position": [Object], "type": "9"}, {"position": [Object], "type": "10"}, {"position": [Object], "type": "11"}], "leftEyeOpenProbability": 0.9965924024581909, "rightEyeOpenProbability": 0.998312771320343, "rollAngle": -3.321676015853882, "timestamp": 1757435807031, "trackingId": "0", "yawAngle": -1.765267252922058}
 (NOBRIDGE) LOG  Face quality calculation: {"bounds": {"height": 661, "width": 661, "x": 264, "y": 455}, "faceArea": 436921, "faceRatio": 0.22756302083333332, "maxFaceSize": 0.6, "minFaceSize": 0.05, "screenArea": 1920000}
 (NOBRIDGE) LOG  Quality scores: {"angleQuality": 0.944638733069102, "lightingQuality": 1, "overall": 0.928265578254064, "sizeQuality": 0.8621848958333335, "threshold": 0.4}
 (NOBRIDGE) LOG  ✅ Face detection state updated successfully
 (NOBRIDGE) LOG  📊 Face quality score: 0.928265578254064
 (NOBRIDGE) LOG  🎉 Face detection completed successfully - stopping all timers
 (NOBRIDGE) LOG  ⏱️ Face detection process completed in 1817.42ms
 (NOBRIDGE) LOG  === MAIN FACE DETECTION PROCESS COMPLETED ===
 (NOBRIDGE) LOG  🔍 === CAMERA KEEP-ALIVE EFFECT TRIGGERED ===
 (NOBRIDGE) LOG  🔍 Verification step changed to: liveness
 (NOBRIDGE) LOG  🔍 Current camera keep-alive state: false
 (NOBRIDGE) LOG  🔒 Enabling camera keep-alive to prevent native view detachment
 (NOBRIDGE) LOG  🔒 === ENABLING CAMERA KEEP-ALIVE ===
 (NOBRIDGE) LOG  🔒 Previous state: false
 (NOBRIDGE) LOG  🔒 New state: true
 (NOBRIDGE) LOG  🔄 Critical transition detected - stabilizing camera component
 (NOBRIDGE) LOG  🔒 Monitoring camera persistence during liveness/capturing...
 (NOBRIDGE) LOG  🔍 Camera keep-alive effect completed
 (NOBRIDGE) LOG  ⏰ Starting countdown timer: 5
 (NOBRIDGE) LOG  Face detection state: {"faceData": true, "faceDetected": true, "faceQuality": true, "isDetecting": false, "verificationStep": "liveness"}
 (NOBRIDGE) LOG  ⚠️ Liveness timeout but face detected - proceeding to capture (ultra-forgiving)
 (NOBRIDGE) LOG  🔒 Keeping camera active during transition to prevent native view detachment
 (NOBRIDGE) LOG  🔍 Stabilizing camera for final capture...
 (NOBRIDGE) LOG  🔍 === CAMERA isActive CALCULATION ===
 (NOBRIDGE) LOG  🔍 visible: true
 (NOBRIDGE) LOG  🔍 verificationStep: capturing
 (NOBRIDGE) LOG  🔍 isDetecting: false
 (NOBRIDGE) LOG  🔍 cameraKeepAlive: true
 (NOBRIDGE) LOG  🔍 Final isActive result: true
 (NOBRIDGE) LOG  🔍 Camera should be active - checking persistence state...
 (NOBRIDGE) LOG  Photo file verification: {"exists": true, "fileSize": 441911, "path": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy7181634791366647918.jpg"}
 (NOBRIDGE) LOG  🔍 === FACE DETECTION STATE CHANGED ===
 (NOBRIDGE) LOG  🔍 Face data: true
 (NOBRIDGE) LOG  🔍 Face detected: true
 (NOBRIDGE) LOG  🔍 Face quality: true
 (NOBRIDGE) LOG  🔍 Is detecting: false
 (NOBRIDGE) LOG  🔍 Has interval: false
 (NOBRIDGE) LOG  🔍 Camera keep-alive: true
 (NOBRIDGE) LOG  🔍 Timestamp: 2025-09-09T16:36:47.238Z
 (NOBRIDGE) LOG  👁️ Face data effect triggered: {"faceDataTimestamp": 1757435807031, "hasFaceData": true, "isLivenessActive": false}
 (NOBRIDGE) LOG  👁️ Not processing face data: {"reason": "Liveness not active"}
 (NOBRIDGE) LOG  🔍 === CAMERA KEEP-ALIVE EFFECT TRIGGERED ===
 (NOBRIDGE) LOG  🔍 Verification step changed to: capturing
 (NOBRIDGE) LOG  🔍 Current camera keep-alive state: true
 (NOBRIDGE) LOG  🔍 Camera keep-alive effect completed
 (NOBRIDGE) LOG  Face detection state: {"faceData": true, "faceDetected": true, "faceQuality": true, "isDetecting": false, "verificationStep": "capturing"}
 (NOBRIDGE) LOG  Photo file verified successfully: {"path": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy7181634791366647918.jpg", "size": 441911, "uri": "file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy7181634791366647918.jpg"}
 (NOBRIDGE) LOG  Applying ML Kit photo processing...
 (NOBRIDGE) ERROR  ❌ Photo capture failed: [unknown/unknown: Camera is closed.]
 (NOBRIDGE) LOG  Photo capture error details: {"cameraState": {"hasTakePhoto": true, "isActive": true}, "errorMessage": "Camera is closed.", "errorType": "CameraRuntimeError"}
 (NOBRIDGE) LOG  👁️ Starting liveness detection...
 (NOBRIDGE) LOG  👁️ Liveness detection started successfully
 (NOBRIDGE) LOG  Photo file read successfully, content length: 589216
 (NOBRIDGE) LOG  ✅ Photo has valid image format header
 (NOBRIDGE) LOG  Additional delay for file system sync...
 (NOBRIDGE) LOG  Camera onInitialized called
 (NOBRIDGE) LOG  Camera started - ensuring detection is running
 (NOBRIDGE) LOG  🔍 === CAMERA isActive CALCULATION ===
 (NOBRIDGE) LOG  🔍 visible: true
 (NOBRIDGE) LOG  🔍 verificationStep: capturing
 (NOBRIDGE) LOG  🔍 isDetecting: false
 (NOBRIDGE) LOG  🔍 cameraKeepAlive: true
 (NOBRIDGE) LOG  🔍 Final isActive result: true
 (NOBRIDGE) LOG  🔍 Camera should be active - checking persistence state...
 (NOBRIDGE) LOG  ✅ ML Kit detection completed successfully: {"faceCount": 1, "faces": [{"contours": [Array], "frame": [Object], "headEulerAngleX": -7.060530662536621, "headEulerAngleY": -1.5084946155548096, "headEulerAngleZ": -3.2150464057922363, "landmarks": [Array], "leftEyeOpenProbability": 0.9970390796661377, "rightEyeOpenProbability": 0.99802166223526, "smilingProbability": 0.029783526435494423, "trackingID": 0}], "rawResult": {"faces": [[Object]], "imagePath": "file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy3250564694241199087.jpg"}, "success": true}
 (NOBRIDGE) LOG  🎉 SUCCESS: Face detection completed with 1 face(s)
 (NOBRIDGE) LOG  🎯 Processing detected faces...
 (NOBRIDGE) LOG  👤 Detected face details: {"headAngles": {"x": -7.060530662536621, "y": -1.5084946155548096, "z": -3.2150464057922363}, "leftEyeOpen": 0.9970390796661377, "rightEyeOpen": 0.99802166223526, "smiling": 0.029783526435494423, "trackingID": 0}
 (NOBRIDGE) LOG  🔄 Converted face data: {"attributes": {"age": undefined, "emotions": {"angry": 0, "happy": 0.029783526435494423, "neutral": 0.9702164735645056, "sad": 0, "surprised": 0}, "gender": undefined, "headEulerAngles": {"x": -7.060530662536621, "y": -1.5084946155548096, "z": -3.2150464057922363}, "smiling": 0.029783526435494423}, "bounds": {"height": 662, "width": 663, "x": 252, "y": 455}, "contours": [], "faceId": "0", "landmarks": [{"position": [Object], "type": "0"}, {"position": [Object], "type": "1"}, {"position": [Object], "type": "3"}, {"position": [Object], "type": "4"}, {"position": [Object], "type": "5"}, {"position": [Object], "type": "6"}, {"position": [Object], "type": "7"}, {"position": [Object], "type": "9"}, {"position": [Object], "type": "10"}, {"position": [Object], "type": "11"}], "leftEyeOpenProbability": 0.9970390796661377, "rightEyeOpenProbability": 0.99802166223526, "rollAngle": -3.2150464057922363, "timestamp": 1757435807427, "trackingId": "0", "yawAngle": -1.5084946155548096}
 (NOBRIDGE) LOG  Face quality calculation: {"bounds": {"height": 662, "width": 663, "x": 252, "y": 455}, "faceArea": 438906, "faceRatio": 0.228596875, "maxFaceSize": 0.6, "minFaceSize": 0.05, "screenArea": 1920000}
 (NOBRIDGE) LOG  Quality scores: {"angleQuality": 0.9464158932367961, "lightingQuality": 1, "overall": 0.9267310179710389, "sizeQuality": 0.8570156250000001, "threshold": 0.4}
 (NOBRIDGE) LOG  ✅ Face detection state updated successfully
 (NOBRIDGE) LOG  📊 Face quality score: 0.9267310179710389
 (NOBRIDGE) LOG  🎉 Face detection completed successfully - stopping all timers
 (NOBRIDGE) LOG  ⏱️ Face detection process completed in 1895.97ms
 (NOBRIDGE) LOG  === MAIN FACE DETECTION PROCESS COMPLETED ===
 (NOBRIDGE) LOG  👁️ Face data effect triggered: {"faceDataTimestamp": 1757435807031, "hasFaceData": true, "isLivenessActive": true}
 (NOBRIDGE) LOG  👁️ Processing face data for liveness detection
 (NOBRIDGE) LOG  👁️ processFaceData called: {"faceDataDetails": {"leftEye": 0.9965924024581909, "rightEye": 0.998312771320343, "timestamp": 1757435807031}, "hasFaceData": true, "isLivenessActive": true}
 (NOBRIDGE) LOG  👁️ Processing liveness data: {"average": "0.997", "eyeClosedThreshold": 0.98, "eyeOpenThreshold": 0.995, "historyLength": 1, "leftEye": "0.997", "rightEye": "0.998"}
 (NOBRIDGE) LOG  👁️ Analyzing blink pattern in history: {"historyLength": 1, "minRequired": 5}
 (NOBRIDGE) LOG  👁️ Liveness score calculation: {"blinkCount": 0, "blinkScore": 0, "historyLength": 1, "minRequired": 0.1, "movementScore": "0.000", "overallScore": "0.020", "timeScore": "0.100"}
 (NOBRIDGE) LOG  Photo file verification: {"exists": true, "fileSize": 438075, "path": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy8994563060486327392.jpg"}
 (NOBRIDGE) LOG  Photo file verified successfully: {"path": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy8994563060486327392.jpg", "size": 438075, "uri": "file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy8994563060486327392.jpg"}
 (NOBRIDGE) LOG  Applying ML Kit photo processing...
 (NOBRIDGE) LOG  🔍 === CAMERA isActive CALCULATION ===
 (NOBRIDGE) LOG  🔍 visible: true
 (NOBRIDGE) LOG  🔍 verificationStep: capturing
 (NOBRIDGE) LOG  🔍 isDetecting: false
 (NOBRIDGE) LOG  🔍 cameraKeepAlive: true
 (NOBRIDGE) LOG  🔍 Final isActive result: true
 (NOBRIDGE) LOG  🔍 Camera should be active - checking persistence state...
 (NOBRIDGE) LOG  Photo file read successfully, content length: 584100
 (NOBRIDGE) LOG  ✅ Photo has valid image format header
 (NOBRIDGE) LOG  Additional delay for file system sync...
 (NOBRIDGE) LOG  🔍 === FACE DETECTION STATE CHANGED ===
 (NOBRIDGE) LOG  🔍 Face data: true
 (NOBRIDGE) LOG  🔍 Face detected: true
 (NOBRIDGE) LOG  🔍 Face quality: true
 (NOBRIDGE) LOG  🔍 Is detecting: false
 (NOBRIDGE) LOG  🔍 Has interval: false
 (NOBRIDGE) LOG  🔍 Camera keep-alive: true
 (NOBRIDGE) LOG  🔍 Timestamp: 2025-09-09T16:36:47.572Z
 (NOBRIDGE) LOG  👁️ Face data effect triggered: {"faceDataTimestamp": 1757435807427, "hasFaceData": true, "isLivenessActive": true}
 (NOBRIDGE) LOG  👁️ Processing face data for liveness detection
 (NOBRIDGE) LOG  👁️ processFaceData called: {"faceDataDetails": {"leftEye": 0.9970390796661377, "rightEye": 0.99802166223526, "timestamp": 1757435807427}, "hasFaceData": true, "isLivenessActive": true}
 (NOBRIDGE) LOG  👁️ Processing liveness data: {"average": "0.998", "eyeClosedThreshold": 0.98, "eyeOpenThreshold": 0.995, "historyLength": 2, "leftEye": "0.997", "rightEye": "0.998"}
 (NOBRIDGE) LOG  👁️ Analyzing blink pattern in history: {"historyLength": 2, "minRequired": 5}
 (NOBRIDGE) LOG  👁️ Liveness score calculation: {"blinkCount": 0, "blinkScore": 0, "historyLength": 2, "minRequired": 0.1, "movementScore": "0.000", "overallScore": "0.040", "timeScore": "0.200"}
 (NOBRIDGE) LOG  Face detection state: {"faceData": true, "faceDetected": true, "faceQuality": true, "isDetecting": false, "verificationStep": "capturing"}
 (NOBRIDGE) LOG  Camera initialized - connecting reference to face detection hook
 (NOBRIDGE) LOG  🔍 === SETTING CAMERA REFERENCE ===
 (NOBRIDGE) LOG  🔍 Camera component exists: true
 (NOBRIDGE) LOG  🔍 Component type: object
 (NOBRIDGE) LOG  🔍 Has component: true
 (NOBRIDGE) LOG  🔍 Component methods: ["props", "context", "refs", "updater", "displayName", "isNativeViewMounted", "lastUIRotation", "rotationHelper", "onViewReady", "onAverageFpsChanged", "onInitialized", "onStarted", "onStopped", "onPreviewStarted", "onPreviewStopped", "onShutter", "onOutputOrientationChanged", "onPreviewOrientationChanged", "onError", "onCodeScanned", "ref", "lastFrameProcessor", "state", "_reactInternals", "_reactInternalInstance"]
 (NOBRIDGE) LOG  🔍 Has takePhoto method: true
 (NOBRIDGE) LOG  🔍 Camera reference stored in persistent ref
 (NOBRIDGE) LOG  ✅ Camera reference set successfully: {"cameraRefType": "object", "hasCameraRef": true, "hasTakePhotoMethod": true, "persistentRefState": "valid"}
 (NOBRIDGE) LOG  ✅ Camera component stabilized for critical transition
 (NOBRIDGE) LOG  🔍 Proactively monitoring camera state...
 (NOBRIDGE) LOG  🔍 === CAMERA STATE MONITORING ===
 (NOBRIDGE) LOG  🔍 Camera ref exists: true
 (NOBRIDGE) LOG  🔍 Persistent ref exists: true
 (NOBRIDGE) LOG  🔍 Camera ref state: valid
 (NOBRIDGE) LOG  🔍 Camera state monitoring: {"hasTakePhoto": true, "isActive": true}
 (NOBRIDGE) LOG  ✅ Camera state is healthy - proceeding with capture
 (NOBRIDGE) LOG  🔍 === CAMERA isActive CALCULATION ===
 (NOBRIDGE) LOG  🔍 visible: true
 (NOBRIDGE) LOG  🔍 verificationStep: capturing
 (NOBRIDGE) LOG  🔍 isDetecting: false
 (NOBRIDGE) LOG  🔍 cameraKeepAlive: true
 (NOBRIDGE) LOG  🔍 Final isActive result: true
 (NOBRIDGE) LOG  🔍 Camera should be active - checking persistence state...
 (NOBRIDGE) LOG  🤖 Sending photo to ML Kit for face detection...
 (NOBRIDGE) LOG  🔍 ML Kit detector state before detection: {"availableMethods": ["status", "error", "options"], "detectorType": "object", "isInitialized": true, "photoPath": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy7181634791366647918.jpg", "photoUri": "file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy7181634791366647918.jpg"}
 (NOBRIDGE) LOG  🤖 Sending photo to ML Kit for face detection...
 (NOBRIDGE) LOG  🔍 ML Kit detector state before detection: {"availableMethods": ["status", "error", "options"], "detectorType": "object", "isInitialized": true, "photoPath": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy8994563060486327392.jpg", "photoUri": "file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy8994563060486327392.jpg"}
 (NOBRIDGE) LOG  ✅ ML Kit detection completed successfully: {"faceCount": 1, "faces": [{"contours": [Array], "frame": [Object], "headEulerAngleX": -6.133548259735107, "headEulerAngleY": -2.407073736190796, "headEulerAngleZ": -2.8028361797332764, "landmarks": [Array], "leftEyeOpenProbability": 0.9928528666496277, "rightEyeOpenProbability": 0.9991688132286072, "smilingProbability": 0.01241330523043871, "trackingID": 0}], "rawResult": {"faces": [[Object]], "imagePath": "file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy7181634791366647918.jpg"}, "success": true}
 (NOBRIDGE) LOG  🎉 SUCCESS: Face detection completed with 1 face(s)
 (NOBRIDGE) LOG  🎯 Processing detected faces...
 (NOBRIDGE) LOG  👤 Detected face details: {"headAngles": {"x": -6.133548259735107, "y": -2.407073736190796, "z": -2.8028361797332764}, "leftEyeOpen": 0.9928528666496277, "rightEyeOpen": 0.9991688132286072, "smiling": 0.01241330523043871, "trackingID": 0}
 (NOBRIDGE) LOG  🔄 Converted face data: {"attributes": {"age": undefined, "emotions": {"angry": 0, "happy": 0.01241330523043871, "neutral": 0.9875866947695613, "sad": 0, "surprised": 0}, "gender": undefined, "headEulerAngles": {"x": -6.133548259735107, "y": -2.407073736190796, "z": -2.8028361797332764}, "smiling": 0.01241330523043871}, "bounds": {"height": 664, "width": 664, "x": 246, "y": 456}, "contours": [], "faceId": "0", "landmarks": [{"position": [Object], "type": "0"}, {"position": [Object], "type": "1"}, {"position": [Object], "type": "3"}, {"position": [Object], "type": "4"}, {"position": [Object], "type": "5"}, {"position": [Object], "type": "6"}, {"position": [Object], "type": "7"}, {"position": [Object], "type": "9"}, {"position": [Object], "type": "10"}, {"position": [Object], "type": "11"}], "leftEyeOpenProbability": 0.9928528666496277, "rightEyeOpenProbability": 0.9991688132286072, "rollAngle": -2.8028361797332764, "timestamp": 1757435807892, "trackingId": "0", "yawAngle": -2.407073736190796}
 (NOBRIDGE) LOG  Face quality calculation: {"bounds": {"height": 664, "width": 664, "x": 246, "y": 456}, "faceArea": 440896, "faceRatio": 0.22963333333333333, "maxFaceSize": 0.6, "minFaceSize": 0.05, "screenArea": 1920000}
 (NOBRIDGE) LOG  Quality scores: {"angleQuality": 0.953286063671112, "lightingQuality": 1, "overall": 0.926719152434667, "sizeQuality": 0.8518333333333334, "threshold": 0.4}
 (NOBRIDGE) LOG  ✅ Face detection state updated successfully
 (NOBRIDGE) LOG  📊 Face quality score: 0.926719152434667
 (NOBRIDGE) LOG  🎉 Face detection completed successfully - stopping all timers
 (NOBRIDGE) LOG  ⏱️ Face detection process completed in 2052.77ms
 (NOBRIDGE) LOG  === MAIN FACE DETECTION PROCESS COMPLETED ===
 (NOBRIDGE) LOG  🔍 === CAMERA isActive CALCULATION ===
 (NOBRIDGE) LOG  🔍 visible: true
 (NOBRIDGE) LOG  🔍 verificationStep: capturing
 (NOBRIDGE) LOG  🔍 isDetecting: false
 (NOBRIDGE) LOG  🔍 cameraKeepAlive: true
 (NOBRIDGE) LOG  🔍 Final isActive result: true
 (NOBRIDGE) LOG  🔍 Camera should be active - checking persistence state...
 (NOBRIDGE) LOG  🔍 === FACE DETECTION STATE CHANGED ===
 (NOBRIDGE) LOG  🔍 Face data: true
 (NOBRIDGE) LOG  🔍 Face detected: true
 (NOBRIDGE) LOG  🔍 Face quality: true
 (NOBRIDGE) LOG  🔍 Is detecting: false
 (NOBRIDGE) LOG  🔍 Has interval: false
 (NOBRIDGE) LOG  🔍 Camera keep-alive: true
 (NOBRIDGE) LOG  🔍 Timestamp: 2025-09-09T16:36:48.005Z
 (NOBRIDGE) LOG  👁️ Face data effect triggered: {"faceDataTimestamp": 1757435807892, "hasFaceData": true, "isLivenessActive": true}
 (NOBRIDGE) LOG  👁️ Processing face data for liveness detection
 (NOBRIDGE) LOG  👁️ processFaceData called: {"faceDataDetails": {"leftEye": 0.9928528666496277, "rightEye": 0.9991688132286072, "timestamp": 1757435807892}, "hasFaceData": true, "isLivenessActive": true}
 (NOBRIDGE) LOG  👁️ Processing liveness data: {"average": "0.996", "eyeClosedThreshold": 0.98, "eyeOpenThreshold": 0.995, "historyLength": 3, "leftEye": "0.993", "rightEye": "0.999"}
 (NOBRIDGE) LOG  👁️ Analyzing blink pattern in history: {"historyLength": 3, "minRequired": 5}
 (NOBRIDGE) LOG  👁️ Liveness score calculation: {"blinkCount": 0, "blinkScore": 0, "historyLength": 3, "minRequired": 0.1, "movementScore": "0.000", "overallScore": "0.060", "timeScore": "0.300"}
 (NOBRIDGE) LOG  Face detection state: {"faceData": true, "faceDetected": true, "faceQuality": true, "isDetecting": false, "verificationStep": "capturing"}
 (NOBRIDGE) LOG  🔍 === CAMERA isActive CALCULATION ===
 (NOBRIDGE) LOG  🔍 visible: true
 (NOBRIDGE) LOG  🔍 verificationStep: capturing
 (NOBRIDGE) LOG  🔍 isDetecting: false
 (NOBRIDGE) LOG  🔍 cameraKeepAlive: true
 (NOBRIDGE) LOG  🔍 Final isActive result: true
 (NOBRIDGE) LOG  🔍 Camera should be active - checking persistence state...
 (NOBRIDGE) LOG  🔍 === CAMERA STATE MONITORING ===
 (NOBRIDGE) LOG  🔍 Camera ref exists: true
 (NOBRIDGE) LOG  🔍 Persistent ref exists: true
 (NOBRIDGE) LOG  🔍 Camera ref state: valid
 (NOBRIDGE) LOG  🔍 Camera state monitoring: {"hasTakePhoto": true, "isActive": true}
 (NOBRIDGE) LOG  🔒 Camera health check result: true
 (NOBRIDGE) LOG  ✅ ML Kit detection completed successfully: {"faceCount": 1, "faces": [{"contours": [Array], "frame": [Object], "headEulerAngleX": -6.762702941894531, "headEulerAngleY": -1.8679473400115967, "headEulerAngleZ": -3.083650588989258, "landmarks": [Array], "leftEyeOpenProbability": 0.9952254295349121, "rightEyeOpenProbability": 0.9988862872123718, "smilingProbability": 0.025413721799850464, "trackingID": 0}], "rawResult": {"faces": [[Object]], "imagePath": "file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy8994563060486327392.jpg"}, "success": true}
 (NOBRIDGE) LOG  🎉 SUCCESS: Face detection completed with 1 face(s)
 (NOBRIDGE) LOG  🎯 Processing detected faces...
 (NOBRIDGE) LOG  👤 Detected face details: {"headAngles": {"x": -6.762702941894531, "y": -1.8679473400115967, "z": -3.083650588989258}, "leftEyeOpen": 0.9952254295349121, "rightEyeOpen": 0.9988862872123718, "smiling": 0.025413721799850464, "trackingID": 0}
 (NOBRIDGE) LOG  🔄 Converted face data: {"attributes": {"age": undefined, "emotions": {"angry": 0, "happy": 0.025413721799850464, "neutral": 0.9745862782001495, "sad": 0, "surprised": 0}, "gender": undefined, "headEulerAngles": {"x": -6.762702941894531, "y": -1.8679473400115967, "z": -3.083650588989258}, "smiling": 0.025413721799850464}, "bounds": {"height": 666, "width": 666, "x": 244, "y": 456}, "contours": [], "faceId": "0", "landmarks": [{"position": [Object], "type": "0"}, {"position": [Object], "type": "1"}, {"position": [Object], "type": "3"}, {"position": [Object], "type": "4"}, {"position": [Object], "type": "5"}, {"position": [Object], "type": "6"}, {"position": [Object], "type": "7"}, {"position": [Object], "type": "9"}, {"position": [Object], "type": "10"}, {"position": [Object], "type": "11"}], "leftEyeOpenProbability": 0.9952254295349121, "rightEyeOpenProbability": 0.9988862872123718, "rollAngle": -3.083650588989258, "timestamp": 1757435808112, "trackingId": "0", "yawAngle": -1.8679473400115967}
 (NOBRIDGE) LOG  Face quality calculation: {"bounds": {"height": 666, "width": 666, "x": 244, "y": 456}, "faceArea": 443556, "faceRatio": 0.23101875, "maxFaceSize": 0.6, "minFaceSize": 0.05, "screenArea": 1920000}
 (NOBRIDGE) LOG  Quality scores: {"angleQuality": 0.9486058235168457, "lightingQuality": 1, "overall": 0.9225442470550538, "sizeQuality": 0.8449062500000001, "threshold": 0.4}
 (NOBRIDGE) LOG  ✅ Face detection state updated successfully
 (NOBRIDGE) LOG  📊 Face quality score: 0.9225442470550538
 (NOBRIDGE) LOG  🎉 Face detection completed successfully - stopping all timers
 (NOBRIDGE) LOG  ⏱️ Face detection process completed in 1941.89ms
 (NOBRIDGE) LOG  === MAIN FACE DETECTION PROCESS COMPLETED ===
 (NOBRIDGE) LOG  🔍 === COMPREHENSIVE CAMERA STATE VALIDATION ===
 (NOBRIDGE) LOG  🔍 Camera ref exists: true
 (NOBRIDGE) LOG  🔍 Camera ref type: object
 (NOBRIDGE) LOG  🔍 Camera methods available: ["props", "context", "refs", "updater", "displayName", "isNativeViewMounted", "lastUIRotation", "rotationHelper", "onViewReady", "onAverageFpsChanged", "onInitialized", "onStarted", "onStopped", "onPreviewStarted", "onPreviewStopped", "onShutter", "onOutputOrientationChanged", "onPreviewOrientationChanged", "onError", "onCodeScanned", "ref", "lastFrameProcessor", "state", "_reactInternals", "_reactInternalInstance"]
 (NOBRIDGE) LOG  🔍 Has takePhoto method: true
 (NOBRIDGE) LOG  🔍 Camera props: {"audio": false, "device": {"formats": [[Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object], [Object]], "hardwareLevel": "full", "hasFlash": false, "hasTorch": false, "id": "1", "isMultiCam": false, "maxExposure": 24, "maxZoom": 10, "minExposure": -24, "minFocusDistance": 0, "minZoom": 1, "name": "1 (FRONT) androidx.camera.camera2", "neutralZoom": 1, "physicalDevices": ["wide-angle-camera"], "position": "front", "sensorOrientation": "landscape-right", "supportsFocus": true, "supportsLowLightBoost": false, "supportsRawCapture": false}, "frameProcessor": {"frameProcessor": [Function withFrameRefCountingTs1], "type": "readonly"}, "isActive": true, "onError": [Function onError], "onInitialized": [Function onInitialized], "onStarted": [Function onStarted], "photo": true, "style": {"height": "100%", "width": "100%"}, "video": false}
 (NOBRIDGE) LOG  🔍 Camera state: {"averageFpsSamples": [], "isRecordingWithFlash": false}
 (NOBRIDGE) LOG  🔍 Camera display name: Camera
 (NOBRIDGE) LOG  ✅ Camera validation passed - proceeding with capture
 (NOBRIDGE) LOG  Capturing photo with validated face...
 (NOBRIDGE) LOG  🔍 Validating camera state before final capture...
 (NOBRIDGE) LOG  ✅ Camera validation successful on attempt 1
 (NOBRIDGE) LOG  📸 Final camera state validation before photo capture...
 (NOBRIDGE) LOG  capturePhoto called with: {"cameraRefCurrent": {"_reactInternalInstance": {}, "_reactInternals": {"_debugHookTypes": null, "_debugInfo": null, "_debugNeedsRemount": false, "_debugOwner": [FiberNode], "actualDuration": 0.20645898580551147, "actualStartTime": 62212095.959149, "alternate": [FiberNode], "child": [FiberNode], "childLanes": 0, "deletions": null, "dependencies": null, "elementType": [Function Camera], "flags": 2097157, "index": 0, "key": "stable", "lanes": 0, "memoizedProps": [Object], "memoizedState": [Object], "mode": 3, "pendingProps": [Object], "ref": [Object], "refCleanup": null, "return": [FiberNode], "selfBaseDuration": 0.15947899967432022, "sibling": [FiberNode], "stateNode": [Circular], "subtreeFlags": 2097152, "tag": 1, "treeBaseDuration": 0.1704689934849739, "type": [Function Camera], "updateQueue": [Object]}, "context": {}, "displayName": "Camera", "isNativeViewMounted": true, "lastFrameProcessor": [Function withFrameRefCountingTs1], "lastUIRotation": 0, "onAverageFpsChanged": [Function bound onAverageFpsChanged], "onCodeScanned": [Function bound onCodeScanned], "onError": [Function bound onError], "onInitialized": [Function bound onInitialized], "onOutputOrientationChanged": [Function bound onOutputOrientationChanged], "onPreviewOrientationChanged": [Function bound onPreviewOrientationChanged], "onPreviewStarted": [Function bound onPreviewStarted], "onPreviewStopped": [Function bound onPreviewStopped], "onShutter": [Function bound onShutter], "onStarted": [Function bound onStarted], "onStopped": [Function bound onStopped], "onViewReady": [Function bound onViewReady], "props": {"audio": false, "device": [Object], "frameProcessor": [Object], "isActive": true, "onError": [Function onError], "onInitialized": [Function onInitialized], "onStarted": [Function onStarted], "photo": true, "style": [Object], "video": false}, "ref": {"current": [ReactFabricHostComponent]}, "refs": {}, "rotationHelper": {"outputOrientation": "portrait", "previewOrientation": "portrait"}, "state": {"averageFpsSamples": [Array], "isRecordingWithFlash": false}, "updater": {"enqueueForceUpdate": [Function enqueueForceUpdate], "enqueueReplaceState": [Function enqueueReplaceState], "enqueueSetState": [Function enqueueSetState], "isMounted": [Function isMounted]}}, "hasCameraRef": true, "hasTakePhotoMethod": true, "isInitialized": true}
 (NOBRIDGE) LOG  Capturing photo with validated face...
 (NOBRIDGE) LOG  🔍 Validating camera state before final capture...
 (NOBRIDGE) LOG  🔍 === CAMERA isActive CALCULATION ===
 (NOBRIDGE) LOG  🔍 visible: true
 (NOBRIDGE) LOG  🔍 verificationStep: capturing
 (NOBRIDGE) LOG  🔍 isDetecting: false
 (NOBRIDGE) LOG  🔍 cameraKeepAlive: true
 (NOBRIDGE) LOG  🔍 Final isActive result: true
 (NOBRIDGE) LOG  🔍 Camera should be active - checking persistence state...
 (NOBRIDGE) LOG  🔍 === FACE DETECTION STATE CHANGED ===
 (NOBRIDGE) LOG  🔍 Face data: true
 (NOBRIDGE) LOG  🔍 Face detected: true
 (NOBRIDGE) LOG  🔍 Face quality: true
 (NOBRIDGE) LOG  🔍 Is detecting: false
 (NOBRIDGE) LOG  🔍 Has interval: false
 (NOBRIDGE) LOG  🔍 Camera keep-alive: true
 (NOBRIDGE) LOG  🔍 Timestamp: 2025-09-09T16:36:48.224Z
 (NOBRIDGE) LOG  👁️ Face data effect triggered: {"faceDataTimestamp": 1757435808112, "hasFaceData": true, "isLivenessActive": true}
 (NOBRIDGE) LOG  👁️ Processing face data for liveness detection
 (NOBRIDGE) LOG  👁️ processFaceData called: {"faceDataDetails": {"leftEye": 0.9952254295349121, "rightEye": 0.9988862872123718, "timestamp": 1757435808112}, "hasFaceData": true, "isLivenessActive": true}
 (NOBRIDGE) LOG  👁️ Processing liveness data: {"average": "0.997", "eyeClosedThreshold": 0.98, "eyeOpenThreshold": 0.995, "historyLength": 4, "leftEye": "0.995", "rightEye": "0.999"}
 (NOBRIDGE) LOG  👁️ Analyzing blink pattern in history: {"historyLength": 4, "minRequired": 5}
 (NOBRIDGE) LOG  👁️ Liveness score calculation: {"blinkCount": 0, "blinkScore": 0, "historyLength": 4, "minRequired": 0.1, "movementScore": "0.000", "overallScore": "0.080", "timeScore": "0.400"}
 (NOBRIDGE) LOG  Face detection state: {"faceData": true, "faceDetected": true, "faceQuality": true, "isDetecting": false, "verificationStep": "capturing"}
 (NOBRIDGE) LOG  🔍 === CAMERA isActive CALCULATION ===
 (NOBRIDGE) LOG  🔍 visible: true
 (NOBRIDGE) LOG  🔍 verificationStep: capturing
 (NOBRIDGE) LOG  🔍 isDetecting: false
 (NOBRIDGE) LOG  🔍 cameraKeepAlive: true
 (NOBRIDGE) LOG  🔍 Final isActive result: true
 (NOBRIDGE) LOG  🔍 Camera should be active - checking persistence state...
 (NOBRIDGE) LOG  ✅ Camera validation successful on attempt 1
 (NOBRIDGE) LOG  📸 Final camera state validation before photo capture...
 (NOBRIDGE) LOG  🔍 === GET CAMERA INSTANCE ===
 (NOBRIDGE) LOG  🔍 Main ref exists: true
 (NOBRIDGE) LOG  🔍 Persistent ref exists: true
 (NOBRIDGE) LOG  ✅ getCameraInstance: returning main ref camera instance
 (NOBRIDGE) LOG  ✅ Photo capture successful: {"height": 1200, "isMirrored": true, "isRawPhoto": false, "orientation": "portrait", "path": "/data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy3956692060715982255.jpg", "width": 1600}
 (NOBRIDGE) LOG  ✅ Photo capture successful: {"height": 1200, "timestamp": 1757435808989, "uri": "file:///data/user/0/com.avyrentechnologies.avytracker/cache/mrousavy3956692060715982255.jpg", "width": 1600}
 (NOBRIDGE) LOG  🔍 === CAMERA KEEP-ALIVE EFFECT TRIGGERED ===
 (NOBRIDGE) LOG  🔍 Verification step changed to: processing
 (NOBRIDGE) LOG  🔍 Current camera keep-alive state: true
 (NOBRIDGE) LOG  🔍 Camera keep-alive effect completed
 (NOBRIDGE) LOG  Face detection state: {"faceData": true, "faceDetected": true, "faceQuality": true, "isDetecting": false, "verificationStep": "processing"}
 (NOBRIDGE) LOG  🔍 Face verification debug: {"currentEncodingLength": 5344, "hasStoredEncoding": true, "storedEncodingLength": 5344, "threshold": 0.75, "userId": 22}
 (NOBRIDGE) LOG  🔍 Starting face encoding comparison...
 (NOBRIDGE) LOG  🔍 Encoding details: {"currentEncodingLength": 5344, "currentEncodingPreview": "AADAfwAAwH8AAMB/AADAfwAAwH8AAMB/AADAfwAAwH8AAMB/AA...", "storedEncodingLength": 5344, "storedEncodingPreview": "AADAfwAAwH8AAMB/AADAfwAAwH8AAMB/AADAfwAAwH8AAMB/AA..."}
 (NOBRIDGE) WARN  Geometric features are zeros, using neutral score
 (NOBRIDGE) WARN  Measurement features are zeros, using neutral score
 (NOBRIDGE) WARN  Attribute features are zeros, using neutral score
 (NOBRIDGE) LOG  Enhanced face comparison results: {"attributeSimilarity": "0.5000", "encodingLengths": {"encoding1": 1002, "encoding2": 1002}, "featureCounts": {"attributes": 6, "geometric": 10, "landmarks": 936, "measurements": 50}, "geometricSimilarity": "0.5000", "landmarkSimilarity": "0.9992", "measurementSimilarity": "0.5000", "overallSimilarity": "0.7496", "threshold": 0.75}
 (NOBRIDGE) LOG  🔍 Face encoding comparison completed: {"confidence": 0.7495776802932066, "threshold": 0.75}
 (NOBRIDGE) LOG  🔍 Performing anti-spoofing analysis...
 (NOBRIDGE) LOG  🛡️ Anti-spoofing analysis completed: {"depthScore": "0.6000", "isSpoofed": false, "lightingScore": "0.9841", "overallScore": "0.7668", "reflectionScore": "0.7000", "textureScore": "0.8000"}
 (NOBRIDGE) LOG  Verification attempt failed: Verification confidence (0.75) below threshold (0.75)
 (NOBRIDGE) LOG  Verification attempt 1 failed: Verification confidence (0.75) below threshold (0.75)
 (NOBRIDGE) LOG  🔍 Face verification debug: {"currentEncodingLength": 5344, "hasStoredEncoding": true, "storedEncodingLength": 5344, "threshold": 0.75, "userId": 22}
 (NOBRIDGE) LOG  🔍 Starting face encoding comparison...
 (NOBRIDGE) LOG  🔍 Encoding details: {"currentEncodingLength": 5344, "currentEncodingPreview": "AADAfwAAwH8AAMB/AADAfwAAwH8AAMB/AADAfwAAwH8AAMB/AA...", "storedEncodingLength": 5344, "storedEncodingPreview": "AADAfwAAwH8AAMB/AADAfwAAwH8AAMB/AADAfwAAwH8AAMB/AA..."}
 (NOBRIDGE) WARN  Geometric features are zeros, using neutral score
 (NOBRIDGE) WARN  Measurement features are zeros, using neutral score
 (NOBRIDGE) WARN  Attribute features are zeros, using neutral score
 (NOBRIDGE) LOG  Enhanced face comparison results: {"attributeSimilarity": "0.5000", "encodingLengths": {"encoding1": 1002, "encoding2": 1002}, "featureCounts": {"attributes": 6, "geometric": 10, "landmarks": 936, "measurements": 50}, "geometricSimilarity": "0.5000", "landmarkSimilarity": "0.9992", "measurementSimilarity": "0.5000", "overallSimilarity": "0.7496", "threshold": 0.75}
 (NOBRIDGE) LOG  🔍 Face encoding comparison completed: {"confidence": 0.7495776802932066, "threshold": 0.75}
 (NOBRIDGE) LOG  🔍 Performing anti-spoofing analysis...
 (NOBRIDGE) LOG  🛡️ Anti-spoofing analysis completed: {"depthScore": "0.6000", "isSpoofed": false, "lightingScore": "0.9841", "overallScore": "0.7668", "reflectionScore": "0.7000", "textureScore": "0.8000"}
 (NOBRIDGE) LOG  Verification attempt failed: Verification confidence (0.75) below threshold (0.75)
 (NOBRIDGE) LOG  Verification attempt 2 failed: Verification confidence (0.75) below threshold (0.75)
 (NOBRIDGE) LOG  🔍 Face verification debug: {"currentEncodingLength": 5344, "hasStoredEncoding": true, "storedEncodingLength": 5344, "threshold": 0.75, "userId": 22}
 (NOBRIDGE) LOG  🔍 Starting face encoding comparison...
 (NOBRIDGE) LOG  🔍 Encoding details: {"currentEncodingLength": 5344, "currentEncodingPreview": "AADAfwAAwH8AAMB/AADAfwAAwH8AAMB/AADAfwAAwH8AAMB/AA...", "storedEncodingLength": 5344, "storedEncodingPreview": "AADAfwAAwH8AAMB/AADAfwAAwH8AAMB/AADAfwAAwH8AAMB/AA..."}
 (NOBRIDGE) WARN  Geometric features are zeros, using neutral score
 (NOBRIDGE) WARN  Measurement features are zeros, using neutral score
 (NOBRIDGE) WARN  Attribute features are zeros, using neutral score
 (NOBRIDGE) LOG  Enhanced face comparison results: {"attributeSimilarity": "0.5000", "encodingLengths": {"encoding1": 1002, "encoding2": 1002}, "featureCounts": {"attributes": 6, "geometric": 10, "landmarks": 936, "measurements": 50}, "geometricSimilarity": "0.5000", "landmarkSimilarity": "0.9992", "measurementSimilarity": "0.5000", "overallSimilarity": "0.7496", "threshold": 0.75}
 (NOBRIDGE) LOG  🔍 Face encoding comparison completed: {"confidence": 0.7495776802932066, "threshold": 0.75}
 (NOBRIDGE) LOG  🔍 Performing anti-spoofing analysis...
 (NOBRIDGE) LOG  🛡️ Anti-spoofing analysis completed: {"depthScore": "0.6000", "isSpoofed": false, "lightingScore": "0.9841", "overallScore": "0.7668", "reflectionScore": "0.7000", "textureScore": "0.8000"}
 (NOBRIDGE) LOG  Verification attempt failed: Verification confidence (0.75) below threshold (0.75)
 (NOBRIDGE) LOG  Verification attempt 3 failed: Verification confidence (0.75) below threshold (0.75)
 (NOBRIDGE) WARN  Verification operation failed, but continuing: {"code": "LOW_CONFIDENCE", "message": "Verification confidence (0.75) below threshold (0.75)", "retryable": true, "severity": "low", "suggestions": ["Improve lighting", "Center face in frame", "Look directly at camera"], "timestamp": 2025-09-09T16:36:52.282Z, "type": "LOW_CONFIDENCE", "userMessage": "Face verification failed. Please try again."}
 (NOBRIDGE) ERROR  Face verification API error: [Error: Verification failed - please try again]
 (NOBRIDGE) ERROR  ❌ Photo capture failed on attempt 1: {"code": "UNKNOWN_ERROR", "message": "Verification failed. Please try again.", "retryable": true, "severity": "low", "suggestions": ["Try again", "Restart app", "Contact support"], "timestamp": 2025-09-09T16:36:52.290Z, "type": "UNKNOWN_ERROR", "userMessage": "An unexpected error occurred. Please try again."}
 (NOBRIDGE) LOG  ⏳ Waiting 2000ms before retry...
 (NOBRIDGE) LOG  🔍 === CAMERA KEEP-ALIVE EFFECT TRIGGERED ===
 (NOBRIDGE) LOG  🔍 Verification step changed to: error
 (NOBRIDGE) LOG  🔍 Current camera keep-alive state: true
 (NOBRIDGE) LOG  🔓 Disabling camera keep-alive - verification failed
 (NOBRIDGE) LOG  🔓 === DISABLING CAMERA KEEP-ALIVE ===
 (NOBRIDGE) LOG  🔓 Previous state: true
 (NOBRIDGE) LOG  🔓 New state: false
 (NOBRIDGE) LOG  🔍 Camera keep-alive effect completed
 (NOBRIDGE) LOG  Face detection state: {"faceData": true, "faceDetected": true, "faceQuality": true, "isDetecting": false, "verificationStep": "error"}
 (NOBRIDGE) LOG  🔍 === CAMERA KEEP-ALIVE EFFECT TRIGGERED ===
 (NOBRIDGE) LOG  🔍 Verification step changed to: error
 (NOBRIDGE) LOG  🔍 Current camera keep-alive state: false
 (NOBRIDGE) LOG  🔓 Disabling camera keep-alive - verification failed
 (NOBRIDGE) LOG  🔓 === DISABLING CAMERA KEEP-ALIVE ===
 (NOBRIDGE) LOG  🔓 Previous state: false
 (NOBRIDGE) LOG  🔓 New state: false
 (NOBRIDGE) LOG  🔍 Camera keep-alive effect completed
 (NOBRIDGE) LOG  🔄 === REFRESHING CAMERA REFERENCE ===
 (NOBRIDGE) LOG  🔍 Current camera ref state: valid
 (NOBRIDGE) LOG  🔍 Persistent ref exists: true
 (NOBRIDGE) LOG  🔍 Persistent camera ref is valid - attempting recovery...
 (NOBRIDGE) WARN  ⚠️ Persistent ref test failed: Could not get the Camera's native view tag! Does the Camera View exist in the native view-tree?
 (NOBRIDGE) LOG  🔄 Waiting for camera to stabilize...
 (NOBRIDGE) WARN  ⚠️ Camera ref test failed: Could not get the Camera's native view tag! Does the Camera View exist in the native view-tree?
 (NOBRIDGE) LOG  🔄 Forcing camera state reset...
 (NOBRIDGE) LOG  ❌ Camera reference is still invalid after refresh - reset to detached state
 (NOBRIDGE) LOG  ✅ Camera refreshed before retry
 (NOBRIDGE) LOG  ✅ Camera validation successful on attempt 2
 (NOBRIDGE) LOG  📸 Final camera state validation before photo capture...
 (NOBRIDGE) LOG  capturePhoto called with: {"cameraRefCurrent": null, "hasCameraRef": false, "hasTakePhotoMethod": false, "isInitialized": true}
 (NOBRIDGE) ERROR  ❌ Photo capture failed on attempt 2: [Error: Camera not initialized]
 (NOBRIDGE) LOG  ⏳ Waiting 4000ms before retry...
 (NOBRIDGE) ERROR  Face detection error: Camera not initialized [Component Stack]
 (NOBRIDGE) LOG  🛡️ Detection active flag reset - allowing cleanup
(NOBRIDGE) ERROR  Face detection error: Camera not initialized [Component Stack]
 (NOBRIDGE) LOG  🛡️ Detection active flag reset - allowing cleanup
 (NOBRIDGE) LOG  App state changed: active -> background
 (NOBRIDGE) LOG  App went to background, keeping token refresh timer active
 (NOBRIDGE) LOG  Face detection app state changed: active -> background
 (NOBRIDGE) LOG  Liveness detection app state changed: active -> background
 (NOBRIDGE) LOG  App went to background, pausing liveness detection
